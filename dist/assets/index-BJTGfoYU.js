(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function b_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pg={exports:{}},cu={},mg={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var na=Symbol.for("react.element"),P_=Symbol.for("react.portal"),R_=Symbol.for("react.fragment"),j_=Symbol.for("react.strict_mode"),V_=Symbol.for("react.profiler"),D_=Symbol.for("react.provider"),M_=Symbol.for("react.context"),O_=Symbol.for("react.forward_ref"),L_=Symbol.for("react.suspense"),F_=Symbol.for("react.memo"),z_=Symbol.for("react.lazy"),Qf=Symbol.iterator;function U_(t){return t===null||typeof t!="object"?null:(t=Qf&&t[Qf]||t["@@iterator"],typeof t=="function"?t:null)}var gg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yg=Object.assign,vg={};function Ti(t,e,n){this.props=t,this.context=e,this.refs=vg,this.updater=n||gg}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ti.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _g(){}_g.prototype=Ti.prototype;function Jh(t,e,n){this.props=t,this.context=e,this.refs=vg,this.updater=n||gg}var Zh=Jh.prototype=new _g;Zh.constructor=Jh;yg(Zh,Ti.prototype);Zh.isPureReactComponent=!0;var Kf=Array.isArray,xg=Object.prototype.hasOwnProperty,ed={current:null},wg={key:!0,ref:!0,__self:!0,__source:!0};function Eg(t,e,n){var r,s={},i=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)xg.call(e,r)&&!wg.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:na,type:t,key:i,ref:a,props:s,_owner:ed.current}}function B_(t,e){return{$$typeof:na,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function td(t){return typeof t=="object"&&t!==null&&t.$$typeof===na}function $_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Gf=/\/+/g;function Zu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$_(""+t.key):e.toString(36)}function nl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case na:case P_:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+Zu(a,0):r,Kf(s)?(n="",t!=null&&(n=t.replace(Gf,"$&/")+"/"),nl(s,e,n,"",function(d){return d})):s!=null&&(td(s)&&(s=B_(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Gf,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",Kf(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Zu(i,l);a+=nl(i,e,n,c,s)}else if(c=U_(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Zu(i,l++),a+=nl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Va(t,e,n){if(t==null)return t;var r=[],s=0;return nl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function q_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ct={current:null},rl={transition:null},H_={ReactCurrentDispatcher:Ct,ReactCurrentBatchConfig:rl,ReactCurrentOwner:ed};function Tg(){throw Error("act(...) is not supported in production builds of React.")}ue.Children={map:Va,forEach:function(t,e,n){Va(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Va(t,function(){e++}),e},toArray:function(t){return Va(t,function(e){return e})||[]},only:function(t){if(!td(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ue.Component=Ti;ue.Fragment=R_;ue.Profiler=V_;ue.PureComponent=Jh;ue.StrictMode=j_;ue.Suspense=L_;ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H_;ue.act=Tg;ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yg({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=ed.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)xg.call(e,c)&&!wg.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:na,type:t.type,key:s,ref:i,props:r,_owner:a}};ue.createContext=function(t){return t={$$typeof:M_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:D_,_context:t},t.Consumer=t};ue.createElement=Eg;ue.createFactory=function(t){var e=Eg.bind(null,t);return e.type=t,e};ue.createRef=function(){return{current:null}};ue.forwardRef=function(t){return{$$typeof:O_,render:t}};ue.isValidElement=td;ue.lazy=function(t){return{$$typeof:z_,_payload:{_status:-1,_result:t},_init:q_}};ue.memo=function(t,e){return{$$typeof:F_,type:t,compare:e===void 0?null:e}};ue.startTransition=function(t){var e=rl.transition;rl.transition={};try{t()}finally{rl.transition=e}};ue.unstable_act=Tg;ue.useCallback=function(t,e){return Ct.current.useCallback(t,e)};ue.useContext=function(t){return Ct.current.useContext(t)};ue.useDebugValue=function(){};ue.useDeferredValue=function(t){return Ct.current.useDeferredValue(t)};ue.useEffect=function(t,e){return Ct.current.useEffect(t,e)};ue.useId=function(){return Ct.current.useId()};ue.useImperativeHandle=function(t,e,n){return Ct.current.useImperativeHandle(t,e,n)};ue.useInsertionEffect=function(t,e){return Ct.current.useInsertionEffect(t,e)};ue.useLayoutEffect=function(t,e){return Ct.current.useLayoutEffect(t,e)};ue.useMemo=function(t,e){return Ct.current.useMemo(t,e)};ue.useReducer=function(t,e,n){return Ct.current.useReducer(t,e,n)};ue.useRef=function(t){return Ct.current.useRef(t)};ue.useState=function(t){return Ct.current.useState(t)};ue.useSyncExternalStore=function(t,e,n){return Ct.current.useSyncExternalStore(t,e,n)};ue.useTransition=function(){return Ct.current.useTransition()};ue.version="18.3.1";mg.exports=ue;var X=mg.exports;const Ig=b_(X);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_=X,Q_=Symbol.for("react.element"),K_=Symbol.for("react.fragment"),G_=Object.prototype.hasOwnProperty,X_=W_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Y_={key:!0,ref:!0,__self:!0,__source:!0};function Sg(t,e,n){var r,s={},i=null,a=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)G_.call(e,r)&&!Y_.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:Q_,type:t,key:i,ref:a,props:s,_owner:X_.current}}cu.Fragment=K_;cu.jsx=Sg;cu.jsxs=Sg;pg.exports=cu;var u=pg.exports,Dc={},Ng={exports:{}},$t={},Cg={exports:{}},kg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,K){var Z=q.length;q.push(K);e:for(;0<Z;){var le=Z-1>>>1,de=q[le];if(0<s(de,K))q[le]=K,q[Z]=de,Z=le;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var K=q[0],Z=q.pop();if(Z!==K){q[0]=Z;e:for(var le=0,de=q.length,Wt=de>>>1;le<Wt;){var $e=2*(le+1)-1,Pe=q[$e],pt=$e+1,yn=q[pt];if(0>s(Pe,Z))pt<de&&0>s(yn,Pe)?(q[le]=yn,q[pt]=Z,le=pt):(q[le]=Pe,q[$e]=Z,le=$e);else if(pt<de&&0>s(yn,Z))q[le]=yn,q[pt]=Z,le=pt;else break e}}return K}function s(q,K){var Z=q.sortIndex-K.sortIndex;return Z!==0?Z:q.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],d=[],p=1,g=null,_=3,C=!1,P=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(q){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=q)r(d),K.sortIndex=K.expirationTime,e(c,K);else break;K=n(d)}}function M(q){if(j=!1,k(q),!P)if(n(c)!==null)P=!0,Ht(B);else{var K=n(d);K!==null&&Tt(M,K.startTime-q)}}function B(q,K){P=!1,j&&(j=!1,S(v),v=-1),C=!0;var Z=_;try{for(k(K),g=n(c);g!==null&&(!(g.expirationTime>K)||q&&!N());){var le=g.callback;if(typeof le=="function"){g.callback=null,_=g.priorityLevel;var de=le(g.expirationTime<=K);K=t.unstable_now(),typeof de=="function"?g.callback=de:g===n(c)&&r(c),k(K)}else r(c);g=n(c)}if(g!==null)var Wt=!0;else{var $e=n(d);$e!==null&&Tt(M,$e.startTime-K),Wt=!1}return Wt}finally{g=null,_=Z,C=!1}}var D=!1,x=null,v=-1,E=5,I=-1;function N(){return!(t.unstable_now()-I<E)}function A(){if(x!==null){var q=t.unstable_now();I=q;var K=!0;try{K=x(!0,q)}finally{K?w():(D=!1,x=null)}}else D=!1}var w;if(typeof T=="function")w=function(){T(A)};else if(typeof MessageChannel<"u"){var Ne=new MessageChannel,ge=Ne.port2;Ne.port1.onmessage=A,w=function(){ge.postMessage(null)}}else w=function(){z(A,0)};function Ht(q){x=q,D||(D=!0,w())}function Tt(q,K){v=z(function(){q(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){P||C||(P=!0,Ht(B))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return _},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(q){switch(_){case 1:case 2:case 3:var K=3;break;default:K=_}var Z=_;_=K;try{return q()}finally{_=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,K){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Z=_;_=q;try{return K()}finally{_=Z}},t.unstable_scheduleCallback=function(q,K,Z){var le=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?le+Z:le):Z=le,q){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=Z+de,q={id:p++,callback:K,priorityLevel:q,startTime:Z,expirationTime:de,sortIndex:-1},Z>le?(q.sortIndex=Z,e(d,q),n(c)===null&&q===n(d)&&(j?(S(v),v=-1):j=!0,Tt(M,Z-le))):(q.sortIndex=de,e(c,q),P||C||(P=!0,Ht(B))),q},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(q){var K=_;return function(){var Z=_;_=K;try{return q.apply(this,arguments)}finally{_=Z}}}})(kg);Cg.exports=kg;var J_=Cg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z_=X,Bt=J_;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ag=new Set,bo={};function ws(t,e){ci(t,e),ci(t+"Capture",e)}function ci(t,e){for(bo[t]=e,t=0;t<e.length;t++)Ag.add(e[t])}var Hn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Mc=Object.prototype.hasOwnProperty,ex=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Xf={},Yf={};function tx(t){return Mc.call(Yf,t)?!0:Mc.call(Xf,t)?!1:ex.test(t)?Yf[t]=!0:(Xf[t]=!0,!1)}function nx(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function rx(t,e,n,r){if(e===null||typeof e>"u"||nx(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var nd=/[\-:]([a-z])/g;function rd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(nd,rd);dt[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(nd,rd);dt[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(nd,rd);dt[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function sd(t,e,n,r){var s=dt.hasOwnProperty(e)?dt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rx(e,n,s,r)&&(n=null),r||s===null?tx(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=Z_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Da=Symbol.for("react.element"),Bs=Symbol.for("react.portal"),$s=Symbol.for("react.fragment"),id=Symbol.for("react.strict_mode"),Oc=Symbol.for("react.profiler"),bg=Symbol.for("react.provider"),Pg=Symbol.for("react.context"),od=Symbol.for("react.forward_ref"),Lc=Symbol.for("react.suspense"),Fc=Symbol.for("react.suspense_list"),ad=Symbol.for("react.memo"),dr=Symbol.for("react.lazy"),Rg=Symbol.for("react.offscreen"),Jf=Symbol.iterator;function Ki(t){return t===null||typeof t!="object"?null:(t=Jf&&t[Jf]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,ec;function so(t){if(ec===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ec=e&&e[1]||""}return`
`+ec+t}var tc=!1;function nc(t,e){if(!t||tc)return"";tc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{tc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?so(t):""}function sx(t){switch(t.tag){case 5:return so(t.type);case 16:return so("Lazy");case 13:return so("Suspense");case 19:return so("SuspenseList");case 0:case 2:case 15:return t=nc(t.type,!1),t;case 11:return t=nc(t.type.render,!1),t;case 1:return t=nc(t.type,!0),t;default:return""}}function zc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $s:return"Fragment";case Bs:return"Portal";case Oc:return"Profiler";case id:return"StrictMode";case Lc:return"Suspense";case Fc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Pg:return(t.displayName||"Context")+".Consumer";case bg:return(t._context.displayName||"Context")+".Provider";case od:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ad:return e=t.displayName||null,e!==null?e:zc(t.type)||"Memo";case dr:e=t._payload,t=t._init;try{return zc(t(e))}catch{}}return null}function ix(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zc(e);case 8:return e===id?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ox(t){var e=jg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ma(t){t._valueTracker||(t._valueTracker=ox(t))}function Vg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=jg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function El(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Uc(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zf(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Pr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dg(t,e){e=e.checked,e!=null&&sd(t,"checked",e,!1)}function Bc(t,e){Dg(t,e);var n=Pr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$c(t,e.type,n):e.hasOwnProperty("defaultValue")&&$c(t,e.type,Pr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ep(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $c(t,e,n){(e!=="number"||El(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var io=Array.isArray;function ei(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Pr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(io(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pr(n)}}function Mg(t,e){var n=Pr(e.value),r=Pr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function np(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Og(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hc(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Og(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,Lg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Po(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var po={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ax=["Webkit","ms","Moz","O"];Object.keys(po).forEach(function(t){ax.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),po[e]=po[t]})});function Fg(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||po.hasOwnProperty(t)&&po[t]?(""+e).trim():e+"px"}function zg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Fg(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var lx=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wc(t,e){if(e){if(lx[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Qc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=null;function ld(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gc=null,ti=null,ni=null;function rp(t){if(t=ia(t)){if(typeof Gc!="function")throw Error(U(280));var e=t.stateNode;e&&(e=mu(e),Gc(t.stateNode,t.type,e))}}function Ug(t){ti?ni?ni.push(t):ni=[t]:ti=t}function Bg(){if(ti){var t=ti,e=ni;if(ni=ti=null,rp(t),e)for(t=0;t<e.length;t++)rp(e[t])}}function $g(t,e){return t(e)}function qg(){}var rc=!1;function Hg(t,e,n){if(rc)return t(e,n);rc=!0;try{return $g(t,e,n)}finally{rc=!1,(ti!==null||ni!==null)&&(qg(),Bg())}}function Ro(t,e){var n=t.stateNode;if(n===null)return null;var r=mu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Xc=!1;if(Hn)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){Xc=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{Xc=!1}function ux(t,e,n,r,s,i,a,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(p){this.onError(p)}}var mo=!1,Tl=null,Il=!1,Yc=null,cx={onError:function(t){mo=!0,Tl=t}};function hx(t,e,n,r,s,i,a,l,c){mo=!1,Tl=null,ux.apply(cx,arguments)}function dx(t,e,n,r,s,i,a,l,c){if(hx.apply(this,arguments),mo){if(mo){var d=Tl;mo=!1,Tl=null}else throw Error(U(198));Il||(Il=!0,Yc=d)}}function Es(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sp(t){if(Es(t)!==t)throw Error(U(188))}function fx(t){var e=t.alternate;if(!e){if(e=Es(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sp(s),t;if(i===r)return sp(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Qg(t){return t=fx(t),t!==null?Kg(t):null}function Kg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kg(t);if(e!==null)return e;t=t.sibling}return null}var Gg=Bt.unstable_scheduleCallback,ip=Bt.unstable_cancelCallback,px=Bt.unstable_shouldYield,mx=Bt.unstable_requestPaint,Be=Bt.unstable_now,gx=Bt.unstable_getCurrentPriorityLevel,ud=Bt.unstable_ImmediatePriority,Xg=Bt.unstable_UserBlockingPriority,Sl=Bt.unstable_NormalPriority,yx=Bt.unstable_LowPriority,Yg=Bt.unstable_IdlePriority,hu=null,Cn=null;function vx(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(hu,t,void 0,(t.current.flags&128)===128)}catch{}}var fn=Math.clz32?Math.clz32:wx,_x=Math.log,xx=Math.LN2;function wx(t){return t>>>=0,t===0?32:31-(_x(t)/xx|0)|0}var La=64,Fa=4194304;function oo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Nl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=oo(l):(i&=a,i!==0&&(r=oo(i)))}else a=n&~s,a!==0?r=oo(a):i!==0&&(r=oo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-fn(e),s=1<<n,r|=t[n],e&=~s;return r}function Ex(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Tx(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-fn(i),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=Ex(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Jc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jg(){var t=La;return La<<=1,!(La&4194240)&&(La=64),t}function sc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ra(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fn(e),t[e]=n}function Ix(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-fn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function cd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-fn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function Zg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ey,hd,ty,ny,ry,Zc=!1,za=[],_r=null,xr=null,wr=null,jo=new Map,Vo=new Map,pr=[],Sx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(t,e){switch(t){case"focusin":case"focusout":_r=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":jo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vo.delete(e.pointerId)}}function Xi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ia(e),e!==null&&hd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Nx(t,e,n,r,s){switch(e){case"focusin":return _r=Xi(_r,t,e,n,r,s),!0;case"dragenter":return xr=Xi(xr,t,e,n,r,s),!0;case"mouseover":return wr=Xi(wr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return jo.set(i,Xi(jo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Vo.set(i,Xi(Vo.get(i)||null,t,e,n,r,s)),!0}return!1}function sy(t){var e=ss(t.target);if(e!==null){var n=Es(e);if(n!==null){if(e=n.tag,e===13){if(e=Wg(n),e!==null){t.blockedOn=e,ry(t.priority,function(){ty(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function sl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=eh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kc=r,n.target.dispatchEvent(r),Kc=null}else return e=ia(n),e!==null&&hd(e),t.blockedOn=n,!1;e.shift()}return!0}function ap(t,e,n){sl(t)&&n.delete(e)}function Cx(){Zc=!1,_r!==null&&sl(_r)&&(_r=null),xr!==null&&sl(xr)&&(xr=null),wr!==null&&sl(wr)&&(wr=null),jo.forEach(ap),Vo.forEach(ap)}function Yi(t,e){t.blockedOn===e&&(t.blockedOn=null,Zc||(Zc=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,Cx)))}function Do(t){function e(s){return Yi(s,t)}if(0<za.length){Yi(za[0],t);for(var n=1;n<za.length;n++){var r=za[n];r.blockedOn===t&&(r.blockedOn=null)}}for(_r!==null&&Yi(_r,t),xr!==null&&Yi(xr,t),wr!==null&&Yi(wr,t),jo.forEach(e),Vo.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)sy(n),n.blockedOn===null&&pr.shift()}var ri=Jn.ReactCurrentBatchConfig,Cl=!0;function kx(t,e,n,r){var s=ve,i=ri.transition;ri.transition=null;try{ve=1,dd(t,e,n,r)}finally{ve=s,ri.transition=i}}function Ax(t,e,n,r){var s=ve,i=ri.transition;ri.transition=null;try{ve=4,dd(t,e,n,r)}finally{ve=s,ri.transition=i}}function dd(t,e,n,r){if(Cl){var s=eh(t,e,n,r);if(s===null)pc(t,e,r,kl,n),op(t,r);else if(Nx(s,t,e,n,r))r.stopPropagation();else if(op(t,r),e&4&&-1<Sx.indexOf(t)){for(;s!==null;){var i=ia(s);if(i!==null&&ey(i),i=eh(t,e,n,r),i===null&&pc(t,e,r,kl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else pc(t,e,r,null,n)}}var kl=null;function eh(t,e,n,r){if(kl=null,t=ld(r),t=ss(t),t!==null)if(e=Es(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kl=t,null}function iy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(gx()){case ud:return 1;case Xg:return 4;case Sl:case yx:return 16;case Yg:return 536870912;default:return 16}default:return 16}}var gr=null,fd=null,il=null;function oy(){if(il)return il;var t,e=fd,n=e.length,r,s="value"in gr?gr.value:gr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[i-r];r++);return il=s.slice(t,1<r?1-r:void 0)}function ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ua(){return!0}function lp(){return!1}function qt(t){function e(n,r,s,i,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ua:lp,this.isPropagationStopped=lp,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ua)},persist:function(){},isPersistent:Ua}),e}var Ii={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pd=qt(Ii),sa=Oe({},Ii,{view:0,detail:0}),bx=qt(sa),ic,oc,Ji,du=Oe({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:md,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ji&&(Ji&&t.type==="mousemove"?(ic=t.screenX-Ji.screenX,oc=t.screenY-Ji.screenY):oc=ic=0,Ji=t),ic)},movementY:function(t){return"movementY"in t?t.movementY:oc}}),up=qt(du),Px=Oe({},du,{dataTransfer:0}),Rx=qt(Px),jx=Oe({},sa,{relatedTarget:0}),ac=qt(jx),Vx=Oe({},Ii,{animationName:0,elapsedTime:0,pseudoElement:0}),Dx=qt(Vx),Mx=Oe({},Ii,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ox=qt(Mx),Lx=Oe({},Ii,{data:0}),cp=qt(Lx),Fx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ux={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Bx(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ux[t])?!!e[t]:!1}function md(){return Bx}var $x=Oe({},sa,{key:function(t){if(t.key){var e=Fx[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zx[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:md,charCode:function(t){return t.type==="keypress"?ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qx=qt($x),Hx=Oe({},du,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hp=qt(Hx),Wx=Oe({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:md}),Qx=qt(Wx),Kx=Oe({},Ii,{propertyName:0,elapsedTime:0,pseudoElement:0}),Gx=qt(Kx),Xx=Oe({},du,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Yx=qt(Xx),Jx=[9,13,27,32],gd=Hn&&"CompositionEvent"in window,go=null;Hn&&"documentMode"in document&&(go=document.documentMode);var Zx=Hn&&"TextEvent"in window&&!go,ay=Hn&&(!gd||go&&8<go&&11>=go),dp=" ",fp=!1;function ly(t,e){switch(t){case"keyup":return Jx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qs=!1;function e1(t,e){switch(t){case"compositionend":return uy(e);case"keypress":return e.which!==32?null:(fp=!0,dp);case"textInput":return t=e.data,t===dp&&fp?null:t;default:return null}}function t1(t,e){if(qs)return t==="compositionend"||!gd&&ly(t,e)?(t=oy(),il=fd=gr=null,qs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ay&&e.locale!=="ko"?null:e.data;default:return null}}var n1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!n1[t.type]:e==="textarea"}function cy(t,e,n,r){Ug(r),e=Al(e,"onChange"),0<e.length&&(n=new pd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var yo=null,Mo=null;function r1(t){wy(t,0)}function fu(t){var e=Qs(t);if(Vg(e))return t}function s1(t,e){if(t==="change")return e}var hy=!1;if(Hn){var lc;if(Hn){var uc="oninput"in document;if(!uc){var mp=document.createElement("div");mp.setAttribute("oninput","return;"),uc=typeof mp.oninput=="function"}lc=uc}else lc=!1;hy=lc&&(!document.documentMode||9<document.documentMode)}function gp(){yo&&(yo.detachEvent("onpropertychange",dy),Mo=yo=null)}function dy(t){if(t.propertyName==="value"&&fu(Mo)){var e=[];cy(e,Mo,t,ld(t)),Hg(r1,e)}}function i1(t,e,n){t==="focusin"?(gp(),yo=e,Mo=n,yo.attachEvent("onpropertychange",dy)):t==="focusout"&&gp()}function o1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return fu(Mo)}function a1(t,e){if(t==="click")return fu(e)}function l1(t,e){if(t==="input"||t==="change")return fu(e)}function u1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:u1;function Oo(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Mc.call(e,s)||!gn(t[s],e[s]))return!1}return!0}function yp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vp(t,e){var n=yp(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yp(n)}}function fy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function py(){for(var t=window,e=El();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=El(t.document)}return e}function yd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c1(t){var e=py(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fy(n.ownerDocument.documentElement,n)){if(r!==null&&yd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vp(n,i);var a=vp(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var h1=Hn&&"documentMode"in document&&11>=document.documentMode,Hs=null,th=null,vo=null,nh=!1;function _p(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nh||Hs==null||Hs!==El(r)||(r=Hs,"selectionStart"in r&&yd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),vo&&Oo(vo,r)||(vo=r,r=Al(th,"onSelect"),0<r.length&&(e=new pd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hs)))}function Ba(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ws={animationend:Ba("Animation","AnimationEnd"),animationiteration:Ba("Animation","AnimationIteration"),animationstart:Ba("Animation","AnimationStart"),transitionend:Ba("Transition","TransitionEnd")},cc={},my={};Hn&&(my=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function pu(t){if(cc[t])return cc[t];if(!Ws[t])return t;var e=Ws[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in my)return cc[t]=e[n];return t}var gy=pu("animationend"),yy=pu("animationiteration"),vy=pu("animationstart"),_y=pu("transitionend"),xy=new Map,xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fr(t,e){xy.set(t,e),ws(e,[t])}for(var hc=0;hc<xp.length;hc++){var dc=xp[hc],d1=dc.toLowerCase(),f1=dc[0].toUpperCase()+dc.slice(1);Fr(d1,"on"+f1)}Fr(gy,"onAnimationEnd");Fr(yy,"onAnimationIteration");Fr(vy,"onAnimationStart");Fr("dblclick","onDoubleClick");Fr("focusin","onFocus");Fr("focusout","onBlur");Fr(_y,"onTransitionEnd");ci("onMouseEnter",["mouseout","mouseover"]);ci("onMouseLeave",["mouseout","mouseover"]);ci("onPointerEnter",["pointerout","pointerover"]);ci("onPointerLeave",["pointerout","pointerover"]);ws("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ws("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ws("onBeforeInput",["compositionend","keypress","textInput","paste"]);ws("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ws("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ao="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ao));function wp(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,dx(r,e,void 0,t),t.currentTarget=null}function wy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;wp(s,l,d),i=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;wp(s,l,d),i=c}}}if(Il)throw t=Yc,Il=!1,Yc=null,t}function Ce(t,e){var n=e[ah];n===void 0&&(n=e[ah]=new Set);var r=t+"__bubble";n.has(r)||(Ey(e,t,2,!1),n.add(r))}function fc(t,e,n){var r=0;e&&(r|=4),Ey(n,t,r,e)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[$a]){t[$a]=!0,Ag.forEach(function(n){n!=="selectionchange"&&(p1.has(n)||fc(n,!1,t),fc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$a]||(e[$a]=!0,fc("selectionchange",!1,e))}}function Ey(t,e,n,r){switch(iy(e)){case 1:var s=kx;break;case 4:s=Ax;break;default:s=dd}n=s.bind(null,e,n,t),s=void 0,!Xc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function pc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=ss(l),a===null)return;if(c=a.tag,c===5||c===6){r=i=a;continue e}l=l.parentNode}}r=r.return}Hg(function(){var d=i,p=ld(n),g=[];e:{var _=xy.get(t);if(_!==void 0){var C=pd,P=t;switch(t){case"keypress":if(ol(n)===0)break e;case"keydown":case"keyup":C=qx;break;case"focusin":P="focus",C=ac;break;case"focusout":P="blur",C=ac;break;case"beforeblur":case"afterblur":C=ac;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=up;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=Rx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Qx;break;case gy:case yy:case vy:C=Dx;break;case _y:C=Gx;break;case"scroll":C=bx;break;case"wheel":C=Yx;break;case"copy":case"cut":case"paste":C=Ox;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=hp}var j=(e&4)!==0,z=!j&&t==="scroll",S=j?_!==null?_+"Capture":null:_;j=[];for(var T=d,k;T!==null;){k=T;var M=k.stateNode;if(k.tag===5&&M!==null&&(k=M,S!==null&&(M=Ro(T,S),M!=null&&j.push(Fo(T,M,k)))),z)break;T=T.return}0<j.length&&(_=new C(_,P,null,n,p),g.push({event:_,listeners:j}))}}if(!(e&7)){e:{if(_=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",_&&n!==Kc&&(P=n.relatedTarget||n.fromElement)&&(ss(P)||P[Wn]))break e;if((C||_)&&(_=p.window===p?p:(_=p.ownerDocument)?_.defaultView||_.parentWindow:window,C?(P=n.relatedTarget||n.toElement,C=d,P=P?ss(P):null,P!==null&&(z=Es(P),P!==z||P.tag!==5&&P.tag!==6)&&(P=null)):(C=null,P=d),C!==P)){if(j=up,M="onMouseLeave",S="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(j=hp,M="onPointerLeave",S="onPointerEnter",T="pointer"),z=C==null?_:Qs(C),k=P==null?_:Qs(P),_=new j(M,T+"leave",C,n,p),_.target=z,_.relatedTarget=k,M=null,ss(p)===d&&(j=new j(S,T+"enter",P,n,p),j.target=k,j.relatedTarget=z,M=j),z=M,C&&P)t:{for(j=C,S=P,T=0,k=j;k;k=Os(k))T++;for(k=0,M=S;M;M=Os(M))k++;for(;0<T-k;)j=Os(j),T--;for(;0<k-T;)S=Os(S),k--;for(;T--;){if(j===S||S!==null&&j===S.alternate)break t;j=Os(j),S=Os(S)}j=null}else j=null;C!==null&&Ep(g,_,C,j,!1),P!==null&&z!==null&&Ep(g,z,P,j,!0)}}e:{if(_=d?Qs(d):window,C=_.nodeName&&_.nodeName.toLowerCase(),C==="select"||C==="input"&&_.type==="file")var B=s1;else if(pp(_))if(hy)B=l1;else{B=o1;var D=i1}else(C=_.nodeName)&&C.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(B=a1);if(B&&(B=B(t,d))){cy(g,B,n,p);break e}D&&D(t,_,d),t==="focusout"&&(D=_._wrapperState)&&D.controlled&&_.type==="number"&&$c(_,"number",_.value)}switch(D=d?Qs(d):window,t){case"focusin":(pp(D)||D.contentEditable==="true")&&(Hs=D,th=d,vo=null);break;case"focusout":vo=th=Hs=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,_p(g,n,p);break;case"selectionchange":if(h1)break;case"keydown":case"keyup":_p(g,n,p)}var x;if(gd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else qs?ly(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(ay&&n.locale!=="ko"&&(qs||v!=="onCompositionStart"?v==="onCompositionEnd"&&qs&&(x=oy()):(gr=p,fd="value"in gr?gr.value:gr.textContent,qs=!0)),D=Al(d,v),0<D.length&&(v=new cp(v,t,null,n,p),g.push({event:v,listeners:D}),x?v.data=x:(x=uy(n),x!==null&&(v.data=x)))),(x=Zx?e1(t,n):t1(t,n))&&(d=Al(d,"onBeforeInput"),0<d.length&&(p=new cp("onBeforeInput","beforeinput",null,n,p),g.push({event:p,listeners:d}),p.data=x))}wy(g,e)})}function Fo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Al(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ro(t,n),i!=null&&r.unshift(Fo(t,i,s)),i=Ro(t,e),i!=null&&r.push(Fo(t,i,s))),t=t.return}return r}function Os(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ep(t,e,n,r,s){for(var i=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Ro(n,i),c!=null&&a.unshift(Fo(n,c,l))):s||(c=Ro(n,i),c!=null&&a.push(Fo(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var m1=/\r\n?/g,g1=/\u0000|\uFFFD/g;function Tp(t){return(typeof t=="string"?t:""+t).replace(m1,`
`).replace(g1,"")}function qa(t,e,n){if(e=Tp(e),Tp(t)!==e&&n)throw Error(U(425))}function bl(){}var rh=null,sh=null;function ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var oh=typeof setTimeout=="function"?setTimeout:void 0,y1=typeof clearTimeout=="function"?clearTimeout:void 0,Ip=typeof Promise=="function"?Promise:void 0,v1=typeof queueMicrotask=="function"?queueMicrotask:typeof Ip<"u"?function(t){return Ip.resolve(null).then(t).catch(_1)}:oh;function _1(t){setTimeout(function(){throw t})}function mc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Do(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Do(e)}function Er(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Si=Math.random().toString(36).slice(2),Nn="__reactFiber$"+Si,zo="__reactProps$"+Si,Wn="__reactContainer$"+Si,ah="__reactEvents$"+Si,x1="__reactListeners$"+Si,w1="__reactHandles$"+Si;function ss(t){var e=t[Nn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[Nn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sp(t);t!==null;){if(n=t[Nn])return n;t=Sp(t)}return e}t=n,n=t.parentNode}return null}function ia(t){return t=t[Nn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function mu(t){return t[zo]||null}var lh=[],Ks=-1;function zr(t){return{current:t}}function be(t){0>Ks||(t.current=lh[Ks],lh[Ks]=null,Ks--)}function Se(t,e){Ks++,lh[Ks]=t.current,t.current=e}var Rr={},Et=zr(Rr),Rt=zr(!1),fs=Rr;function hi(t,e){var n=t.type.contextTypes;if(!n)return Rr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function Pl(){be(Rt),be(Et)}function Np(t,e,n){if(Et.current!==Rr)throw Error(U(168));Se(Et,e),Se(Rt,n)}function Ty(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,ix(t)||"Unknown",s));return Oe({},n,r)}function Rl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rr,fs=Et.current,Se(Et,t),Se(Rt,Rt.current),!0}function Cp(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Ty(t,e,fs),r.__reactInternalMemoizedMergedChildContext=t,be(Rt),be(Et),Se(Et,t)):be(Rt),Se(Rt,n)}var zn=null,gu=!1,gc=!1;function Iy(t){zn===null?zn=[t]:zn.push(t)}function E1(t){gu=!0,Iy(t)}function Ur(){if(!gc&&zn!==null){gc=!0;var t=0,e=ve;try{var n=zn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,gu=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),Gg(ud,Ur),s}finally{ve=e,gc=!1}}return null}var Gs=[],Xs=0,jl=null,Vl=0,Xt=[],Yt=0,ps=null,Bn=1,$n="";function es(t,e){Gs[Xs++]=Vl,Gs[Xs++]=jl,jl=t,Vl=e}function Sy(t,e,n){Xt[Yt++]=Bn,Xt[Yt++]=$n,Xt[Yt++]=ps,ps=t;var r=Bn;t=$n;var s=32-fn(r)-1;r&=~(1<<s),n+=1;var i=32-fn(e)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Bn=1<<32-fn(e)+s|n<<s|r,$n=i+t}else Bn=1<<i|n<<s|r,$n=t}function vd(t){t.return!==null&&(es(t,1),Sy(t,1,0))}function _d(t){for(;t===jl;)jl=Gs[--Xs],Gs[Xs]=null,Vl=Gs[--Xs],Gs[Xs]=null;for(;t===ps;)ps=Xt[--Yt],Xt[Yt]=null,$n=Xt[--Yt],Xt[Yt]=null,Bn=Xt[--Yt],Xt[Yt]=null}var Ut=null,zt=null,Ve=!1,hn=null;function Ny(t,e){var n=en(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kp(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ut=t,zt=Er(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ut=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ps!==null?{id:Bn,overflow:$n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=en(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ut=t,zt=null,!0):!1;default:return!1}}function uh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ch(t){if(Ve){var e=zt;if(e){var n=e;if(!kp(t,e)){if(uh(t))throw Error(U(418));e=Er(n.nextSibling);var r=Ut;e&&kp(t,e)?Ny(r,n):(t.flags=t.flags&-4097|2,Ve=!1,Ut=t)}}else{if(uh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ve=!1,Ut=t}}}function Ap(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ut=t}function Ha(t){if(t!==Ut)return!1;if(!Ve)return Ap(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ih(t.type,t.memoizedProps)),e&&(e=zt)){if(uh(t))throw Cy(),Error(U(418));for(;e;)Ny(t,e),e=Er(e.nextSibling)}if(Ap(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=Er(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=Ut?Er(t.stateNode.nextSibling):null;return!0}function Cy(){for(var t=zt;t;)t=Er(t.nextSibling)}function di(){zt=Ut=null,Ve=!1}function xd(t){hn===null?hn=[t]:hn.push(t)}var T1=Jn.ReactCurrentBatchConfig;function Zi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Wa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function bp(t){var e=t._init;return e(t._payload)}function ky(t){function e(S,T){if(t){var k=S.deletions;k===null?(S.deletions=[T],S.flags|=16):k.push(T)}}function n(S,T){if(!t)return null;for(;T!==null;)e(S,T),T=T.sibling;return null}function r(S,T){for(S=new Map;T!==null;)T.key!==null?S.set(T.key,T):S.set(T.index,T),T=T.sibling;return S}function s(S,T){return S=Nr(S,T),S.index=0,S.sibling=null,S}function i(S,T,k){return S.index=k,t?(k=S.alternate,k!==null?(k=k.index,k<T?(S.flags|=2,T):k):(S.flags|=2,T)):(S.flags|=1048576,T)}function a(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,T,k,M){return T===null||T.tag!==6?(T=Tc(k,S.mode,M),T.return=S,T):(T=s(T,k),T.return=S,T)}function c(S,T,k,M){var B=k.type;return B===$s?p(S,T,k.props.children,M,k.key):T!==null&&(T.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===dr&&bp(B)===T.type)?(M=s(T,k.props),M.ref=Zi(S,T,k),M.return=S,M):(M=fl(k.type,k.key,k.props,null,S.mode,M),M.ref=Zi(S,T,k),M.return=S,M)}function d(S,T,k,M){return T===null||T.tag!==4||T.stateNode.containerInfo!==k.containerInfo||T.stateNode.implementation!==k.implementation?(T=Ic(k,S.mode,M),T.return=S,T):(T=s(T,k.children||[]),T.return=S,T)}function p(S,T,k,M,B){return T===null||T.tag!==7?(T=us(k,S.mode,M,B),T.return=S,T):(T=s(T,k),T.return=S,T)}function g(S,T,k){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Tc(""+T,S.mode,k),T.return=S,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Da:return k=fl(T.type,T.key,T.props,null,S.mode,k),k.ref=Zi(S,null,T),k.return=S,k;case Bs:return T=Ic(T,S.mode,k),T.return=S,T;case dr:var M=T._init;return g(S,M(T._payload),k)}if(io(T)||Ki(T))return T=us(T,S.mode,k,null),T.return=S,T;Wa(S,T)}return null}function _(S,T,k,M){var B=T!==null?T.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return B!==null?null:l(S,T,""+k,M);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Da:return k.key===B?c(S,T,k,M):null;case Bs:return k.key===B?d(S,T,k,M):null;case dr:return B=k._init,_(S,T,B(k._payload),M)}if(io(k)||Ki(k))return B!==null?null:p(S,T,k,M,null);Wa(S,k)}return null}function C(S,T,k,M,B){if(typeof M=="string"&&M!==""||typeof M=="number")return S=S.get(k)||null,l(T,S,""+M,B);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Da:return S=S.get(M.key===null?k:M.key)||null,c(T,S,M,B);case Bs:return S=S.get(M.key===null?k:M.key)||null,d(T,S,M,B);case dr:var D=M._init;return C(S,T,k,D(M._payload),B)}if(io(M)||Ki(M))return S=S.get(k)||null,p(T,S,M,B,null);Wa(T,M)}return null}function P(S,T,k,M){for(var B=null,D=null,x=T,v=T=0,E=null;x!==null&&v<k.length;v++){x.index>v?(E=x,x=null):E=x.sibling;var I=_(S,x,k[v],M);if(I===null){x===null&&(x=E);break}t&&x&&I.alternate===null&&e(S,x),T=i(I,T,v),D===null?B=I:D.sibling=I,D=I,x=E}if(v===k.length)return n(S,x),Ve&&es(S,v),B;if(x===null){for(;v<k.length;v++)x=g(S,k[v],M),x!==null&&(T=i(x,T,v),D===null?B=x:D.sibling=x,D=x);return Ve&&es(S,v),B}for(x=r(S,x);v<k.length;v++)E=C(x,S,v,k[v],M),E!==null&&(t&&E.alternate!==null&&x.delete(E.key===null?v:E.key),T=i(E,T,v),D===null?B=E:D.sibling=E,D=E);return t&&x.forEach(function(N){return e(S,N)}),Ve&&es(S,v),B}function j(S,T,k,M){var B=Ki(k);if(typeof B!="function")throw Error(U(150));if(k=B.call(k),k==null)throw Error(U(151));for(var D=B=null,x=T,v=T=0,E=null,I=k.next();x!==null&&!I.done;v++,I=k.next()){x.index>v?(E=x,x=null):E=x.sibling;var N=_(S,x,I.value,M);if(N===null){x===null&&(x=E);break}t&&x&&N.alternate===null&&e(S,x),T=i(N,T,v),D===null?B=N:D.sibling=N,D=N,x=E}if(I.done)return n(S,x),Ve&&es(S,v),B;if(x===null){for(;!I.done;v++,I=k.next())I=g(S,I.value,M),I!==null&&(T=i(I,T,v),D===null?B=I:D.sibling=I,D=I);return Ve&&es(S,v),B}for(x=r(S,x);!I.done;v++,I=k.next())I=C(x,S,v,I.value,M),I!==null&&(t&&I.alternate!==null&&x.delete(I.key===null?v:I.key),T=i(I,T,v),D===null?B=I:D.sibling=I,D=I);return t&&x.forEach(function(A){return e(S,A)}),Ve&&es(S,v),B}function z(S,T,k,M){if(typeof k=="object"&&k!==null&&k.type===$s&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case Da:e:{for(var B=k.key,D=T;D!==null;){if(D.key===B){if(B=k.type,B===$s){if(D.tag===7){n(S,D.sibling),T=s(D,k.props.children),T.return=S,S=T;break e}}else if(D.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===dr&&bp(B)===D.type){n(S,D.sibling),T=s(D,k.props),T.ref=Zi(S,D,k),T.return=S,S=T;break e}n(S,D);break}else e(S,D);D=D.sibling}k.type===$s?(T=us(k.props.children,S.mode,M,k.key),T.return=S,S=T):(M=fl(k.type,k.key,k.props,null,S.mode,M),M.ref=Zi(S,T,k),M.return=S,S=M)}return a(S);case Bs:e:{for(D=k.key;T!==null;){if(T.key===D)if(T.tag===4&&T.stateNode.containerInfo===k.containerInfo&&T.stateNode.implementation===k.implementation){n(S,T.sibling),T=s(T,k.children||[]),T.return=S,S=T;break e}else{n(S,T);break}else e(S,T);T=T.sibling}T=Ic(k,S.mode,M),T.return=S,S=T}return a(S);case dr:return D=k._init,z(S,T,D(k._payload),M)}if(io(k))return P(S,T,k,M);if(Ki(k))return j(S,T,k,M);Wa(S,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,T!==null&&T.tag===6?(n(S,T.sibling),T=s(T,k),T.return=S,S=T):(n(S,T),T=Tc(k,S.mode,M),T.return=S,S=T),a(S)):n(S,T)}return z}var fi=ky(!0),Ay=ky(!1),Dl=zr(null),Ml=null,Ys=null,wd=null;function Ed(){wd=Ys=Ml=null}function Td(t){var e=Dl.current;be(Dl),t._currentValue=e}function hh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function si(t,e){Ml=t,wd=Ys=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Pt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(wd!==t)if(t={context:t,memoizedValue:e,next:null},Ys===null){if(Ml===null)throw Error(U(308));Ys=t,Ml.dependencies={lanes:0,firstContext:t}}else Ys=Ys.next=t;return e}var is=null;function Id(t){is===null?is=[t]:is.push(t)}function by(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Id(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qn(t,r)}function Qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var fr=!1;function Sd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Py(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,me&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qn(t,n)}return s=r.interleaved,s===null?(e.next=e,Id(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qn(t,n)}function al(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cd(t,n)}}function Pp(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=a:i=i.next=a,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ol(t,e,n,r){var s=t.updateQueue;fr=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,a===null?i=d:a.next=d,a=c;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==a&&(l===null?p.firstBaseUpdate=d:l.next=d,p.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;a=0,p=d=c=null,l=i;do{var _=l.lane,C=l.eventTime;if((r&_)===_){p!==null&&(p=p.next={eventTime:C,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var P=t,j=l;switch(_=e,C=n,j.tag){case 1:if(P=j.payload,typeof P=="function"){g=P.call(C,g,_);break e}g=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=j.payload,_=typeof P=="function"?P.call(C,g,_):P,_==null)break e;g=Oe({},g,_);break e;case 2:fr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,_=s.effects,_===null?s.effects=[l]:_.push(l))}else C={eventTime:C,lane:_,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(d=p=C,c=g):p=p.next=C,a|=_;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;_=l,l=_.next,_.next=null,s.lastBaseUpdate=_,s.shared.pending=null}}while(!0);if(p===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);gs|=a,t.lanes=a,t.memoizedState=g}}function Rp(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var oa={},kn=zr(oa),Uo=zr(oa),Bo=zr(oa);function os(t){if(t===oa)throw Error(U(174));return t}function Nd(t,e){switch(Se(Bo,e),Se(Uo,t),Se(kn,oa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Hc(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Hc(e,t)}be(kn),Se(kn,e)}function pi(){be(kn),be(Uo),be(Bo)}function Ry(t){os(Bo.current);var e=os(kn.current),n=Hc(e,t.type);e!==n&&(Se(Uo,t),Se(kn,n))}function Cd(t){Uo.current===t&&(be(kn),be(Uo))}var De=zr(0);function Ll(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yc=[];function kd(){for(var t=0;t<yc.length;t++)yc[t]._workInProgressVersionPrimary=null;yc.length=0}var ll=Jn.ReactCurrentDispatcher,vc=Jn.ReactCurrentBatchConfig,ms=0,Me=null,Ye=null,it=null,Fl=!1,_o=!1,$o=0,I1=0;function gt(){throw Error(U(321))}function Ad(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function bd(t,e,n,r,s,i){if(ms=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ll.current=t===null||t.memoizedState===null?k1:A1,t=n(r,s),_o){i=0;do{if(_o=!1,$o=0,25<=i)throw Error(U(301));i+=1,it=Ye=null,e.updateQueue=null,ll.current=b1,t=n(r,s)}while(_o)}if(ll.current=zl,e=Ye!==null&&Ye.next!==null,ms=0,it=Ye=Me=null,Fl=!1,e)throw Error(U(300));return t}function Pd(){var t=$o!==0;return $o=0,t}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return it===null?Me.memoizedState=it=t:it=it.next=t,it}function rn(){if(Ye===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Ye.next;var e=it===null?Me.memoizedState:it.next;if(e!==null)it=e,Ye=t;else{if(t===null)throw Error(U(310));Ye=t,t={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},it===null?Me.memoizedState=it=t:it=it.next=t}return it}function qo(t,e){return typeof e=="function"?e(t):e}function _c(t){var e=rn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Ye,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=a=null,c=null,d=i;do{var p=d.lane;if((ms&p)===p)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:p,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=g,a=r):c=c.next=g,Me.lanes|=p,gs|=p}d=d.next}while(d!==null&&d!==i);c===null?a=r:c.next=l,gn(r,e.memoizedState)||(Pt=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Me.lanes|=i,gs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function xc(t){var e=rn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);gn(i,e.memoizedState)||(Pt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jy(){}function Vy(t,e){var n=Me,r=rn(),s=e(),i=!gn(r.memoizedState,s);if(i&&(r.memoizedState=s,Pt=!0),r=r.queue,Rd(Oy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||it!==null&&it.memoizedState.tag&1){if(n.flags|=2048,Ho(9,My.bind(null,n,r,s,e),void 0,null),ot===null)throw Error(U(349));ms&30||Dy(n,e,s)}return s}function Dy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function My(t,e,n,r){e.value=n,e.getSnapshot=r,Ly(e)&&Fy(t)}function Oy(t,e,n){return n(function(){Ly(e)&&Fy(t)})}function Ly(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function Fy(t){var e=Qn(t,1);e!==null&&pn(e,t,1,-1)}function jp(t){var e=Tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qo,lastRenderedState:t},e.queue=t,t=t.dispatch=C1.bind(null,Me,t),[e.memoizedState,t]}function Ho(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zy(){return rn().memoizedState}function ul(t,e,n,r){var s=Tn();Me.flags|=t,s.memoizedState=Ho(1|e,n,void 0,r===void 0?null:r)}function yu(t,e,n,r){var s=rn();r=r===void 0?null:r;var i=void 0;if(Ye!==null){var a=Ye.memoizedState;if(i=a.destroy,r!==null&&Ad(r,a.deps)){s.memoizedState=Ho(e,n,i,r);return}}Me.flags|=t,s.memoizedState=Ho(1|e,n,i,r)}function Vp(t,e){return ul(8390656,8,t,e)}function Rd(t,e){return yu(2048,8,t,e)}function Uy(t,e){return yu(4,2,t,e)}function By(t,e){return yu(4,4,t,e)}function $y(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qy(t,e,n){return n=n!=null?n.concat([t]):null,yu(4,4,$y.bind(null,e,t),n)}function jd(){}function Hy(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ad(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wy(t,e){var n=rn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ad(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qy(t,e,n){return ms&21?(gn(n,e)||(n=Jg(),Me.lanes|=n,gs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Pt=!0),t.memoizedState=n)}function S1(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=vc.transition;vc.transition={};try{t(!1),e()}finally{ve=n,vc.transition=r}}function Ky(){return rn().memoizedState}function N1(t,e,n){var r=Sr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gy(t))Xy(e,n);else if(n=by(t,e,n,r),n!==null){var s=Nt();pn(n,t,r,s),Yy(n,e,r)}}function C1(t,e,n){var r=Sr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gy(t))Xy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,n);if(s.hasEagerState=!0,s.eagerState=l,gn(l,a)){var c=e.interleaved;c===null?(s.next=s,Id(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=by(t,e,s,r),n!==null&&(s=Nt(),pn(n,t,r,s),Yy(n,e,r))}}function Gy(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Xy(t,e){_o=Fl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Yy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cd(t,n)}}var zl={readContext:nn,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},k1={readContext:nn,useCallback:function(t,e){return Tn().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:Vp,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ul(4194308,4,$y.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ul(4194308,4,t,e)},useInsertionEffect:function(t,e){return ul(4,2,t,e)},useMemo:function(t,e){var n=Tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=N1.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=Tn();return t={current:t},e.memoizedState=t},useState:jp,useDebugValue:jd,useDeferredValue:function(t){return Tn().memoizedState=t},useTransition:function(){var t=jp(!1),e=t[0];return t=S1.bind(null,t[1]),Tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,s=Tn();if(Ve){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),ot===null)throw Error(U(349));ms&30||Dy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vp(Oy.bind(null,r,i,t),[t]),r.flags|=2048,Ho(9,My.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Tn(),e=ot.identifierPrefix;if(Ve){var n=$n,r=Bn;n=(r&~(1<<32-fn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=$o++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=I1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},A1={readContext:nn,useCallback:Hy,useContext:nn,useEffect:Rd,useImperativeHandle:qy,useInsertionEffect:Uy,useLayoutEffect:By,useMemo:Wy,useReducer:_c,useRef:zy,useState:function(){return _c(qo)},useDebugValue:jd,useDeferredValue:function(t){var e=rn();return Qy(e,Ye.memoizedState,t)},useTransition:function(){var t=_c(qo)[0],e=rn().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Vy,useId:Ky,unstable_isNewReconciler:!1},b1={readContext:nn,useCallback:Hy,useContext:nn,useEffect:Rd,useImperativeHandle:qy,useInsertionEffect:Uy,useLayoutEffect:By,useMemo:Wy,useReducer:xc,useRef:zy,useState:function(){return xc(qo)},useDebugValue:jd,useDeferredValue:function(t){var e=rn();return Ye===null?e.memoizedState=t:Qy(e,Ye.memoizedState,t)},useTransition:function(){var t=xc(qo)[0],e=rn().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Vy,useId:Ky,unstable_isNewReconciler:!1};function un(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function dh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var vu={isMounted:function(t){return(t=t._reactInternals)?Es(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=Sr(t),i=qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Tr(t,i,s),e!==null&&(pn(e,t,s,r),al(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=Sr(t),i=qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Tr(t,i,s),e!==null&&(pn(e,t,s,r),al(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=Sr(t),s=qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Tr(t,s,r),e!==null&&(pn(e,t,r,n),al(e,t,r))}};function Dp(t,e,n,r,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,a):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,i):!0}function Jy(t,e,n){var r=!1,s=Rr,i=e.contextType;return typeof i=="object"&&i!==null?i=nn(i):(s=jt(e)?fs:Et.current,r=e.contextTypes,i=(r=r!=null)?hi(t,s):Rr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=vu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Mp(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vu.enqueueReplaceState(e,e.state,null)}function fh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Sd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=nn(i):(i=jt(e)?fs:Et.current,s.context=hi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(dh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&vu.enqueueReplaceState(s,s.state,null),Ol(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function mi(t,e){try{var n="",r=e;do n+=sx(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function wc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ph(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var P1=typeof WeakMap=="function"?WeakMap:Map;function Zy(t,e,n){n=qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Bl||(Bl=!0,Ih=r),ph(t,e)},n}function e0(t,e,n){n=qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ph(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ph(t,e),typeof r!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Op(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new P1;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=H1.bind(null,t,e,n),e.then(t,t))}function Lp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fp(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=qn(-1,1),e.tag=2,Tr(n,e,1))),n.lanes|=1),t)}var R1=Jn.ReactCurrentOwner,Pt=!1;function St(t,e,n,r){e.child=t===null?Ay(e,null,n,r):fi(e,t.child,n,r)}function zp(t,e,n,r,s){n=n.render;var i=e.ref;return si(e,s),r=bd(t,e,n,r,i,s),n=Pd(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Ve&&n&&vd(e),e.flags|=1,St(t,e,r,s),e.child)}function Up(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Ud(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,t0(t,e,i,r,s)):(t=fl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(a,r)&&t.ref===e.ref)return Kn(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function t0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oo(i,r)&&t.ref===e.ref)if(Pt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Pt=!0);else return e.lanes=t.lanes,Kn(t,e,s)}return mh(t,e,n,r,s)}function n0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(Zs,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Se(Zs,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Se(Zs,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Se(Zs,Ft),Ft|=r;return St(t,e,s,n),e.child}function r0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function mh(t,e,n,r,s){var i=jt(n)?fs:Et.current;return i=hi(e,i),si(e,s),n=bd(t,e,n,r,i,s),r=Pd(),t!==null&&!Pt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Kn(t,e,s)):(Ve&&r&&vd(e),e.flags|=1,St(t,e,n,s),e.child)}function Bp(t,e,n,r,s){if(jt(n)){var i=!0;Rl(e)}else i=!1;if(si(e,s),e.stateNode===null)cl(t,e),Jy(e,n,r),fh(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,d=n.contextType;typeof d=="object"&&d!==null?d=nn(d):(d=jt(n)?fs:Et.current,d=hi(e,d));var p=n.getDerivedStateFromProps,g=typeof p=="function"||typeof a.getSnapshotBeforeUpdate=="function";g||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Mp(e,a,r,d),fr=!1;var _=e.memoizedState;a.state=_,Ol(e,r,a,s),c=e.memoizedState,l!==r||_!==c||Rt.current||fr?(typeof p=="function"&&(dh(e,n,p,r),c=e.memoizedState),(l=fr||Dp(e,n,l,r,_,c,d))?(g||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=d,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,Py(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:un(e.type,l),a.props=d,g=e.pendingProps,_=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=nn(c):(c=jt(n)?fs:Et.current,c=hi(e,c));var C=n.getDerivedStateFromProps;(p=typeof C=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==g||_!==c)&&Mp(e,a,r,c),fr=!1,_=e.memoizedState,a.state=_,Ol(e,r,a,s);var P=e.memoizedState;l!==g||_!==P||Rt.current||fr?(typeof C=="function"&&(dh(e,n,C,r),P=e.memoizedState),(d=fr||Dp(e,n,d,r,_,P,c)||!1)?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,P,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,P,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),a.props=r,a.state=P,a.context=c,r=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&_===t.memoizedState||(e.flags|=1024),r=!1)}return gh(t,e,n,r,i,s)}function gh(t,e,n,r,s,i){r0(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&Cp(e,n,!1),Kn(t,e,i);r=e.stateNode,R1.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=fi(e,t.child,null,i),e.child=fi(e,null,l,i)):St(t,e,l,i),e.memoizedState=r.state,s&&Cp(e,n,!0),e.child}function s0(t){var e=t.stateNode;e.pendingContext?Np(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Np(t,e.context,!1),Nd(t,e.containerInfo)}function $p(t,e,n,r,s){return di(),xd(s),e.flags|=256,St(t,e,n,r),e.child}var yh={dehydrated:null,treeContext:null,retryLane:0};function vh(t){return{baseLanes:t,cachePool:null,transitions:null}}function i0(t,e,n){var r=e.pendingProps,s=De.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Se(De,s&1),t===null)return ch(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,i?(r=e.mode,i=e.child,a={mode:"hidden",children:a},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=wu(a,r,0,null),t=us(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=vh(n),e.memoizedState=yh,t):Vd(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return j1(t,e,a,r,l,s,n);if(i){i=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Nr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Nr(l,i):(i=us(i,a,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,a=t.child.memoizedState,a=a===null?vh(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~n,e.memoizedState=yh,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vd(t,e){return e=wu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qa(t,e,n,r){return r!==null&&xd(r),fi(e,t.child,null,n),t=Vd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function j1(t,e,n,r,s,i,a){if(n)return e.flags&256?(e.flags&=-257,r=wc(Error(U(422))),Qa(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=wu({mode:"visible",children:r.children},s,0,null),i=us(i,s,a,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&fi(e,t.child,null,a),e.child.memoizedState=vh(a),e.memoizedState=yh,i);if(!(e.mode&1))return Qa(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=wc(i,r,void 0),Qa(t,e,a,r)}if(l=(a&t.childLanes)!==0,Pt||l){if(r=ot,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Qn(t,s),pn(r,t,s,-1))}return zd(),r=wc(Error(U(421))),Qa(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=W1.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,zt=Er(s.nextSibling),Ut=e,Ve=!0,hn=null,t!==null&&(Xt[Yt++]=Bn,Xt[Yt++]=$n,Xt[Yt++]=ps,Bn=t.id,$n=t.overflow,ps=e),e=Vd(e,r.children),e.flags|=4096,e)}function qp(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),hh(t.return,e,n)}function Ec(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function o0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(St(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qp(t,n,e);else if(t.tag===19)qp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Se(De,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ll(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Ec(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ll(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Ec(e,!0,n,null,i);break;case"together":Ec(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),gs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function V1(t,e,n){switch(e.tag){case 3:s0(e),di();break;case 5:Ry(e);break;case 1:jt(e.type)&&Rl(e);break;case 4:Nd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Se(Dl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Se(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?i0(t,e,n):(Se(De,De.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);Se(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return o0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Se(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,n0(t,e,n)}return Kn(t,e,n)}var a0,_h,l0,u0;a0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_h=function(){};l0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,os(kn.current);var i=null;switch(n){case"input":s=Uc(t,s),r=Uc(t,r),i=[];break;case"select":s=Oe({},s,{value:void 0}),r=Oe({},r,{value:void 0}),i=[];break;case"textarea":s=qc(t,s),r=qc(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bl)}Wc(n,r);var a;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(bo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(bo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ce("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};u0=function(t,e,n,r){n!==r&&(e.flags|=4)};function eo(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function yt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function D1(t,e,n){var r=e.pendingProps;switch(_d(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yt(e),null;case 1:return jt(e.type)&&Pl(),yt(e),null;case 3:return r=e.stateNode,pi(),be(Rt),be(Et),kd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hn!==null&&(Ch(hn),hn=null))),_h(t,e),yt(e),null;case 5:Cd(e);var s=os(Bo.current);if(n=e.type,t!==null&&e.stateNode!=null)l0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return yt(e),null}if(t=os(kn.current),Ha(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Nn]=e,r[zo]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<ao.length;s++)Ce(ao[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Zf(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":tp(r,i),Ce("invalid",r)}Wc(n,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&qa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&qa(r.textContent,l,t),s=["children",""+l]):bo.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Ma(r),ep(r,i,!0);break;case"textarea":Ma(r),np(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Og(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Nn]=e,t[zo]=r,a0(t,e,!1,!1),e.stateNode=t;e:{switch(a=Qc(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<ao.length;s++)Ce(ao[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":Zf(t,r),s=Uc(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Oe({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":tp(t,r),s=qc(t,r),Ce("invalid",t);break;default:s=r}Wc(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zg(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lg(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Po(t,c):typeof c=="number"&&Po(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(bo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ce("scroll",t):c!=null&&sd(t,i,c,a))}switch(n){case"input":Ma(t),ep(t,r,!1);break;case"textarea":Ma(t),np(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Pr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ei(t,!!r.multiple,i,!1):r.defaultValue!=null&&ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yt(e),null;case 6:if(t&&e.stateNode!=null)u0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=os(Bo.current),os(kn.current),Ha(e)){if(r=e.stateNode,n=e.memoizedProps,r[Nn]=e,(i=r.nodeValue!==n)&&(t=Ut,t!==null))switch(t.tag){case 3:qa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Nn]=e,e.stateNode=r}return yt(e),null;case 13:if(be(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&zt!==null&&e.mode&1&&!(e.flags&128))Cy(),di(),e.flags|=98560,i=!1;else if(i=Ha(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Nn]=e}else di(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yt(e),i=!1}else hn!==null&&(Ch(hn),hn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ze===0&&(Ze=3):zd())),e.updateQueue!==null&&(e.flags|=4),yt(e),null);case 4:return pi(),_h(t,e),t===null&&Lo(e.stateNode.containerInfo),yt(e),null;case 10:return Td(e.type._context),yt(e),null;case 17:return jt(e.type)&&Pl(),yt(e),null;case 19:if(be(De),i=e.memoizedState,i===null)return yt(e),null;if(r=(e.flags&128)!==0,a=i.rendering,a===null)if(r)eo(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Ll(t),a!==null){for(e.flags|=128,eo(i,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Se(De,De.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>gi&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ll(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Ve)return yt(e),null}else 2*Be()-i.renderingStartTime>gi&&n!==1073741824&&(e.flags|=128,r=!0,eo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(n=i.last,n!==null?n.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=De.current,Se(De,r?n&1|2:n&1),e):(yt(e),null);case 22:case 23:return Fd(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(yt(e),e.subtreeFlags&6&&(e.flags|=8192)):yt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function M1(t,e){switch(_d(e),e.tag){case 1:return jt(e.type)&&Pl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pi(),be(Rt),be(Et),kd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Cd(e),null;case 13:if(be(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));di()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(De),null;case 4:return pi(),null;case 10:return Td(e.type._context),null;case 22:case 23:return Fd(),null;case 24:return null;default:return null}}var Ka=!1,xt=!1,O1=typeof WeakSet=="function"?WeakSet:Set,W=null;function Js(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function xh(t,e,n){try{n()}catch(r){ze(t,e,r)}}var Hp=!1;function L1(t,e){if(rh=Cl,t=py(),yd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,d=0,p=0,g=t,_=null;t:for(;;){for(var C;g!==n||s!==0&&g.nodeType!==3||(l=a+s),g!==i||r!==0&&g.nodeType!==3||(c=a+r),g.nodeType===3&&(a+=g.nodeValue.length),(C=g.firstChild)!==null;)_=g,g=C;for(;;){if(g===t)break t;if(_===n&&++d===s&&(l=a),_===i&&++p===r&&(c=a),(C=g.nextSibling)!==null)break;g=_,_=g.parentNode}g=C}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sh={focusedElem:t,selectionRange:n},Cl=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var j=P.memoizedProps,z=P.memoizedState,S=e.stateNode,T=S.getSnapshotBeforeUpdate(e.elementType===e.type?j:un(e.type,j),z);S.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(M){ze(e,e.return,M)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return P=Hp,Hp=!1,P}function xo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&xh(e,n,i)}s=s.next}while(s!==r)}}function _u(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function c0(t){var e=t.alternate;e!==null&&(t.alternate=null,c0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Nn],delete e[zo],delete e[ah],delete e[x1],delete e[w1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h0(t){return t.tag===5||t.tag===3||t.tag===4}function Wp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Eh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bl));else if(r!==4&&(t=t.child,t!==null))for(Eh(t,e,n),t=t.sibling;t!==null;)Eh(t,e,n),t=t.sibling}function Th(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Th(t,e,n),t=t.sibling;t!==null;)Th(t,e,n),t=t.sibling}var lt=null,cn=!1;function hr(t,e,n){for(n=n.child;n!==null;)d0(t,e,n),n=n.sibling}function d0(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(hu,n)}catch{}switch(n.tag){case 5:xt||Js(n,e);case 6:var r=lt,s=cn;lt=null,hr(t,e,n),lt=r,cn=s,lt!==null&&(cn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(cn?(t=lt,n=n.stateNode,t.nodeType===8?mc(t.parentNode,n):t.nodeType===1&&mc(t,n),Do(t)):mc(lt,n.stateNode));break;case 4:r=lt,s=cn,lt=n.stateNode.containerInfo,cn=!0,hr(t,e,n),lt=r,cn=s;break;case 0:case 11:case 14:case 15:if(!xt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&xh(n,e,a),s=s.next}while(s!==r)}hr(t,e,n);break;case 1:if(!xt&&(Js(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ze(n,e,l)}hr(t,e,n);break;case 21:hr(t,e,n);break;case 22:n.mode&1?(xt=(r=xt)||n.memoizedState!==null,hr(t,e,n),xt=r):hr(t,e,n);break;default:hr(t,e,n)}}function Qp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new O1),e.forEach(function(r){var s=Q1.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:lt=l.stateNode,cn=!1;break e;case 3:lt=l.stateNode.containerInfo,cn=!0;break e;case 4:lt=l.stateNode.containerInfo,cn=!0;break e}l=l.return}if(lt===null)throw Error(U(160));d0(i,a,s),lt=null,cn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ze(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)f0(e,t),e=e.sibling}function f0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),En(t),r&4){try{xo(3,t,t.return),_u(3,t)}catch(j){ze(t,t.return,j)}try{xo(5,t,t.return)}catch(j){ze(t,t.return,j)}}break;case 1:ln(e,t),En(t),r&512&&n!==null&&Js(n,n.return);break;case 5:if(ln(e,t),En(t),r&512&&n!==null&&Js(n,n.return),t.flags&32){var s=t.stateNode;try{Po(s,"")}catch(j){ze(t,t.return,j)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Dg(s,i),Qc(l,a);var d=Qc(l,i);for(a=0;a<c.length;a+=2){var p=c[a],g=c[a+1];p==="style"?zg(s,g):p==="dangerouslySetInnerHTML"?Lg(s,g):p==="children"?Po(s,g):sd(s,p,g,d)}switch(l){case"input":Bc(s,i);break;case"textarea":Mg(s,i);break;case"select":var _=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var C=i.value;C!=null?ei(s,!!i.multiple,C,!1):_!==!!i.multiple&&(i.defaultValue!=null?ei(s,!!i.multiple,i.defaultValue,!0):ei(s,!!i.multiple,i.multiple?[]:"",!1))}s[zo]=i}catch(j){ze(t,t.return,j)}}break;case 6:if(ln(e,t),En(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(j){ze(t,t.return,j)}}break;case 3:if(ln(e,t),En(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Do(e.containerInfo)}catch(j){ze(t,t.return,j)}break;case 4:ln(e,t),En(t);break;case 13:ln(e,t),En(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Od=Be())),r&4&&Qp(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(xt=(d=xt)||p,ln(e,t),xt=d):ln(e,t),En(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!p&&t.mode&1)for(W=t,p=t.child;p!==null;){for(g=W=p;W!==null;){switch(_=W,C=_.child,_.tag){case 0:case 11:case 14:case 15:xo(4,_,_.return);break;case 1:Js(_,_.return);var P=_.stateNode;if(typeof P.componentWillUnmount=="function"){r=_,n=_.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(j){ze(r,n,j)}}break;case 5:Js(_,_.return);break;case 22:if(_.memoizedState!==null){Gp(g);continue}}C!==null?(C.return=_,W=C):Gp(g)}p=p.sibling}e:for(p=null,g=t;;){if(g.tag===5){if(p===null){p=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Fg("display",a))}catch(j){ze(t,t.return,j)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(j){ze(t,t.return,j)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ln(e,t),En(t),r&4&&Qp(t);break;case 21:break;default:ln(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(h0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Po(s,""),r.flags&=-33);var i=Wp(t);Th(t,i,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=Wp(t);Eh(t,l,a);break;default:throw Error(U(161))}}catch(c){ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function F1(t,e,n){W=t,p0(t)}function p0(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Ka;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||xt;l=Ka;var d=xt;if(Ka=a,(xt=c)&&!d)for(W=s;W!==null;)a=W,c=a.child,a.tag===22&&a.memoizedState!==null?Xp(s):c!==null?(c.return=a,W=c):Xp(s);for(;i!==null;)W=i,p0(i),i=i.sibling;W=s,Ka=l,xt=d}Kp(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Kp(t)}}function Kp(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xt||_u(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:un(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Rp(e,i,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Rp(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var p=d.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Do(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}xt||e.flags&512&&wh(e)}catch(_){ze(e,e.return,_)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Gp(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Xp(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{_u(4,e)}catch(c){ze(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ze(e,s,c)}}var i=e.return;try{wh(e)}catch(c){ze(e,i,c)}break;case 5:var a=e.return;try{wh(e)}catch(c){ze(e,a,c)}}}catch(c){ze(e,e.return,c)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var z1=Math.ceil,Ul=Jn.ReactCurrentDispatcher,Dd=Jn.ReactCurrentOwner,tn=Jn.ReactCurrentBatchConfig,me=0,ot=null,Qe=null,ht=0,Ft=0,Zs=zr(0),Ze=0,Wo=null,gs=0,xu=0,Md=0,wo=null,bt=null,Od=0,gi=1/0,Ln=null,Bl=!1,Ih=null,Ir=null,Ga=!1,yr=null,$l=0,Eo=0,Sh=null,hl=-1,dl=0;function Nt(){return me&6?Be():hl!==-1?hl:hl=Be()}function Sr(t){return t.mode&1?me&2&&ht!==0?ht&-ht:T1.transition!==null?(dl===0&&(dl=Jg()),dl):(t=ve,t!==0||(t=window.event,t=t===void 0?16:iy(t.type)),t):1}function pn(t,e,n,r){if(50<Eo)throw Eo=0,Sh=null,Error(U(185));ra(t,n,r),(!(me&2)||t!==ot)&&(t===ot&&(!(me&2)&&(xu|=n),Ze===4&&mr(t,ht)),Vt(t,r),n===1&&me===0&&!(e.mode&1)&&(gi=Be()+500,gu&&Ur()))}function Vt(t,e){var n=t.callbackNode;Tx(t,e);var r=Nl(t,t===ot?ht:0);if(r===0)n!==null&&ip(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ip(n),e===1)t.tag===0?E1(Yp.bind(null,t)):Iy(Yp.bind(null,t)),v1(function(){!(me&6)&&Ur()}),n=null;else{switch(Zg(r)){case 1:n=ud;break;case 4:n=Xg;break;case 16:n=Sl;break;case 536870912:n=Yg;break;default:n=Sl}n=E0(n,m0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function m0(t,e){if(hl=-1,dl=0,me&6)throw Error(U(327));var n=t.callbackNode;if(ii()&&t.callbackNode!==n)return null;var r=Nl(t,t===ot?ht:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ql(t,r);else{e=r;var s=me;me|=2;var i=y0();(ot!==t||ht!==e)&&(Ln=null,gi=Be()+500,ls(t,e));do try{$1();break}catch(l){g0(t,l)}while(!0);Ed(),Ul.current=i,me=s,Qe!==null?e=0:(ot=null,ht=0,e=Ze)}if(e!==0){if(e===2&&(s=Jc(t),s!==0&&(r=s,e=Nh(t,s))),e===1)throw n=Wo,ls(t,0),mr(t,r),Vt(t,Be()),n;if(e===6)mr(t,r);else{if(s=t.current.alternate,!(r&30)&&!U1(s)&&(e=ql(t,r),e===2&&(i=Jc(t),i!==0&&(r=i,e=Nh(t,i))),e===1))throw n=Wo,ls(t,0),mr(t,r),Vt(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:ts(t,bt,Ln);break;case 3:if(mr(t,r),(r&130023424)===r&&(e=Od+500-Be(),10<e)){if(Nl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=oh(ts.bind(null,t,bt,Ln),e);break}ts(t,bt,Ln);break;case 4:if(mr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-fn(r);i=1<<a,a=e[a],a>s&&(s=a),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*z1(r/1960))-r,10<r){t.timeoutHandle=oh(ts.bind(null,t,bt,Ln),r);break}ts(t,bt,Ln);break;case 5:ts(t,bt,Ln);break;default:throw Error(U(329))}}}return Vt(t,Be()),t.callbackNode===n?m0.bind(null,t):null}function Nh(t,e){var n=wo;return t.current.memoizedState.isDehydrated&&(ls(t,e).flags|=256),t=ql(t,e),t!==2&&(e=bt,bt=n,e!==null&&Ch(e)),t}function Ch(t){bt===null?bt=t:bt.push.apply(bt,t)}function U1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!gn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function mr(t,e){for(e&=~Md,e&=~xu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fn(e),r=1<<n;t[n]=-1,e&=~r}}function Yp(t){if(me&6)throw Error(U(327));ii();var e=Nl(t,0);if(!(e&1))return Vt(t,Be()),null;var n=ql(t,e);if(t.tag!==0&&n===2){var r=Jc(t);r!==0&&(e=r,n=Nh(t,r))}if(n===1)throw n=Wo,ls(t,0),mr(t,e),Vt(t,Be()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ts(t,bt,Ln),Vt(t,Be()),null}function Ld(t,e){var n=me;me|=1;try{return t(e)}finally{me=n,me===0&&(gi=Be()+500,gu&&Ur())}}function ys(t){yr!==null&&yr.tag===0&&!(me&6)&&ii();var e=me;me|=1;var n=tn.transition,r=ve;try{if(tn.transition=null,ve=1,t)return t()}finally{ve=r,tn.transition=n,me=e,!(me&6)&&Ur()}}function Fd(){Ft=Zs.current,be(Zs)}function ls(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,y1(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(_d(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Pl();break;case 3:pi(),be(Rt),be(Et),kd();break;case 5:Cd(r);break;case 4:pi();break;case 13:be(De);break;case 19:be(De);break;case 10:Td(r.type._context);break;case 22:case 23:Fd()}n=n.return}if(ot=t,Qe=t=Nr(t.current,null),ht=Ft=e,Ze=0,Wo=null,Md=xu=gs=0,bt=wo=null,is!==null){for(e=0;e<is.length;e++)if(n=is[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var a=i.next;i.next=s,r.next=a}n.pending=r}is=null}return t}function g0(t,e){do{var n=Qe;try{if(Ed(),ll.current=zl,Fl){for(var r=Me.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fl=!1}if(ms=0,it=Ye=Me=null,_o=!1,$o=0,Dd.current=null,n===null||n.return===null){Ze=1,Wo=e,Qe=null;break}e:{var i=t,a=n.return,l=n,c=e;if(e=ht,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,p=l,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var _=p.alternate;_?(p.updateQueue=_.updateQueue,p.memoizedState=_.memoizedState,p.lanes=_.lanes):(p.updateQueue=null,p.memoizedState=null)}var C=Lp(a);if(C!==null){C.flags&=-257,Fp(C,a,l,i,e),C.mode&1&&Op(i,d,e),e=C,c=d;var P=e.updateQueue;if(P===null){var j=new Set;j.add(c),e.updateQueue=j}else P.add(c);break e}else{if(!(e&1)){Op(i,d,e),zd();break e}c=Error(U(426))}}else if(Ve&&l.mode&1){var z=Lp(a);if(z!==null){!(z.flags&65536)&&(z.flags|=256),Fp(z,a,l,i,e),xd(mi(c,l));break e}}i=c=mi(c,l),Ze!==4&&(Ze=2),wo===null?wo=[i]:wo.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=Zy(i,c,e);Pp(i,S);break e;case 1:l=c;var T=i.type,k=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Ir===null||!Ir.has(k)))){i.flags|=65536,e&=-e,i.lanes|=e;var M=e0(i,l,e);Pp(i,M);break e}}i=i.return}while(i!==null)}_0(n)}catch(B){e=B,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function y0(){var t=Ul.current;return Ul.current=zl,t===null?zl:t}function zd(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),ot===null||!(gs&268435455)&&!(xu&268435455)||mr(ot,ht)}function ql(t,e){var n=me;me|=2;var r=y0();(ot!==t||ht!==e)&&(Ln=null,ls(t,e));do try{B1();break}catch(s){g0(t,s)}while(!0);if(Ed(),me=n,Ul.current=r,Qe!==null)throw Error(U(261));return ot=null,ht=0,Ze}function B1(){for(;Qe!==null;)v0(Qe)}function $1(){for(;Qe!==null&&!px();)v0(Qe)}function v0(t){var e=w0(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?_0(t):Qe=e,Dd.current=null}function _0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=M1(n,e),n!==null){n.flags&=32767,Qe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Qe=null;return}}else if(n=D1(n,e,Ft),n!==null){Qe=n;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);Ze===0&&(Ze=5)}function ts(t,e,n){var r=ve,s=tn.transition;try{tn.transition=null,ve=1,q1(t,e,n,r)}finally{tn.transition=s,ve=r}return null}function q1(t,e,n,r){do ii();while(yr!==null);if(me&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Ix(t,i),t===ot&&(Qe=ot=null,ht=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ga||(Ga=!0,E0(Sl,function(){return ii(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=tn.transition,tn.transition=null;var a=ve;ve=1;var l=me;me|=4,Dd.current=null,L1(t,n),f0(n,t),c1(sh),Cl=!!rh,sh=rh=null,t.current=n,F1(n),mx(),me=l,ve=a,tn.transition=i}else t.current=n;if(Ga&&(Ga=!1,yr=t,$l=s),i=t.pendingLanes,i===0&&(Ir=null),vx(n.stateNode),Vt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Bl)throw Bl=!1,t=Ih,Ih=null,t;return $l&1&&t.tag!==0&&ii(),i=t.pendingLanes,i&1?t===Sh?Eo++:(Eo=0,Sh=t):Eo=0,Ur(),null}function ii(){if(yr!==null){var t=Zg($l),e=tn.transition,n=ve;try{if(tn.transition=null,ve=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,$l=0,me&6)throw Error(U(331));var s=me;for(me|=4,W=t.current;W!==null;){var i=W,a=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(W=d;W!==null;){var p=W;switch(p.tag){case 0:case 11:case 15:xo(8,p,i)}var g=p.child;if(g!==null)g.return=p,W=g;else for(;W!==null;){p=W;var _=p.sibling,C=p.return;if(c0(p),p===d){W=null;break}if(_!==null){_.return=C,W=_;break}W=C}}}var P=i.alternate;if(P!==null){var j=P.child;if(j!==null){P.child=null;do{var z=j.sibling;j.sibling=null,j=z}while(j!==null)}}W=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,W=a;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:xo(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,W=S;break e}W=i.return}}var T=t.current;for(W=T;W!==null;){a=W;var k=a.child;if(a.subtreeFlags&2064&&k!==null)k.return=a,W=k;else e:for(a=T;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:_u(9,l)}}catch(B){ze(l,l.return,B)}if(l===a){W=null;break e}var M=l.sibling;if(M!==null){M.return=l.return,W=M;break e}W=l.return}}if(me=s,Ur(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(hu,t)}catch{}r=!0}return r}finally{ve=n,tn.transition=e}}return!1}function Jp(t,e,n){e=mi(n,e),e=Zy(t,e,1),t=Tr(t,e,1),e=Nt(),t!==null&&(ra(t,1,e),Vt(t,e))}function ze(t,e,n){if(t.tag===3)Jp(t,t,n);else for(;e!==null;){if(e.tag===3){Jp(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ir===null||!Ir.has(r))){t=mi(n,t),t=e0(e,t,1),e=Tr(e,t,1),t=Nt(),e!==null&&(ra(e,1,t),Vt(e,t));break}}e=e.return}}function H1(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,ot===t&&(ht&n)===n&&(Ze===4||Ze===3&&(ht&130023424)===ht&&500>Be()-Od?ls(t,0):Md|=n),Vt(t,e)}function x0(t,e){e===0&&(t.mode&1?(e=Fa,Fa<<=1,!(Fa&130023424)&&(Fa=4194304)):e=1);var n=Nt();t=Qn(t,e),t!==null&&(ra(t,e,n),Vt(t,n))}function W1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),x0(t,n)}function Q1(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),x0(t,n)}var w0;w0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Pt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Pt=!1,V1(t,e,n);Pt=!!(t.flags&131072)}else Pt=!1,Ve&&e.flags&1048576&&Sy(e,Vl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cl(t,e),t=e.pendingProps;var s=hi(e,Et.current);si(e,n),s=bd(null,e,r,t,s,n);var i=Pd();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,Rl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Sd(e),s.updater=vu,e.stateNode=s,s._reactInternals=e,fh(e,r,t,n),e=gh(null,e,r,!0,i,n)):(e.tag=0,Ve&&i&&vd(e),St(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(cl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=G1(r),t=un(r,t),s){case 0:e=mh(null,e,r,t,n);break e;case 1:e=Bp(null,e,r,t,n);break e;case 11:e=zp(null,e,r,t,n);break e;case 14:e=Up(null,e,r,un(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),mh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Bp(t,e,r,s,n);case 3:e:{if(s0(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Py(t,e),Ol(e,r,null,n);var a=e.memoizedState;if(r=a.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=mi(Error(U(423)),e),e=$p(t,e,r,n,s);break e}else if(r!==s){s=mi(Error(U(424)),e),e=$p(t,e,r,n,s);break e}else for(zt=Er(e.stateNode.containerInfo.firstChild),Ut=e,Ve=!0,hn=null,n=Ay(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(di(),r===s){e=Kn(t,e,n);break e}St(t,e,r,n)}e=e.child}return e;case 5:return Ry(e),t===null&&ch(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,ih(r,s)?a=null:i!==null&&ih(r,i)&&(e.flags|=32),r0(t,e),St(t,e,a,n),e.child;case 6:return t===null&&ch(e),null;case 13:return i0(t,e,n);case 4:return Nd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fi(e,null,r,n):St(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),zp(t,e,r,s,n);case 7:return St(t,e,e.pendingProps,n),e.child;case 8:return St(t,e,e.pendingProps.children,n),e.child;case 12:return St(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,Se(Dl,r._currentValue),r._currentValue=a,i!==null)if(gn(i.value,a)){if(i.children===s.children&&!Rt.current){e=Kn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=qn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var p=d.pending;p===null?c.next=c:(c.next=p.next,p.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),hh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(U(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),hh(a,n,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}St(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,si(e,n),s=nn(s),r=r(s),e.flags|=1,St(t,e,r,n),e.child;case 14:return r=e.type,s=un(r,e.pendingProps),s=un(r.type,s),Up(t,e,r,s,n);case 15:return t0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),cl(t,e),e.tag=1,jt(r)?(t=!0,Rl(e)):t=!1,si(e,n),Jy(e,r,s),fh(e,r,s,n),gh(null,e,r,!0,t,n);case 19:return o0(t,e,n);case 22:return n0(t,e,n)}throw Error(U(156,e.tag))};function E0(t,e){return Gg(t,e)}function K1(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function en(t,e,n,r){return new K1(t,e,n,r)}function Ud(t){return t=t.prototype,!(!t||!t.isReactComponent)}function G1(t){if(typeof t=="function")return Ud(t)?1:0;if(t!=null){if(t=t.$$typeof,t===od)return 11;if(t===ad)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=en(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function fl(t,e,n,r,s,i){var a=2;if(r=t,typeof t=="function")Ud(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case $s:return us(n.children,s,i,e);case id:a=8,s|=8;break;case Oc:return t=en(12,n,e,s|2),t.elementType=Oc,t.lanes=i,t;case Lc:return t=en(13,n,e,s),t.elementType=Lc,t.lanes=i,t;case Fc:return t=en(19,n,e,s),t.elementType=Fc,t.lanes=i,t;case Rg:return wu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bg:a=10;break e;case Pg:a=9;break e;case od:a=11;break e;case ad:a=14;break e;case dr:a=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=en(a,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function us(t,e,n,r){return t=en(7,t,r,e),t.lanes=n,t}function wu(t,e,n,r){return t=en(22,t,r,e),t.elementType=Rg,t.lanes=n,t.stateNode={isHidden:!1},t}function Tc(t,e,n){return t=en(6,t,null,e),t.lanes=n,t}function Ic(t,e,n){return e=en(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function X1(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sc(0),this.expirationTimes=sc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bd(t,e,n,r,s,i,a,l,c){return t=new X1(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=en(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sd(i),t}function Y1(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function T0(t){if(!t)return Rr;t=t._reactInternals;e:{if(Es(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(jt(n))return Ty(t,n,e)}return e}function I0(t,e,n,r,s,i,a,l,c){return t=Bd(n,r,!0,t,s,i,a,l,c),t.context=T0(null),n=t.current,r=Nt(),s=Sr(n),i=qn(r,s),i.callback=e??null,Tr(n,i,s),t.current.lanes=s,ra(t,s,r),Vt(t,r),t}function Eu(t,e,n,r){var s=e.current,i=Nt(),a=Sr(s);return n=T0(n),e.context===null?e.context=n:e.pendingContext=n,e=qn(i,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Tr(s,e,a),t!==null&&(pn(t,s,a,i),al(t,s,a)),a}function Hl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $d(t,e){Zp(t,e),(t=t.alternate)&&Zp(t,e)}function J1(){return null}var S0=typeof reportError=="function"?reportError:function(t){console.error(t)};function qd(t){this._internalRoot=t}Tu.prototype.render=qd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Eu(t,e,null,null)};Tu.prototype.unmount=qd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ys(function(){Eu(null,t,null,null)}),e[Wn]=null}};function Tu(t){this._internalRoot=t}Tu.prototype.unstable_scheduleHydration=function(t){if(t){var e=ny();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&sy(t)}};function Hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Iu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function em(){}function Z1(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Hl(a);i.call(d)}}var a=I0(e,r,t,0,null,!1,!1,"",em);return t._reactRootContainer=a,t[Wn]=a.current,Lo(t.nodeType===8?t.parentNode:t),ys(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Hl(c);l.call(d)}}var c=Bd(t,0,!1,null,null,!1,!1,"",em);return t._reactRootContainer=c,t[Wn]=c.current,Lo(t.nodeType===8?t.parentNode:t),ys(function(){Eu(e,c,n,r)}),c}function Su(t,e,n,r,s){var i=n._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var c=Hl(a);l.call(c)}}Eu(e,a,t,s)}else a=Z1(n,e,t,s,r);return Hl(a)}ey=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=oo(e.pendingLanes);n!==0&&(cd(e,n|1),Vt(e,Be()),!(me&6)&&(gi=Be()+500,Ur()))}break;case 13:ys(function(){var r=Qn(t,1);if(r!==null){var s=Nt();pn(r,t,1,s)}}),$d(t,1)}};hd=function(t){if(t.tag===13){var e=Qn(t,134217728);if(e!==null){var n=Nt();pn(e,t,134217728,n)}$d(t,134217728)}};ty=function(t){if(t.tag===13){var e=Sr(t),n=Qn(t,e);if(n!==null){var r=Nt();pn(n,t,e,r)}$d(t,e)}};ny=function(){return ve};ry=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Gc=function(t,e,n){switch(e){case"input":if(Bc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=mu(r);if(!s)throw Error(U(90));Vg(r),Bc(r,s)}}}break;case"textarea":Mg(t,n);break;case"select":e=n.value,e!=null&&ei(t,!!n.multiple,e,!1)}};$g=Ld;qg=ys;var ew={usingClientEntryPoint:!1,Events:[ia,Qs,mu,Ug,Bg,Ld]},to={findFiberByHostInstance:ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},tw={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qg(t),t===null?null:t.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||J1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{hu=Xa.inject(tw),Cn=Xa}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ew;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hd(e))throw Error(U(200));return Y1(t,e,null,n)};$t.createRoot=function(t,e){if(!Hd(t))throw Error(U(299));var n=!1,r="",s=S0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Bd(t,1,!1,null,null,n,!1,r,s),t[Wn]=e.current,Lo(t.nodeType===8?t.parentNode:t),new qd(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Qg(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return ys(t)};$t.hydrate=function(t,e,n){if(!Iu(e))throw Error(U(200));return Su(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Hd(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",a=S0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=I0(e,null,t,1,n??null,s,!1,i,a),t[Wn]=e.current,Lo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Tu(e)};$t.render=function(t,e,n){if(!Iu(e))throw Error(U(200));return Su(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Iu(t))throw Error(U(40));return t._reactRootContainer?(ys(function(){Su(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};$t.unstable_batchedUpdates=Ld;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Iu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Su(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function N0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N0)}catch(t){console.error(t)}}N0(),Ng.exports=$t;var nw=Ng.exports,tm=nw;Dc.createRoot=tm.createRoot,Dc.hydrateRoot=tm.hydrateRoot;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ie=(t,e)=>{const n=X.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:c,...d},p)=>X.createElement("svg",{ref:p,...rw,width:s,height:s,stroke:r,strokeWidth:a?Number(i)*24/Number(s):i,className:["lucide",`lucide-${sw(t)}`,l].join(" "),...d},[...e.map(([g,_])=>X.createElement(g,_)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C0=ie("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const To=ie("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=ie("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=ie("ArrowRightLeft",[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=ie("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kh=ie("Blocks",[["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["path",{d:"M10 21V8a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1H3",key:"1fpvtg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=ie("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=ie("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b0=ie("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ow=ie("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nm=ie("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=ie("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=ie("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P0=ie("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ah=ie("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=ie("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=ie("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=ie("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=ie("JapaneseYen",[["path",{d:"M12 9.5V21m0-11.5L6 3m6 6.5L18 3",key:"2ej80x"}],["path",{d:"M6 15h12",key:"1hwgt5"}],["path",{d:"M6 11h12",key:"wf4gp6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=ie("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hw=ie("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wl=ie("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dw=ie("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fw=ie("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pw=ie("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mw=ie("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qd=ie("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=ie("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gw=ie("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=ie("Scissors",[["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M8.12 8.12 12 12",key:"1alkpv"}],["path",{d:"M20 4 8.12 15.88",key:"xgtan2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M14.8 14.8 20 20",key:"ptml3r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V0=ie("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=ie("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sm=ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yw=ie("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lo=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vw=ie("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ql=ie("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=ie("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fn="STOCK",_w=({isFullscreen:t,toggleFullscreen:e,setIsAssemblyModalOpen:n,setIsInventoryValuationOpen:r,setIsSettingsOpen:s,setIsCustomerModalOpen:i,setIsMasterModalOpen:a,openNewItemModal:l})=>u.jsx("header",{className:"bg-indigo-800 text-white shadow-lg sticky top-0 z-20",style:{zIndex:20},children:u.jsx("div",{className:"w-full px-4 py-4",children:u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("div",{children:u.jsxs("h1",{className:"text-xl md:text-2xl font-bold flex items-center gap-2",children:[u.jsx(Qd,{className:"h-6 w-6 md:h-8 md:w-8"}),"waken"]})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{type:"button",onClick:e,className:"p-2 bg-indigo-700 hover:bg-indigo-600 rounded-lg transition-colors text-indigo-100 hidden md:flex items-center gap-1",title:"",children:t?u.jsx(pw,{size:20}):u.jsx(dw,{size:20})}),u.jsxs("button",{type:"button",onClick:()=>n(!0),className:"p-2 bg-indigo-700 hover:bg-indigo-600 rounded-lg transition-colors text-indigo-100 flex items-center gap-1",children:[u.jsx(kh,{size:20}),u.jsx("span",{className:"hidden md:inline text-xs font-bold ml-1",children:""})]}),u.jsxs("button",{type:"button",onClick:()=>r(!0),className:"p-2 bg-indigo-700 hover:bg-indigo-600 rounded-lg transition-colors text-indigo-100 flex items-center gap-1",children:[u.jsx(P0,{size:20}),u.jsx("span",{className:"hidden md:inline text-xs font-bold ml-1",children:""})]}),u.jsxs("button",{type:"button",onClick:()=>s(!0),className:"p-2 bg-indigo-700 hover:bg-indigo-600 rounded-lg transition-colors text-indigo-100 flex items-center gap-1",children:[u.jsx(D0,{size:20}),u.jsx("span",{className:"hidden md:inline text-xs font-bold ml-1",children:""})]}),u.jsxs("button",{type:"button",onClick:()=>i(!0),className:"p-2 bg-indigo-700 hover:bg-indigo-600 rounded-lg transition-colors text-indigo-100 flex items-center gap-1",children:[u.jsx(Ql,{size:20}),u.jsx("span",{className:"hidden md:inline text-xs font-bold ml-1",children:""})]}),u.jsxs("button",{type:"button",onClick:()=>a(!0),className:"p-2 bg-indigo-700 hover:bg-indigo-600 rounded-lg transition-colors text-indigo-100 flex items-center gap-1",children:[u.jsx(R0,{size:20}),u.jsx("span",{className:"hidden md:inline text-xs font-bold ml-1",children:""})]}),u.jsxs("button",{type:"button",onClick:l,className:"bg-indigo-600 hover:bg-indigo-500 border border-indigo-400 text-white px-3 py-2 md:px-4 md:py-2 rounded-lg font-medium transition-colors flex items-center gap-2 shadow-sm text-sm md:text-base",children:[u.jsx(ns,{size:18}),""]})]})]})})}),xw=({totalStock:t,totalWIP:e,totalProduct:n,totalBoxed:r,deadlineAlertCount:s,lowStockCount:i,rawMaterialShortageCount:a,isDeadlineFilterActive:l,setIsDeadlineFilterActive:c,isLowStockFilterActive:d,setIsLowStockFilterActive:p,isRawMaterialShortageFilterActive:g,setIsRawMaterialShortageFilterActive:_,setViewingStockType:C})=>u.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4 mb-8",children:[u.jsxs("button",{type:"button",onClick:()=>C("ALL"),className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between cursor-pointer hover:bg-slate-50 transition-colors active:scale-95 text-left",children:[u.jsxs("h3",{className:"text-slate-500 text-sm font-medium flex items-center gap-2",children:[u.jsx(Qd,{size:16})," "]}),u.jsxs("p",{className:"text-2xl lg:text-3xl font-bold mt-1 text-slate-700",children:[t.toLocaleString()," ",u.jsx("span",{className:"text-sm font-normal text-slate-400",children:""})]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>C("WIP"),className:"flex justify-between items-center border-b border-slate-100 pb-2 cursor-pointer hover:bg-slate-50 transition-colors rounded px-2 -mx-2 text-left w-full",children:[u.jsxs("span",{className:"text-sm font-medium text-slate-500 flex items-center gap-1",children:[u.jsx(Wd,{size:14})," "]}),u.jsxs("span",{className:"font-bold text-lg text-indigo-600 flex items-center gap-1",children:[e.toLocaleString()," ",u.jsx("span",{className:"text-xs text-slate-400",children:""}),u.jsx(pl,{size:14,className:"text-slate-300"})]})]}),u.jsxs("button",{type:"button",onClick:()=>C("PRODUCT"),className:"flex justify-between items-center pt-1 cursor-pointer hover:bg-slate-50 transition-colors rounded px-2 -mx-2 text-left w-full",children:[u.jsxs("span",{className:"text-sm font-medium text-slate-500 flex items-center gap-1",children:[u.jsx(Nu,{size:14})," "]}),u.jsxs("span",{className:"font-bold text-lg text-emerald-600 flex items-center gap-1",children:[n.toLocaleString()," ",u.jsx("span",{className:"text-xs text-slate-400",children:""}),u.jsx(pl,{size:14,className:"text-slate-300"})]})]}),u.jsxs("button",{type:"button",onClick:()=>C("BOXED"),className:"flex justify-between items-center pt-1 cursor-pointer hover:bg-slate-50 transition-colors rounded px-2 -mx-2 text-left w-full",children:[u.jsxs("span",{className:"text-sm font-medium text-slate-500 flex items-center gap-1",children:[u.jsx(k0,{size:14})," "]}),u.jsxs("span",{className:"font-bold text-lg text-amber-600 flex items-center gap-1",children:[r.toLocaleString()," ",u.jsx("span",{className:"text-xs text-slate-400",children:""}),u.jsx(pl,{size:14,className:"text-slate-300"})]})]})]}),u.jsxs("button",{type:"button",onClick:()=>c(!l),className:`p-4 rounded-xl shadow-sm border flex flex-col justify-between cursor-pointer transition-all active:scale-95 text-left ${l?"bg-rose-100 border-rose-400 ring-2 ring-rose-400 shadow-md":s>0?"bg-rose-50 border-rose-200 hover:bg-rose-100":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[u.jsxs("h3",{className:`text-sm font-medium flex items-center gap-2 ${l?"text-rose-800":"text-slate-500"}`,children:[u.jsx(Ah,{size:16,className:l?"text-rose-600":s>0?"text-rose-500":"text-slate-300"}),"7"]}),u.jsxs("p",{className:`text-2xl lg:text-3xl font-bold mt-1 ${s>0?"text-rose-600":"text-slate-700"}`,children:[s," ",u.jsx("span",{className:`text-sm font-normal ${l?"text-rose-700":"text-slate-400"}`,children:""})]})]}),u.jsxs("button",{type:"button",onClick:()=>p(!d),className:`p-4 rounded-xl shadow-sm border flex flex-col justify-between cursor-pointer transition-all active:scale-95 text-left ${d?"bg-amber-100 border-amber-400 ring-2 ring-amber-400 shadow-md":i>0?"bg-amber-50 border-amber-200 hover:bg-amber-100":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[u.jsxs("h3",{className:`text-sm font-medium flex items-center gap-2 ${d?"text-amber-800":"text-slate-500"}`,children:[u.jsx(To,{size:16,className:d?"text-amber-600":i>0?"text-amber-500":"text-slate-300"}),""]}),u.jsxs("p",{className:`text-2xl lg:text-3xl font-bold mt-1 ${i>0?"text-amber-600":"text-slate-700"}`,children:[i," ",u.jsx("span",{className:`text-sm font-normal ${d?"text-amber-700":"text-slate-400"}`,children:""})]})]}),u.jsxs("button",{type:"button",onClick:()=>_(!g),className:`p-4 rounded-xl shadow-sm border flex flex-col justify-between cursor-pointer transition-all active:scale-95 text-left ${g?"bg-purple-100 border-purple-400 ring-2 ring-purple-400 shadow-md":a>0?"bg-purple-50 border-purple-200 hover:bg-purple-100":"bg-white border-slate-200 hover:bg-slate-50"}`,children:[u.jsxs("h3",{className:`text-sm font-medium flex items-center gap-2 ${g?"text-purple-800":"text-slate-500"}`,children:[u.jsx(j0,{size:16,className:g?"text-purple-600":a>0?"text-purple-500":"text-slate-300"}),""]}),u.jsxs("p",{className:`text-2xl lg:text-3xl font-bold mt-1 ${a>0?"text-purple-600":"text-slate-700"}`,children:[a," ",u.jsx("span",{className:`text-sm font-normal ${g?"text-purple-700":"text-slate-400"}`,children:""})]})]})]}),ww=({processes:t,processTypes:e,stockByProcess:n,totalStock:r,setViewingProcess:s})=>u.jsxs("div",{className:"mb-8 animate-fade-in",children:[u.jsxs("div",{className:"flex items-center justify-between mb-3",children:[u.jsxs("h3",{className:"text-slate-600 font-bold flex items-center gap-2",children:[u.jsx(Wl,{size:20,className:"text-indigo-500"}),""]}),u.jsxs("div",{className:"flex gap-2 text-xs",children:[u.jsxs("span",{className:"flex items-center gap-1 bg-white border border-slate-200 px-2 py-1 rounded",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"}),"  (WIP)"]}),u.jsxs("span",{className:"flex items-center gap-1 bg-white border border-slate-200 px-2 py-1 rounded",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"}),"  (Product)"]}),u.jsxs("span",{className:"flex items-center gap-1 bg-white border border-slate-200 px-2 py-1 rounded",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-amber-500"}),"  (Boxed)"]})]})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3",children:t.map(i=>{const a=n[i]||0,l=e[i]||"WIP";return u.jsxs("button",{type:"button",onClick:()=>s(i),className:`p-4 rounded-lg shadow-sm border transition-all cursor-pointer relative overflow-hidden group text-left
                bg-white border-slate-200 hover:border-indigo-300 hover:shadow-md hover:bg-indigo-50
                ${a===0?"opacity-70":""}
              `,children:[u.jsxs("div",{className:"flex justify-between items-start mb-1",children:[u.jsxs("div",{className:"flex items-center gap-1.5 min-w-0",children:[u.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${l==="PRODUCT"?"bg-indigo-500":l==="BOXED"?"bg-amber-500":"bg-slate-400"}`,title:l==="PRODUCT"?"":l==="BOXED"?"":""}),u.jsx("div",{className:"text-xs font-medium truncate text-slate-600 group-hover:text-indigo-700",title:i,children:i})]}),u.jsx(pl,{size:14,className:"text-slate-300 group-hover:text-indigo-500 shrink-0"})]}),u.jsxs("div",{className:`text-xl font-bold ${a>0?"text-slate-800":"text-slate-400"}`,children:[a.toLocaleString()," ",u.jsx("span",{className:"text-xs font-normal text-slate-400",children:""})]}),a>0&&u.jsx("div",{className:"w-full bg-slate-100 h-1.5 mt-2 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full rounded-full transition-all duration-500 ${l==="PRODUCT"?"bg-indigo-500":l==="BOXED"?"bg-amber-500":"bg-slate-400"}`,style:{width:`${Math.min(100,a/r*100)}%`}})}),u.jsx("div",{className:"absolute inset-0 bg-indigo-900 bg-opacity-0 group-hover:bg-opacity-5 transition-all pointer-events-none"})]},i)})}),u.jsx("p",{className:"text-xs text-slate-400 mt-2 text-right",children:" "})]}),Ew=({type:t})=>t===""?u.jsxs("span",{className:"inline-flex items-center gap-1 bg-amber-100 text-amber-800 text-[10px] px-1.5 py-0.5 rounded border border-amber-200",children:[u.jsx(Nu,{size:10})," "]}):t===""?u.jsxs("span",{className:"inline-flex items-center gap-1 bg-purple-100 text-purple-800 text-[10px] px-1.5 py-0.5 rounded border border-purple-200",children:[u.jsx(lw,{size:10})," "]}):u.jsx("span",{className:"inline-flex items-center gap-1 bg-slate-100 text-slate-500 text-[10px] px-1.5 py-0.5 rounded border border-slate-200",children:""}),Tw=({filteredItems:t,customers:e,processes:n,processTypes:r,searchQuery:s,setSearchQuery:i,selectedCustomerFilter:a,setSelectedCustomerFilter:l,sortOption:c,setSortOption:d,isLowStockFilterActive:p,isDeadlineFilterActive:g,isRawMaterialShortageFilterActive:_,selectedProcessFilter:C,clearFilters:P,calculateProductStock:j,calculateStockByType:z,getDaysUntil:S,openEditModal:T,deleteItem:k})=>{const[M,B]=X.useState(null);return u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:[u.jsxs("div",{className:`p-4 border-b transition-colors flex flex-col md:flex-row items-start md:items-center gap-4 ${p?"bg-amber-50 border-amber-100":g?"bg-rose-50 border-rose-100":_?"bg-purple-50 border-purple-100":"bg-slate-50 border-slate-100"}`,children:[u.jsxs("div",{className:"flex-1 w-full md:max-w-4xl flex flex-col md:flex-row gap-3",children:[u.jsxs("div",{className:"relative flex-1",children:[u.jsx(V0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-5 w-5"}),u.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",value:s,onChange:D=>i(D.target.value)})]}),u.jsxs("div",{className:"relative w-full md:w-64",children:[u.jsx(Ql,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-5 w-5"}),u.jsxs("select",{className:"w-full pl-10 pr-8 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent appearance-none bg-white",value:a,onChange:D=>l(D.target.value),children:[u.jsx("option",{value:"",children:""}),e.map(D=>u.jsx("option",{value:D.name,children:D.name},D.id))]}),u.jsx(rm,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4 pointer-events-none"})]}),u.jsxs("div",{className:"relative",children:[u.jsxs("select",{className:"px-4 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 bg-white text-slate-600 font-medium appearance-none pr-8 cursor-pointer",value:c,onChange:D=>d(D.target.value),children:[u.jsx("option",{value:"default",children:": "}),u.jsx("option",{value:"code_asc",children:" (A-Z)"}),u.jsx("option",{value:"stock_desc",children:""}),u.jsx("option",{value:"stock_asc",children:""}),u.jsx("option",{value:"deadline_asc",children:""})]}),u.jsx(A0,{size:16,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 pointer-events-none"})]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-xs ml-auto flex-wrap justify-end",children:[p?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"font-bold text-amber-700 bg-amber-100 px-3 py-1.5 rounded-lg flex items-center gap-1 border border-amber-200",children:[u.jsx(To,{size:14})," "]}),u.jsx("button",{type:"button",onClick:P,className:"text-slate-500 hover:text-slate-700 underline",children:""})]}):g?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"font-bold text-rose-700 bg-rose-100 px-3 py-1.5 rounded-lg flex items-center gap-1 border border-rose-200",children:[u.jsx(Ah,{size:14})," "]}),u.jsx("button",{type:"button",onClick:P,className:"text-slate-500 hover:text-slate-700 underline",children:""})]}):_?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"font-bold text-purple-700 bg-purple-100 px-3 py-1.5 rounded-lg flex items-center gap-1 border border-purple-200",children:[u.jsx(j0,{size:14})," "]}),u.jsx("button",{type:"button",onClick:P,className:"text-slate-500 hover:text-slate-700 underline",children:""})]}):C?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"font-bold text-indigo-700 bg-indigo-100 px-2 py-1 rounded flex items-center gap-1",children:[u.jsx(Wl,{size:12})," ",C,""]}),u.jsx("button",{type:"button",onClick:P,className:"text-slate-500 hover:text-slate-700",children:u.jsx(Lt,{size:12})})]}):null,(s||a||c!=="default"||p||g||_||C)&&u.jsxs("button",{type:"button",onClick:P,className:"text-slate-400 hover:text-slate-600 flex items-center gap-1",children:[u.jsx(Lt,{size:12})," "]})]})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{children:u.jsxs("tr",{className:"bg-slate-50 text-slate-500 text-sm uppercase tracking-wider",children:[u.jsx("th",{className:"p-4 font-semibold w-12"}),u.jsx("th",{className:"p-4 font-semibold w-64",children:" /  / "}),u.jsx("th",{className:"p-4 font-semibold w-48",children:" / "}),u.jsx("th",{className:"p-4 font-semibold w-[500px]",children:""}),u.jsx("th",{className:"p-4 font-semibold text-center w-20",children:""})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:t.length>0?t.map(D=>{const x=j(D),v=z(D,"WIP"),E=M===D.id,I=Math.max(0,D.targetStock-x),N=z(D,"ALL"),A=Math.max(0,D.targetStock-N),w=D.deadline?S(D.deadline):null;let Ne="text-slate-600 bg-slate-100",ge=D.deadline,Ht=u.jsx(b0,{size:12});w!==null&&(w<0?(Ne="text-white bg-red-600",ge=` (${Math.abs(w)})`,Ht=u.jsx(To,{size:12})):w<=7?(Ne="text-amber-800 bg-amber-100 border border-amber-200",ge=` ${w} `,Ht=u.jsx(Ah,{size:12})):w<=30&&(Ne="text-blue-800 bg-blue-50 border border-blue-100",ge=` ${w} `));const Tt=D.targetStock>0?x/D.targetStock*100:100;let q="bg-emerald-500";return Tt<50?q="bg-red-500":Tt<100&&(q="bg-amber-400"),u.jsxs(Ig.Fragment,{children:[u.jsxs("tr",{className:`hover:bg-slate-50 transition-colors cursor-pointer ${E?"bg-slate-50":""}`,onClick:()=>B(M===D.id?null:D.id),children:[u.jsx("td",{className:"p-4 text-slate-400 text-center align-top pt-5",children:M===D.id?u.jsx(aw,{size:20}):u.jsx(rm,{size:20})}),u.jsx("td",{className:"p-4 align-top",children:u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("span",{className:"font-mono font-bold text-lg text-indigo-700 flex items-center gap-1",children:[u.jsx(yw,{size:16}),D.code]}),u.jsx(Ew,{type:D.packaging}),u.jsxs("span",{className:"text-xs text-slate-400",children:["ID: ",String(D.id).padStart(4,"0")]})]}),u.jsx("div",{className:"font-bold text-sm text-slate-800",children:D.name}),D.deadline&&u.jsxs("div",{className:`mt-1 flex items-center gap-1 text-xs font-bold px-2 py-0.5 rounded w-fit ${Ne}`,children:[Ht," ",ge]})]})}),u.jsx("td",{className:"p-4 align-top",children:u.jsxs("div",{className:"flex flex-col gap-2",children:[D.customer&&u.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-50 text-blue-700 px-2 py-1 rounded border border-blue-100 text-xs w-fit",children:[u.jsx(Ql,{size:10})," ",D.customer]}),u.jsxs("div",{className:"flex gap-1 flex-wrap text-xs",children:[u.jsx("span",{className:"inline-block px-2 py-0.5 bg-slate-100 text-slate-600 rounded",children:D.category}),u.jsx("span",{className:"inline-block px-2 py-0.5 bg-slate-100 text-slate-600 rounded",children:D.size})]})]})}),u.jsx("td",{className:"p-4 align-middle",children:u.jsxs("div",{className:"w-full pr-4",children:[u.jsxs("div",{className:"flex items-center gap-6 mb-3",children:[u.jsxs("div",{className:"flex-none min-w-[80px]",children:[u.jsxs("div",{className:"text-xs text-slate-500 mb-1 flex items-center gap-1 font-bold",children:[u.jsx(Nu,{size:14})," "]}),u.jsxs("div",{className:`text-2xl font-bold leading-none ${x<=D.threshold?"text-red-600":"text-slate-800"}`,children:[x.toLocaleString()," ",u.jsx("span",{className:"text-sm font-normal text-slate-400",children:""})]})]}),u.jsxs("div",{className:"flex flex-1 gap-6 border-l-2 border-slate-100 pl-6 py-0.5",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-xs text-slate-400 mb-0.5 flex items-center gap-1",children:[u.jsx(Wd,{size:12})," "]}),u.jsx("div",{className:"text-base font-semibold text-slate-600 leading-none",children:v.toLocaleString()})]}),u.jsxs("div",{children:[u.jsx("div",{className:"text-xs text-slate-400 mb-0.5",children:""}),u.jsx("div",{className:"text-base font-semibold text-slate-600 leading-none",children:D.targetStock.toLocaleString()})]})]})]}),u.jsxs("div",{className:"space-y-1.5",children:[u.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:u.jsx("div",{style:{width:`${Math.min(100,Tt)}%`},className:`h-full ${q} transition-all duration-500`})}),u.jsxs("div",{className:"flex items-center justify-between text-xs min-h-[20px]",children:[u.jsx("div",{className:"flex gap-2",children:I>0?u.jsxs(u.Fragment,{children:[u.jsxs("span",{className:"font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded flex items-center gap-1",children:[u.jsx(To,{size:10})," : ",I]}),A>0&&u.jsxs("span",{className:"font-bold text-purple-700 bg-purple-50 px-2 py-0.5 rounded flex items-center gap-1",children:[u.jsx(C0,{size:10})," : ",A]})]}):u.jsxs("span",{className:"font-bold text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded flex items-center gap-1",children:[u.jsx(ow,{size:10})," "]})}),u.jsxs("div",{className:"font-medium text-slate-400",children:[" ",Math.round(Tt),"%"]})]})]})]})}),u.jsx("td",{className:"p-4 text-center align-middle",onClick:K=>K.stopPropagation(),children:u.jsxs("div",{className:"flex justify-center gap-2",children:[u.jsx("button",{type:"button",onClick:()=>T(D),className:"p-2 text-indigo-600 hover:bg-indigo-50 rounded transition-colors",title:"",children:u.jsx(M0,{size:18})}),u.jsx("button",{type:"button",onClick:()=>k(D.id),className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded transition-colors",title:"",children:u.jsx(lo,{size:18})})]})})]}),M===D.id&&u.jsx("tr",{className:"bg-slate-50",children:u.jsx("td",{colSpan:5,className:"p-0",children:u.jsxs("div",{className:"p-4 pl-16 border-t border-slate-200 shadow-inner bg-slate-100",children:[u.jsxs("div",{className:"flex justify-between items-center mb-3",children:[u.jsxs("h4",{className:"text-sm font-bold text-slate-600 flex items-center gap-2",children:[u.jsx(Wl,{size:16}),""]}),u.jsxs("div",{className:"flex gap-3",children:[u.jsxs("div",{className:"text-xs text-slate-500 flex gap-1 items-center",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-slate-400"})," "]}),u.jsxs("div",{className:"text-xs text-slate-500 flex gap-1 items-center",children:[u.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})," "]})]})]}),u.jsx("div",{className:"bg-white rounded-lg border border-slate-200 overflow-hidden",children:u.jsxs("table",{className:"w-full text-sm text-left",children:[u.jsx("thead",{className:"bg-slate-50 text-slate-500 border-b border-slate-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2",children:"()"}),u.jsx("th",{className:"px-4 py-2",children:""}),u.jsx("th",{className:"px-4 py-2",children:""}),u.jsx("th",{className:"px-4 py-2",children:" / No"}),u.jsx("th",{className:"px-4 py-2",children:""}),u.jsx("th",{className:"px-4 py-2",children:"/"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:n.map((K,Z)=>{var $e;const le=D.lots?D.lots.filter(Pe=>Pe.process===K&&Pe.quantity>0):[],de=r[K]||"WIP",Wt=(($e=D.processPrices)==null?void 0:$e[K])??D.price;return le.length>0?le.map((Pe,pt)=>u.jsxs("tr",{children:[u.jsxs("td",{className:"px-4 py-3 font-bold text-slate-700 flex items-center gap-2",children:[u.jsx("span",{className:`w-2 h-2 rounded-full inline-block ${de==="PRODUCT"?"bg-indigo-500":de==="BOXED"?"bg-amber-500":"bg-slate-400"}`}),Pe.process]}),u.jsx("td",{className:"px-4 py-3 text-xs",children:de==="PRODUCT"?u.jsx("span",{className:"bg-indigo-50 text-indigo-600 px-1.5 py-0.5 rounded border border-indigo-100",children:""}):de==="BOXED"?u.jsx("span",{className:"bg-amber-50 text-amber-600 px-1.5 py-0.5 rounded border border-amber-100",children:""}):u.jsx("span",{className:"bg-slate-100 text-slate-500 px-1.5 py-0.5 rounded border border-slate-200",children:""})}),u.jsxs("td",{className:"px-4 py-3 text-xs text-slate-600 font-mono",children:["",Wt.toLocaleString()]}),u.jsx("td",{className:"px-4 py-3 font-mono text-indigo-900",children:Pe.lotNo===Fn?u.jsx("span",{className:"bg-slate-100 text-slate-500 px-2 py-1 rounded text-xs",children:""}):Pe.lotNo}),u.jsxs("td",{className:"px-4 py-3 font-bold text-slate-700",children:[Pe.quantity," "]}),u.jsx("td",{className:"px-4 py-3 text-slate-500",children:Pe.receivedDate})]},`${Z}-${pt}`)):u.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[u.jsxs("td",{className:"px-4 py-3 font-bold text-slate-400 flex items-center gap-2",children:[u.jsx("span",{className:`w-2 h-2 rounded-full inline-block ${de==="PRODUCT"?"bg-indigo-200":de==="BOXED"?"bg-amber-200":"bg-slate-200"}`}),K]}),u.jsx("td",{className:"px-4 py-3 text-xs text-slate-300",children:de==="PRODUCT"?"":de==="BOXED"?"":""}),u.jsxs("td",{className:"px-4 py-3 text-xs text-slate-300 font-mono",children:["",Wt.toLocaleString()]}),u.jsx("td",{className:"px-4 py-3 font-mono text-slate-300",children:"-"}),u.jsx("td",{className:"px-4 py-3 font-bold text-slate-400",children:"0 "}),u.jsx("td",{className:"px-4 py-3 text-slate-300",children:"-"})]},`${Z}-empty`)})})]})})]})})})]},D.id)}):u.jsx("tr",{children:u.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-500",children:p?"":g?"":""})})})]})})]})},Iw=()=>{};var im={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Sw=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},L0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,p=i>>2,g=(i&3)<<4|l>>4;let _=(l&15)<<2|d>>6,C=d&63;c||(C=64,a||(_=64)),r.push(n[p],n[g],n[_],n[C])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(O0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Sw(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||g==null)throw new Nw;const _=i<<2|l>>4;if(r.push(_),d!==64){const C=l<<4&240|d>>2;if(r.push(C),g!==64){const P=d<<6&192|g;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Nw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Cw=function(t){const e=O0(t);return L0.encodeByteArray(e,!0)},Kl=function(t){return Cw(t).replace(/\./g,"")},kw=function(t){try{return L0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=()=>Aw().__FIREBASE_DEFAULTS__,Pw=()=>{if(typeof process>"u"||typeof im>"u")return;const t=im.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Rw=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kw(t[1]);return e&&JSON.parse(e)},Kd=()=>{try{return Iw()||bw()||Pw()||Rw()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jw=t=>{var e,n;return(n=(e=Kd())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Vw=t=>{const e=jw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},F0=()=>{var t;return(t=Kd())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gd(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mw(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Kl(JSON.stringify(n)),Kl(JSON.stringify(a)),""].join(".")}const Io={};function Lw(){const t={prod:[],emulator:[]};for(const e of Object.keys(Io))Io[e]?t.emulator.push(e):t.prod.push(e);return t}function Fw(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let om=!1;function zw(t,e){if(typeof window>"u"||typeof document>"u"||!Gd(window.location.host)||Io[t]===e||Io[t]||om)return;Io[t]=e;function n(_){return`__firebase__banner__${_}`}const r="__firebase__banner",i=Lw().prod.length>0;function a(){const _=document.getElementById(r);_&&_.remove()}function l(_){_.style.display="flex",_.style.background="#7faaf0",_.style.position="fixed",_.style.bottom="5px",_.style.left="5px",_.style.padding=".5em",_.style.borderRadius="5px",_.style.alignItems="center"}function c(_,C){_.setAttribute("width","24"),_.setAttribute("id",C),_.setAttribute("height","24"),_.setAttribute("viewBox","0 0 24 24"),_.setAttribute("fill","none"),_.style.marginLeft="-6px"}function d(){const _=document.createElement("span");return _.style.cursor="pointer",_.style.marginLeft="16px",_.style.fontSize="24px",_.innerHTML=" &times;",_.onclick=()=>{om=!0,a()},_}function p(_,C){_.setAttribute("id",C),_.innerText="Learn more",_.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",_.setAttribute("target","__blank"),_.style.paddingLeft="5px",_.style.textDecoration="underline"}function g(){const _=Fw(r),C=n("text"),P=document.getElementById(C)||document.createElement("span"),j=n("learnmore"),z=document.getElementById(j)||document.createElement("a"),S=n("preprendIcon"),T=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(_.created){const k=_.element;l(k),p(z,j);const M=d();c(T,S),k.append(T,P,z,M),document.body.appendChild(k)}i?(P.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,P.innerText="Preview backend running in this workspace."),P.setAttribute("id",C)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uw(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Bw(){var e;const t=(e=Kd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $w(){return!Bw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qw(){try{return typeof indexedDB=="object"}catch{return!1}}function Hw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ww="FirebaseError";class Ni extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Ww,Object.setPrototypeOf(this,Ni.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,z0.prototype.create)}}class z0{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?Qw(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Ni(s,l,r)}}function Qw(t,e){return t.replace(Kw,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Kw=/\{\$([^}]+)}/g;function Gl(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],a=e[s];if(am(i)&&am(a)){if(!Gl(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function am(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t){return t&&t._delegate?t._delegate:t}class Qo{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Dw;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Yw(e))try{this.getOrInitializeService({instanceIdentifier:rs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=rs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=rs){return this.instances.has(e)}getOptions(e=rs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Xw(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=rs){return this.component?this.component.multipleInstances?e:rs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Xw(t){return t===rs?void 0:t}function Yw(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Gw(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(pe||(pe={}));const Zw={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},e2=pe.INFO,t2={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},n2=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=t2[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class U0{constructor(e){this.name=e,this._logLevel=e2,this._logHandler=n2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Zw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}}const r2=(t,e)=>e.some(n=>t instanceof n);let lm,um;function s2(){return lm||(lm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function i2(){return um||(um=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const B0=new WeakMap,bh=new WeakMap,$0=new WeakMap,Sc=new WeakMap,Xd=new WeakMap;function o2(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{n(Cr(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&B0.set(n,t)}).catch(()=>{}),Xd.set(e,t),e}function a2(t){if(bh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});bh.set(t,e)}let Ph={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||$0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function l2(t){Ph=t(Ph)}function u2(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Nc(this),e,...n);return $0.set(r,e.sort?e.sort():[e]),Cr(r)}:i2().includes(t)?function(...e){return t.apply(Nc(this),e),Cr(B0.get(this))}:function(...e){return Cr(t.apply(Nc(this),e))}}function c2(t){return typeof t=="function"?u2(t):(t instanceof IDBTransaction&&a2(t),r2(t,s2())?new Proxy(t,Ph):t)}function Cr(t){if(t instanceof IDBRequest)return o2(t);if(Sc.has(t))return Sc.get(t);const e=c2(t);return e!==t&&(Sc.set(t,e),Xd.set(e,t)),e}const Nc=t=>Xd.get(t);function h2(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=Cr(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Cr(a.result),c.oldVersion,c.newVersion,Cr(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const d2=["get","getKey","getAll","getAllKeys","count"],f2=["put","add","delete","clear"],Cc=new Map;function cm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cc.get(e))return Cc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=f2.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||d2.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Cc.set(e,i),i}l2(t=>({...t,get:(e,n,r)=>cm(e,n)||t.get(e,n,r),has:(e,n)=>!!cm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(m2(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function m2(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rh="@firebase/app",hm="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new U0("@firebase/app"),g2="@firebase/app-compat",y2="@firebase/analytics-compat",v2="@firebase/analytics",_2="@firebase/app-check-compat",x2="@firebase/app-check",w2="@firebase/auth",E2="@firebase/auth-compat",T2="@firebase/database",I2="@firebase/data-connect",S2="@firebase/database-compat",N2="@firebase/functions",C2="@firebase/functions-compat",k2="@firebase/installations",A2="@firebase/installations-compat",b2="@firebase/messaging",P2="@firebase/messaging-compat",R2="@firebase/performance",j2="@firebase/performance-compat",V2="@firebase/remote-config",D2="@firebase/remote-config-compat",M2="@firebase/storage",O2="@firebase/storage-compat",L2="@firebase/firestore",F2="@firebase/ai",z2="@firebase/firestore-compat",U2="firebase",B2="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jh="[DEFAULT]",$2={[Rh]:"fire-core",[g2]:"fire-core-compat",[v2]:"fire-analytics",[y2]:"fire-analytics-compat",[x2]:"fire-app-check",[_2]:"fire-app-check-compat",[w2]:"fire-auth",[E2]:"fire-auth-compat",[T2]:"fire-rtdb",[I2]:"fire-data-connect",[S2]:"fire-rtdb-compat",[N2]:"fire-fn",[C2]:"fire-fn-compat",[k2]:"fire-iid",[A2]:"fire-iid-compat",[b2]:"fire-fcm",[P2]:"fire-fcm-compat",[R2]:"fire-perf",[j2]:"fire-perf-compat",[V2]:"fire-rc",[D2]:"fire-rc-compat",[M2]:"fire-gcs",[O2]:"fire-gcs-compat",[L2]:"fire-fst",[z2]:"fire-fst-compat",[F2]:"fire-vertex","fire-js":"fire-js",[U2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new Map,q2=new Map,Vh=new Map;function dm(t,e){try{t.container.addComponent(e)}catch(n){Gn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Yl(t){const e=t.name;if(Vh.has(e))return Gn.debug(`There were multiple attempts to register component ${e}.`),!1;Vh.set(e,t);for(const n of Xl.values())dm(n,t);for(const n of q2.values())dm(n,t);return!0}function H2(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function W2(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kr=new z0("app","Firebase",Q2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Qo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=B2;function q0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:jh,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw kr.create("bad-app-name",{appName:String(s)});if(n||(n=F0()),!n)throw kr.create("no-options");const i=Xl.get(s);if(i){if(Gl(n,i.options)&&Gl(r,i.config))return i;throw kr.create("duplicate-app",{appName:s})}const a=new Jw(s);for(const c of Vh.values())a.addComponent(c);const l=new K2(n,r,a);return Xl.set(s,l),l}function X2(t=jh){const e=Xl.get(t);if(!e&&t===jh&&F0())return q0();if(!e)throw kr.create("no-app",{appName:t});return e}function oi(t,e,n){let r=$2[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Gn.warn(a.join(" "));return}Yl(new Qo(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2="firebase-heartbeat-database",J2=1,Ko="firebase-heartbeat-store";let kc=null;function H0(){return kc||(kc=h2(Y2,J2,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw kr.create("idb-open",{originalErrorMessage:t.message})})),kc}async function Z2(t){try{const n=(await H0()).transaction(Ko),r=await n.objectStore(Ko).get(W0(t));return await n.done,r}catch(e){if(e instanceof Ni)Gn.warn(e.message);else{const n=kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Gn.warn(n.message)}}}async function fm(t,e){try{const r=(await H0()).transaction(Ko,"readwrite");await r.objectStore(Ko).put(e,W0(t)),await r.done}catch(n){if(n instanceof Ni)Gn.warn(n.message);else{const r=kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Gn.warn(r.message)}}}function W0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=1024,tE=30;class nE{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new sE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=pm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>tE){const a=iE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Gn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=pm(),{heartbeatsToSend:r,unsentEntries:s}=rE(this._heartbeatsCache.heartbeats),i=Kl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Gn.warn(n),""}}}function pm(){return new Date().toISOString().substring(0,10)}function rE(t,e=eE){const n=[];let r=t.slice();for(const s of t){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),mm(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),mm(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class sE{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qw()?Hw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Z2(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return fm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function mm(t){return Kl(JSON.stringify({version:2,heartbeats:t})).length}function iE(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){Yl(new Qo("platform-logger",e=>new p2(e),"PRIVATE")),Yl(new Qo("heartbeat",e=>new nE(e),"PRIVATE")),oi(Rh,hm,t),oi(Rh,hm,"esm2020"),oi("fire-js","")}oE("");var gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ar,Q0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,v){function E(){}E.prototype=v.prototype,x.F=v.prototype,x.prototype=new E,x.prototype.constructor=x,x.D=function(I,N,A){for(var w=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)w[Ne-2]=arguments[Ne];return v.prototype[N].apply(I,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(x,v,E){E||(E=0);const I=Array(16);if(typeof v=="string")for(var N=0;N<16;++N)I[N]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(N=0;N<16;++N)I[N]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=x.g[0],E=x.g[1],N=x.g[2];let A=x.g[3],w;w=v+(A^E&(N^A))+I[0]+3614090360&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(N^v&(E^N))+I[1]+3905402710&4294967295,A=v+(w<<12&4294967295|w>>>20),w=N+(E^A&(v^E))+I[2]+606105819&4294967295,N=A+(w<<17&4294967295|w>>>15),w=E+(v^N&(A^v))+I[3]+3250441966&4294967295,E=N+(w<<22&4294967295|w>>>10),w=v+(A^E&(N^A))+I[4]+4118548399&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(N^v&(E^N))+I[5]+1200080426&4294967295,A=v+(w<<12&4294967295|w>>>20),w=N+(E^A&(v^E))+I[6]+2821735955&4294967295,N=A+(w<<17&4294967295|w>>>15),w=E+(v^N&(A^v))+I[7]+4249261313&4294967295,E=N+(w<<22&4294967295|w>>>10),w=v+(A^E&(N^A))+I[8]+1770035416&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(N^v&(E^N))+I[9]+2336552879&4294967295,A=v+(w<<12&4294967295|w>>>20),w=N+(E^A&(v^E))+I[10]+4294925233&4294967295,N=A+(w<<17&4294967295|w>>>15),w=E+(v^N&(A^v))+I[11]+2304563134&4294967295,E=N+(w<<22&4294967295|w>>>10),w=v+(A^E&(N^A))+I[12]+1804603682&4294967295,v=E+(w<<7&4294967295|w>>>25),w=A+(N^v&(E^N))+I[13]+4254626195&4294967295,A=v+(w<<12&4294967295|w>>>20),w=N+(E^A&(v^E))+I[14]+2792965006&4294967295,N=A+(w<<17&4294967295|w>>>15),w=E+(v^N&(A^v))+I[15]+1236535329&4294967295,E=N+(w<<22&4294967295|w>>>10),w=v+(N^A&(E^N))+I[1]+4129170786&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^N&(v^E))+I[6]+3225465664&4294967295,A=v+(w<<9&4294967295|w>>>23),w=N+(v^E&(A^v))+I[11]+643717713&4294967295,N=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(N^A))+I[0]+3921069994&4294967295,E=N+(w<<20&4294967295|w>>>12),w=v+(N^A&(E^N))+I[5]+3593408605&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^N&(v^E))+I[10]+38016083&4294967295,A=v+(w<<9&4294967295|w>>>23),w=N+(v^E&(A^v))+I[15]+3634488961&4294967295,N=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(N^A))+I[4]+3889429448&4294967295,E=N+(w<<20&4294967295|w>>>12),w=v+(N^A&(E^N))+I[9]+568446438&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^N&(v^E))+I[14]+3275163606&4294967295,A=v+(w<<9&4294967295|w>>>23),w=N+(v^E&(A^v))+I[3]+4107603335&4294967295,N=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(N^A))+I[8]+1163531501&4294967295,E=N+(w<<20&4294967295|w>>>12),w=v+(N^A&(E^N))+I[13]+2850285829&4294967295,v=E+(w<<5&4294967295|w>>>27),w=A+(E^N&(v^E))+I[2]+4243563512&4294967295,A=v+(w<<9&4294967295|w>>>23),w=N+(v^E&(A^v))+I[7]+1735328473&4294967295,N=A+(w<<14&4294967295|w>>>18),w=E+(A^v&(N^A))+I[12]+2368359562&4294967295,E=N+(w<<20&4294967295|w>>>12),w=v+(E^N^A)+I[5]+4294588738&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^N)+I[8]+2272392833&4294967295,A=v+(w<<11&4294967295|w>>>21),w=N+(A^v^E)+I[11]+1839030562&4294967295,N=A+(w<<16&4294967295|w>>>16),w=E+(N^A^v)+I[14]+4259657740&4294967295,E=N+(w<<23&4294967295|w>>>9),w=v+(E^N^A)+I[1]+2763975236&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^N)+I[4]+1272893353&4294967295,A=v+(w<<11&4294967295|w>>>21),w=N+(A^v^E)+I[7]+4139469664&4294967295,N=A+(w<<16&4294967295|w>>>16),w=E+(N^A^v)+I[10]+3200236656&4294967295,E=N+(w<<23&4294967295|w>>>9),w=v+(E^N^A)+I[13]+681279174&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^N)+I[0]+3936430074&4294967295,A=v+(w<<11&4294967295|w>>>21),w=N+(A^v^E)+I[3]+3572445317&4294967295,N=A+(w<<16&4294967295|w>>>16),w=E+(N^A^v)+I[6]+76029189&4294967295,E=N+(w<<23&4294967295|w>>>9),w=v+(E^N^A)+I[9]+3654602809&4294967295,v=E+(w<<4&4294967295|w>>>28),w=A+(v^E^N)+I[12]+3873151461&4294967295,A=v+(w<<11&4294967295|w>>>21),w=N+(A^v^E)+I[15]+530742520&4294967295,N=A+(w<<16&4294967295|w>>>16),w=E+(N^A^v)+I[2]+3299628645&4294967295,E=N+(w<<23&4294967295|w>>>9),w=v+(N^(E|~A))+I[0]+4096336452&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~N))+I[7]+1126891415&4294967295,A=v+(w<<10&4294967295|w>>>22),w=N+(v^(A|~E))+I[14]+2878612391&4294967295,N=A+(w<<15&4294967295|w>>>17),w=E+(A^(N|~v))+I[5]+4237533241&4294967295,E=N+(w<<21&4294967295|w>>>11),w=v+(N^(E|~A))+I[12]+1700485571&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~N))+I[3]+2399980690&4294967295,A=v+(w<<10&4294967295|w>>>22),w=N+(v^(A|~E))+I[10]+4293915773&4294967295,N=A+(w<<15&4294967295|w>>>17),w=E+(A^(N|~v))+I[1]+2240044497&4294967295,E=N+(w<<21&4294967295|w>>>11),w=v+(N^(E|~A))+I[8]+1873313359&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~N))+I[15]+4264355552&4294967295,A=v+(w<<10&4294967295|w>>>22),w=N+(v^(A|~E))+I[6]+2734768916&4294967295,N=A+(w<<15&4294967295|w>>>17),w=E+(A^(N|~v))+I[13]+1309151649&4294967295,E=N+(w<<21&4294967295|w>>>11),w=v+(N^(E|~A))+I[4]+4149444226&4294967295,v=E+(w<<6&4294967295|w>>>26),w=A+(E^(v|~N))+I[11]+3174756917&4294967295,A=v+(w<<10&4294967295|w>>>22),w=N+(v^(A|~E))+I[2]+718787259&4294967295,N=A+(w<<15&4294967295|w>>>17),w=E+(A^(N|~v))+I[9]+3951481745&4294967295,x.g[0]=x.g[0]+v&4294967295,x.g[1]=x.g[1]+(N+(w<<21&4294967295|w>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+A&4294967295}r.prototype.v=function(x,v){v===void 0&&(v=x.length);const E=v-this.blockSize,I=this.C;let N=this.h,A=0;for(;A<v;){if(N==0)for(;A<=E;)s(this,x,A),A+=this.blockSize;if(typeof x=="string"){for(;A<v;)if(I[N++]=x.charCodeAt(A++),N==this.blockSize){s(this,I),N=0;break}}else for(;A<v;)if(I[N++]=x[A++],N==this.blockSize){s(this,I),N=0;break}}this.h=N,this.o+=v},r.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var v=1;v<x.length-8;++v)x[v]=0;v=this.o*8;for(var E=x.length-8;E<x.length;++E)x[E]=v&255,v/=256;for(this.v(x),x=Array(16),v=0,E=0;E<4;++E)for(let I=0;I<32;I+=8)x[v++]=this.g[E]>>>I&255;return x};function i(x,v){var E=l;return Object.prototype.hasOwnProperty.call(E,x)?E[x]:E[x]=v(x)}function a(x,v){this.h=v;const E=[];let I=!0;for(let N=x.length-1;N>=0;N--){const A=x[N]|0;I&&A==v||(E[N]=A,I=!1)}this.g=E}var l={};function c(x){return-128<=x&&x<128?i(x,function(v){return new a([v|0],v<0?-1:0)}):new a([x|0],x<0?-1:0)}function d(x){if(isNaN(x)||!isFinite(x))return g;if(x<0)return z(d(-x));const v=[];let E=1;for(let I=0;x>=E;I++)v[I]=x/E|0,E*=4294967296;return new a(v,0)}function p(x,v){if(x.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(x.charAt(0)=="-")return z(p(x.substring(1),v));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const E=d(Math.pow(v,8));let I=g;for(let A=0;A<x.length;A+=8){var N=Math.min(8,x.length-A);const w=parseInt(x.substring(A,A+N),v);N<8?(N=d(Math.pow(v,N)),I=I.j(N).add(d(w))):(I=I.j(E),I=I.add(d(w)))}return I}var g=c(0),_=c(1),C=c(16777216);t=a.prototype,t.m=function(){if(j(this))return-z(this).m();let x=0,v=1;for(let E=0;E<this.g.length;E++){const I=this.i(E);x+=(I>=0?I:4294967296+I)*v,v*=4294967296}return x},t.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(P(this))return"0";if(j(this))return"-"+z(this).toString(x);const v=d(Math.pow(x,6));var E=this;let I="";for(;;){const N=M(E,v).g;E=S(E,N.j(v));let A=((E.g.length>0?E.g[0]:E.h)>>>0).toString(x);if(E=N,P(E))return A+I;for(;A.length<6;)A="0"+A;I=A+I}},t.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function P(x){if(x.h!=0)return!1;for(let v=0;v<x.g.length;v++)if(x.g[v]!=0)return!1;return!0}function j(x){return x.h==-1}t.l=function(x){return x=S(this,x),j(x)?-1:P(x)?0:1};function z(x){const v=x.g.length,E=[];for(let I=0;I<v;I++)E[I]=~x.g[I];return new a(E,~x.h).add(_)}t.abs=function(){return j(this)?z(this):this},t.add=function(x){const v=Math.max(this.g.length,x.g.length),E=[];let I=0;for(let N=0;N<=v;N++){let A=I+(this.i(N)&65535)+(x.i(N)&65535),w=(A>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);I=w>>>16,A&=65535,w&=65535,E[N]=w<<16|A}return new a(E,E[E.length-1]&-2147483648?-1:0)};function S(x,v){return x.add(z(v))}t.j=function(x){if(P(this)||P(x))return g;if(j(this))return j(x)?z(this).j(z(x)):z(z(this).j(x));if(j(x))return z(this.j(z(x)));if(this.l(C)<0&&x.l(C)<0)return d(this.m()*x.m());const v=this.g.length+x.g.length,E=[];for(var I=0;I<2*v;I++)E[I]=0;for(I=0;I<this.g.length;I++)for(let N=0;N<x.g.length;N++){const A=this.i(I)>>>16,w=this.i(I)&65535,Ne=x.i(N)>>>16,ge=x.i(N)&65535;E[2*I+2*N]+=w*ge,T(E,2*I+2*N),E[2*I+2*N+1]+=A*ge,T(E,2*I+2*N+1),E[2*I+2*N+1]+=w*Ne,T(E,2*I+2*N+1),E[2*I+2*N+2]+=A*Ne,T(E,2*I+2*N+2)}for(x=0;x<v;x++)E[x]=E[2*x+1]<<16|E[2*x];for(x=v;x<2*v;x++)E[x]=0;return new a(E,0)};function T(x,v){for(;(x[v]&65535)!=x[v];)x[v+1]+=x[v]>>>16,x[v]&=65535,v++}function k(x,v){this.g=x,this.h=v}function M(x,v){if(P(v))throw Error("division by zero");if(P(x))return new k(g,g);if(j(x))return v=M(z(x),v),new k(z(v.g),z(v.h));if(j(v))return v=M(x,z(v)),new k(z(v.g),v.h);if(x.g.length>30){if(j(x)||j(v))throw Error("slowDivide_ only works with positive integers.");for(var E=_,I=v;I.l(x)<=0;)E=B(E),I=B(I);var N=D(E,1),A=D(I,1);for(I=D(I,2),E=D(E,2);!P(I);){var w=A.add(I);w.l(x)<=0&&(N=N.add(E),A=w),I=D(I,1),E=D(E,1)}return v=S(x,N.j(v)),new k(N,v)}for(N=g;x.l(v)>=0;){for(E=Math.max(1,Math.floor(x.m()/v.m())),I=Math.ceil(Math.log(E)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),A=d(E),w=A.j(v);j(w)||w.l(x)>0;)E-=I,A=d(E),w=A.j(v);P(A)&&(A=_),N=N.add(A),x=S(x,w)}return new k(N,x)}t.B=function(x){return M(this,x).h},t.and=function(x){const v=Math.max(this.g.length,x.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)&x.i(I);return new a(E,this.h&x.h)},t.or=function(x){const v=Math.max(this.g.length,x.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)|x.i(I);return new a(E,this.h|x.h)},t.xor=function(x){const v=Math.max(this.g.length,x.g.length),E=[];for(let I=0;I<v;I++)E[I]=this.i(I)^x.i(I);return new a(E,this.h^x.h)};function B(x){const v=x.g.length+1,E=[];for(let I=0;I<v;I++)E[I]=x.i(I)<<1|x.i(I-1)>>>31;return new a(E,x.h)}function D(x,v){const E=v>>5;v%=32;const I=x.g.length-E,N=[];for(let A=0;A<I;A++)N[A]=v>0?x.i(A+E)>>>v|x.i(A+E+1)<<32-v:x.i(A+E);return new a(N,x.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Q0=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=p,Ar=a}).apply(typeof gm<"u"?gm:typeof self<"u"?self:typeof window<"u"?window:{});var Ya=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var K0,uo,G0,ml,Dh,X0,Y0,J0;(function(){var t,e=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ya=="object"&&Ya];for(var h=0;h<o.length;++h){var f=o[h];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(o,h){if(h)e:{var f=r;o=o.split(".");for(var m=0;m<o.length-1;m++){var b=o[m];if(!(b in f))break e;f=f[b]}o=o[o.length-1],m=f[o],h=h(m),h!=m&&h!=null&&e(f,o,{configurable:!0,writable:!0,value:h})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(h){var f=[],m;for(m in h)Object.prototype.hasOwnProperty.call(h,m)&&f.push([m,h[m]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var h=typeof o;return h=="object"&&o!=null||h=="function"}function c(o,h,f){return o.call.apply(o.bind,arguments)}function d(o,h,f){return d=c,d.apply(null,arguments)}function p(o,h){var f=Array.prototype.slice.call(arguments,1);return function(){var m=f.slice();return m.push.apply(m,arguments),o.apply(this,m)}}function g(o,h){function f(){}f.prototype=h.prototype,o.Z=h.prototype,o.prototype=new f,o.prototype.constructor=o,o.Ob=function(m,b,R){for(var $=Array(arguments.length-2),se=2;se<arguments.length;se++)$[se-2]=arguments[se];return h.prototype[b].apply(m,$)}}var _=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function C(o){const h=o.length;if(h>0){const f=Array(h);for(let m=0;m<h;m++)f[m]=o[m];return f}return[]}function P(o,h){for(let m=1;m<arguments.length;m++){const b=arguments[m];var f=typeof b;if(f=f!="object"?f:b?Array.isArray(b)?"array":f:"null",f=="array"||f=="object"&&typeof b.length=="number"){f=o.length||0;const R=b.length||0;o.length=f+R;for(let $=0;$<R;$++)o[f+$]=b[$]}else o.push(b)}}class j{constructor(h,f){this.i=h,this.j=f,this.h=0,this.g=null}get(){let h;return this.h>0?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function z(o){a.setTimeout(()=>{throw o},0)}function S(){var o=x;let h=null;return o.g&&(h=o.g,o.g=o.g.next,o.g||(o.h=null),h.next=null),h}class T{constructor(){this.h=this.g=null}add(h,f){const m=k.get();m.set(h,f),this.h?this.h.next=m:this.g=m,this.h=m}}var k=new j(()=>new M,o=>o.reset());class M{constructor(){this.next=this.g=this.h=null}set(h,f){this.h=h,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let B,D=!1,x=new T,v=()=>{const o=Promise.resolve(void 0);B=()=>{o.then(E)}};function E(){for(var o;o=S();){try{o.h.call(o.g)}catch(f){z(f)}var h=k;h.j(o),h.h<100&&(h.h++,o.next=h.g,h.g=o)}D=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function N(o,h){this.type=o,this.g=this.target=h,this.defaultPrevented=!1}N.prototype.h=function(){this.defaultPrevented=!0};var A=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,h=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const f=()=>{};a.addEventListener("test",f,h),a.removeEventListener("test",f,h)}catch{}return o}();function w(o){return/^[\s\xa0]*$/.test(o)}function Ne(o,h){N.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,h)}g(Ne,N),Ne.prototype.init=function(o,h){const f=this.type=o.type,m=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=h,h=o.relatedTarget,h||(f=="mouseover"?h=o.fromElement:f=="mouseout"&&(h=o.toElement)),this.relatedTarget=h,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Ne.Z.h.call(this)},Ne.prototype.h=function(){Ne.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),Ht=0;function Tt(o,h,f,m,b){this.listener=o,this.proxy=null,this.src=h,this.type=f,this.capture=!!m,this.ha=b,this.key=++Ht,this.da=this.fa=!1}function q(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function K(o,h,f){for(const m in o)h.call(f,o[m],m,o)}function Z(o,h){for(const f in o)h.call(void 0,o[f],f,o)}function le(o){const h={};for(const f in o)h[f]=o[f];return h}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Wt(o,h){let f,m;for(let b=1;b<arguments.length;b++){m=arguments[b];for(f in m)o[f]=m[f];for(let R=0;R<de.length;R++)f=de[R],Object.prototype.hasOwnProperty.call(m,f)&&(o[f]=m[f])}}function $e(o){this.src=o,this.g={},this.h=0}$e.prototype.add=function(o,h,f,m,b){const R=o.toString();o=this.g[R],o||(o=this.g[R]=[],this.h++);const $=pt(o,h,m,b);return $>-1?(h=o[$],f||(h.fa=!1)):(h=new Tt(h,this.src,R,!!m,b),h.fa=f,o.push(h)),h};function Pe(o,h){const f=h.type;if(f in o.g){var m=o.g[f],b=Array.prototype.indexOf.call(m,h,void 0),R;(R=b>=0)&&Array.prototype.splice.call(m,b,1),R&&(q(h),o.g[f].length==0&&(delete o.g[f],o.h--))}}function pt(o,h,f,m){for(let b=0;b<o.length;++b){const R=o[b];if(!R.da&&R.listener==h&&R.capture==!!f&&R.ha==m)return b}return-1}var yn="closure_lm_"+(Math.random()*1e6|0),Dn={};function da(o,h,f,m,b){if(Array.isArray(h)){for(let R=0;R<h.length;R++)da(o,h[R],f,m,b);return null}return f=Di(f),o&&o[ge]?o.J(h,f,l(m)?!!m.capture:!1,b):Cs(o,h,f,!1,m,b)}function Cs(o,h,f,m,b,R){if(!h)throw Error("Invalid event type");const $=l(b)?!!b.capture:!!b;let se=ks(o);if(se||(o[yn]=se=new $e(o)),f=se.add(h,f,m,$,R),f.proxy)return f;if(m=Uu(),f.proxy=m,m.src=o,m.listener=f,o.addEventListener)A||(b=$),b===void 0&&(b=!1),o.addEventListener(h.toString(),m,b);else if(o.attachEvent)o.attachEvent(ji(h.toString()),m);else if(o.addListener&&o.removeListener)o.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return f}function Uu(){function o(f){return h.call(o.src,o.listener,f)}const h=Bu;return o}function Pi(o,h,f,m,b){if(Array.isArray(h))for(var R=0;R<h.length;R++)Pi(o,h[R],f,m,b);else m=l(m)?!!m.capture:!!m,f=Di(f),o&&o[ge]?(o=o.i,R=String(h).toString(),R in o.g&&(h=o.g[R],f=pt(h,f,m,b),f>-1&&(q(h[f]),Array.prototype.splice.call(h,f,1),h.length==0&&(delete o.g[R],o.h--)))):o&&(o=ks(o))&&(h=o.g[h.toString()],o=-1,h&&(o=pt(h,f,m,b)),(f=o>-1?h[o]:null)&&Ri(f))}function Ri(o){if(typeof o!="number"&&o&&!o.da){var h=o.src;if(h&&h[ge])Pe(h.i,o);else{var f=o.type,m=o.proxy;h.removeEventListener?h.removeEventListener(f,m,o.capture):h.detachEvent?h.detachEvent(ji(f),m):h.addListener&&h.removeListener&&h.removeListener(m),(f=ks(h))?(Pe(f,o),f.h==0&&(f.src=null,h[yn]=null)):q(o)}}}function ji(o){return o in Dn?Dn[o]:Dn[o]="on"+o}function Bu(o,h){if(o.da)o=!0;else{h=new Ne(h,this);const f=o.listener,m=o.ha||o.src;o.fa&&Ri(o),o=f.call(m,h)}return o}function ks(o){return o=o[yn],o instanceof $e?o:null}var Vi="__closure_events_fn_"+(Math.random()*1e9>>>0);function Di(o){return typeof o=="function"?o:(o[Vi]||(o[Vi]=function(h){return o.handleEvent(h)}),o[Vi])}function nt(){I.call(this),this.i=new $e(this),this.M=this,this.G=null}g(nt,I),nt.prototype[ge]=!0,nt.prototype.removeEventListener=function(o,h,f,m){Pi(this,o,h,f,m)};function qe(o,h){var f,m=o.G;if(m)for(f=[];m;m=m.G)f.push(m);if(o=o.M,m=h.type||h,typeof h=="string")h=new N(h,o);else if(h instanceof N)h.target=h.target||o;else{var b=h;h=new N(m,o),Wt(h,b)}b=!0;let R,$;if(f)for($=f.length-1;$>=0;$--)R=h.g=f[$],b=Zn(R,m,!0,h)&&b;if(R=h.g=o,b=Zn(R,m,!0,h)&&b,b=Zn(R,m,!1,h)&&b,f)for($=0;$<f.length;$++)R=h.g=f[$],b=Zn(R,m,!1,h)&&b}nt.prototype.N=function(){if(nt.Z.N.call(this),this.i){var o=this.i;for(const h in o.g){const f=o.g[h];for(let m=0;m<f.length;m++)q(f[m]);delete o.g[h],o.h--}}this.G=null},nt.prototype.J=function(o,h,f,m){return this.i.add(String(o),h,!1,f,m)},nt.prototype.K=function(o,h,f,m){return this.i.add(String(o),h,!0,f,m)};function Zn(o,h,f,m){if(h=o.i.g[String(h)],!h)return!0;h=h.concat();let b=!0;for(let R=0;R<h.length;++R){const $=h[R];if($&&!$.da&&$.capture==f){const se=$.listener,Xe=$.ha||$.src;$.fa&&Pe(o.i,$),b=se.call(Xe,m)!==!1&&b}}return b&&!m.defaultPrevented}function fa(o,h){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=d(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(h)>2147483647?-1:a.setTimeout(o,h||0)}function er(o){o.g=fa(()=>{o.g=null,o.i&&(o.i=!1,er(o))},o.l);const h=o.h;o.h=null,o.m.apply(null,h)}class pa extends I{constructor(h,f){super(),this.m=h,this.l=f,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:er(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function tr(o){I.call(this),this.h=o,this.g={}}g(tr,I);var ma=[];function Br(o){K(o.g,function(h,f){this.g.hasOwnProperty(f)&&Ri(h)},o),o.g={}}tr.prototype.N=function(){tr.Z.N.call(this),Br(this)},tr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var As=a.JSON.stringify,bs=a.JSON.parse,ga=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function sn(){}function $r(){}var Dt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nr(){N.call(this,"d")}g(nr,N);function _e(){N.call(this,"c")}g(_e,N);var Mn={},on=null;function Ps(){return on=on||new nt}Mn.Ia="serverreachability";function He(o){N.call(this,Mn.Ia,o)}g(He,N);function Qt(o){const h=Ps();qe(h,new He(h))}Mn.STAT_EVENT="statevent";function rr(o,h){N.call(this,Mn.STAT_EVENT,o),this.stat=h}g(rr,N);function Ge(o){const h=Ps();qe(h,new rr(h,o))}Mn.Ja="timingevent";function Rs(o,h){N.call(this,Mn.Ja,o),this.size=h}g(Rs,N);function sr(o,h){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},h)}function oe(){this.g=!0}oe.prototype.ua=function(){this.g=!1};function It(o,h,f,m,b,R){o.info(function(){if(o.g)if(R){var $="",se=R.split("&");for(let Ee=0;Ee<se.length;Ee++){var Xe=se[Ee].split("=");if(Xe.length>1){const rt=Xe[0];Xe=Xe[1];const wn=rt.split("_");$=wn.length>=2&&wn[1]=="type"?$+(rt+"="+Xe+"&"):$+(rt+"=redacted&")}}}else $=null;else $=R;return"XMLHTTP REQ ("+m+") [attempt "+b+"]: "+h+`
`+f+`
`+$})}function an(o,h,f,m,b,R,$){o.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+b+"]: "+h+`
`+f+`
`+R+" "+$})}function vn(o,h,f,m){o.info(function(){return"XMLHTTP TEXT ("+h+"): "+Kt(o,f)+(m?" "+m:"")})}function qr(o,h){o.info(function(){return"TIMEOUT: "+h})}oe.prototype.info=function(){};function Kt(o,h){if(!o.g)return h;if(!h)return null;try{const R=JSON.parse(h);if(R){for(o=0;o<R.length;o++)if(Array.isArray(R[o])){var f=R[o];if(!(f.length<2)){var m=f[1];if(Array.isArray(m)&&!(m.length<1)){var b=m[0];if(b!="noop"&&b!="stop"&&b!="close")for(let $=1;$<m.length;$++)m[$]=""}}}}return As(R)}catch{return h}}var Hr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ya={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},va;function Mi(){}g(Mi,sn),Mi.prototype.g=function(){return new XMLHttpRequest},va=new Mi;function On(o){return encodeURIComponent(String(o))}function Mt(o){var h=1;o=o.split(":");const f=[];for(;h>0&&o.length;)f.push(o.shift()),h--;return o.length&&f.push(o.join(":")),f}function at(o,h,f,m){this.j=o,this.i=h,this.l=f,this.S=m||1,this.V=new tr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Oi}function Oi(){this.i=null,this.g="",this.h=!1}var Li={},Fi={};function zi(o,h,f){o.M=1,o.A=Ds(Gt(h)),o.u=f,o.R=!0,_a(o,null)}function _a(o,h){o.F=Date.now(),js(o),o.B=Gt(o.A);var f=o.B,m=o.S;Array.isArray(m)||(m=[String(m)]),je(f.i,"t",m),o.C=0,f=o.j.L,o.h=new Oi,o.g=$f(o.j,f?h:null,!o.u),o.P>0&&(o.O=new pa(d(o.Y,o,o.g),o.P)),h=o.V,f=o.g,m=o.ba;var b="readystatechange";Array.isArray(b)||(b&&(ma[0]=b.toString()),b=ma);for(let R=0;R<b.length;R++){const $=da(f,b[R],m||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=o.J?le(o.J):{},o.u?(o.v||(o.v="POST"),h["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,h)):(o.v="GET",o.g.ea(o.B,o.v,null,h)),Qt(),It(o.i,o.v,o.B,o.l,o.S,o.u)}at.prototype.ba=function(o){o=o.target;const h=this.O;h&&lr(o)==3?h.j():this.Y(o)},at.prototype.Y=function(o){try{if(o==this.g)e:{const se=lr(this.g),Xe=this.g.ya(),Ee=this.g.ca();if(!(se<3)&&(se!=3||this.g&&(this.h.h||this.g.la()||Rf(this.g)))){this.K||se!=4||Xe==7||(Xe==8||Ee<=0?Qt(3):Qt(2)),Vs(this);var h=this.g.ca();this.X=h;var f=$u(this);if(this.o=h==200,an(this.i,this.v,this.B,this.l,this.S,se,h),this.o){if(this.U&&!this.L){t:{if(this.g){var m,b=this.g;if((m=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(m)){var R=m;break t}}R=null}if(o=R)vn(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,or(this,o);else{this.o=!1,this.m=3,Ge(12),_n(this),ir(this);break e}}if(this.R){o=!0;let rt;for(;!this.K&&this.C<f.length;)if(rt=qu(this,f),rt==Fi){se==4&&(this.m=4,Ge(14),o=!1),vn(this.i,this.l,null,"[Incomplete Response]");break}else if(rt==Li){this.m=4,Ge(15),vn(this.i,this.l,f,"[Invalid Chunk]"),o=!1;break}else vn(this.i,this.l,rt,null),or(this,rt);if(xa(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),se!=4||f.length!=0||this.h.h||(this.m=1,Ge(16),o=!1),this.o=this.o&&o,!o)vn(this.i,this.l,f,"[Invalid Chunked Response]"),_n(this),ir(this);else if(f.length>0&&!this.W){this.W=!0;var $=this.j;$.g==this&&$.aa&&!$.P&&($.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Yu($),$.P=!0,Ge(11))}}else vn(this.i,this.l,f,null),or(this,f);se==4&&_n(this),this.o&&!this.K&&(se==4?Ff(this.j,this):(this.o=!1,js(this)))}else k_(this.g),h==400&&f.indexOf("Unknown SID")>0?(this.m=3,Ge(12)):(this.m=0,Ge(13)),_n(this),ir(this)}}}catch{}finally{}};function $u(o){if(!xa(o))return o.g.la();const h=Rf(o.g);if(h==="")return"";let f="";const m=h.length,b=lr(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return _n(o),ir(o),"";o.h.i=new a.TextDecoder}for(let R=0;R<m;R++)o.h.h=!0,f+=o.h.i.decode(h[R],{stream:!(b&&R==m-1)});return h.length=0,o.h.g+=f,o.C=0,o.h.g}function xa(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function qu(o,h){var f=o.C,m=h.indexOf(`
`,f);return m==-1?Fi:(f=Number(h.substring(f,m)),isNaN(f)?Li:(m+=1,m+f>h.length?Fi:(h=h.slice(m,m+f),o.C=m+f,h)))}at.prototype.cancel=function(){this.K=!0,_n(this)};function js(o){o.T=Date.now()+o.H,wa(o,o.H)}function wa(o,h){if(o.D!=null)throw Error("WatchDog timer not null");o.D=sr(d(o.aa,o),h)}function Vs(o){o.D&&(a.clearTimeout(o.D),o.D=null)}at.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(qr(this.i,this.B),this.M!=2&&(Qt(),Ge(17)),_n(this),this.m=2,ir(this)):wa(this,this.T-o)};function ir(o){o.j.I==0||o.K||Ff(o.j,o)}function _n(o){Vs(o);var h=o.O;h&&typeof h.dispose=="function"&&h.dispose(),o.O=null,Br(o.V),o.g&&(h=o.g,o.g=null,h.abort(),h.dispose())}function or(o,h){try{var f=o.j;if(f.I!=0&&(f.g==o||Wr(f.h,o))){if(!o.L&&Wr(f.h,o)&&f.I==3){try{var m=f.Ba.g.parse(h)}catch{m=null}if(Array.isArray(m)&&m.length==3){var b=m;if(b[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<o.F)Pa(f),Aa(f);else break e;Xu(f),Ge(18)}}else f.xa=b[1],0<f.xa-f.K&&b[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=sr(d(f.Va,f),6e3));Ia(f.h)<=1&&f.ta&&(f.ta=void 0)}else Jr(f,11)}else if((o.L||f.g==o)&&Pa(f),!w(h))for(b=f.Ba.g.parse(h),h=0;h<b.length;h++){let Ee=b[h];const rt=Ee[0];if(!(rt<=f.K))if(f.K=rt,Ee=Ee[1],f.I==2)if(Ee[0]=="c"){f.M=Ee[1],f.ba=Ee[2];const wn=Ee[3];wn!=null&&(f.ka=wn,f.j.info("VER="+f.ka));const Zr=Ee[4];Zr!=null&&(f.za=Zr,f.j.info("SVER="+f.za));const ur=Ee[5];ur!=null&&typeof ur=="number"&&ur>0&&(m=1.5*ur,f.O=m,f.j.info("backChannelRequestTimeoutMs_="+m)),m=f;const cr=o.g;if(cr){const ja=cr.g?cr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ja){var R=m.h;R.g||ja.indexOf("spdy")==-1&&ja.indexOf("quic")==-1&&ja.indexOf("h2")==-1||(R.j=R.l,R.g=new Set,R.h&&(Ui(R,R.h),R.h=null))}if(m.G){const Ju=cr.g?cr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ju&&(m.wa=Ju,xe(m.J,m.G,Ju))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-o.F,f.j.info("Handshake RTT: "+f.T+"ms")),m=f;var $=o;if(m.na=Bf(m,m.L?m.ba:null,m.W),$.L){Sa(m.h,$);var se=$,Xe=m.O;Xe&&(se.H=Xe),se.D&&(Vs(se),js(se)),m.g=$}else Of(m);f.i.length>0&&ba(f)}else Ee[0]!="stop"&&Ee[0]!="close"||Jr(f,7);else f.I==3&&(Ee[0]=="stop"||Ee[0]=="close"?Ee[0]=="stop"?Jr(f,7):Gu(f):Ee[0]!="noop"&&f.l&&f.l.qa(Ee),f.A=0)}}Qt(4)}catch{}}var Hu=class{constructor(o,h){this.g=o,this.map=h}};function Ea(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ta(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Ia(o){return o.h?1:o.g?o.g.size:0}function Wr(o,h){return o.h?o.h==h:o.g?o.g.has(h):!1}function Ui(o,h){o.g?o.g.add(h):o.h=h}function Sa(o,h){o.h&&o.h==h?o.h=null:o.g&&o.g.has(h)&&o.g.delete(h)}Ea.prototype.cancel=function(){if(this.i=Bi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Bi(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let h=o.i;for(const f of o.g.values())h=h.concat(f.G);return h}return C(o.i)}var Na=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wu(o,h){if(o){o=o.split("&");for(let f=0;f<o.length;f++){const m=o[f].indexOf("=");let b,R=null;m>=0?(b=o[f].substring(0,m),R=o[f].substring(m+1)):b=o[f],h(b,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function xn(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let h;o instanceof xn?(this.l=o.l,Qr(this,o.j),this.o=o.o,this.g=o.g,Kr(this,o.u),this.h=o.h,$i(this,Yr(o.i)),this.m=o.m):o&&(h=String(o).match(Na))?(this.l=!1,Qr(this,h[1]||"",!0),this.o=Gr(h[2]||""),this.g=Gr(h[3]||"",!0),Kr(this,h[4]),this.h=Gr(h[5]||"",!0),$i(this,h[6]||"",!0),this.m=Gr(h[7]||"")):(this.l=!1,this.i=new Te(null,this.l))}xn.prototype.toString=function(){const o=[];var h=this.j;h&&o.push(Xr(h,V,!0),":");var f=this.g;return(f||h=="file")&&(o.push("//"),(h=this.o)&&o.push(Xr(h,V,!0),"@"),o.push(On(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&o.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&o.push("/"),o.push(Xr(f,f.charAt(0)=="/"?Y:L,!0))),(f=this.i.toString())&&o.push("?",f),(f=this.m)&&o.push("#",Xr(f,ee)),o.join("")},xn.prototype.resolve=function(o){const h=Gt(this);let f=!!o.j;f?Qr(h,o.j):f=!!o.o,f?h.o=o.o:f=!!o.g,f?h.g=o.g:f=o.u!=null;var m=o.h;if(f)Kr(h,o.u);else if(f=!!o.h){if(m.charAt(0)!="/")if(this.g&&!this.h)m="/"+m;else{var b=h.h.lastIndexOf("/");b!=-1&&(m=h.h.slice(0,b+1)+m)}if(b=m,b==".."||b==".")m="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){m=b.lastIndexOf("/",0)==0,b=b.split("/");const R=[];for(let $=0;$<b.length;){const se=b[$++];se=="."?m&&$==b.length&&R.push(""):se==".."?((R.length>1||R.length==1&&R[0]!="")&&R.pop(),m&&$==b.length&&R.push("")):(R.push(se),m=!0)}m=R.join("/")}else m=b}return f?h.h=m:f=o.i.toString()!=="",f?$i(h,Yr(o.i)):f=!!o.m,f&&(h.m=o.m),h};function Gt(o){return new xn(o)}function Qr(o,h,f){o.j=f?Gr(h,!0):h,o.j&&(o.j=o.j.replace(/:$/,""))}function Kr(o,h){if(h){if(h=Number(h),isNaN(h)||h<0)throw Error("Bad port number "+h);o.u=h}else o.u=null}function $i(o,h,f){h instanceof Te?(o.i=h,E_(o.i,o.l)):(f||(h=Xr(h,ae)),o.i=new Te(h,o.l))}function xe(o,h,f){o.i.set(h,f)}function Ds(o){return xe(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Gr(o,h){return o?h?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Xr(o,h,f){return typeof o=="string"?(o=encodeURI(o).replace(h,y),f&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function y(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var V=/[#\/\?@]/g,L=/[#\?:]/g,Y=/[#\?]/g,ae=/[#\?@]/g,ee=/#/g;function Te(o,h){this.h=this.g=null,this.i=o||null,this.j=!!h}function we(o){o.g||(o.g=new Map,o.h=0,o.i&&Wu(o.i,function(h,f){o.add(decodeURIComponent(h.replace(/\+/g," ")),f)}))}t=Te.prototype,t.add=function(o,h){we(this),this.i=null,o=mt(this,o);let f=this.g.get(o);return f||this.g.set(o,f=[]),f.push(h),this.h+=1,this};function Re(o,h){we(o),h=mt(o,h),o.g.has(h)&&(o.i=null,o.h-=o.g.get(h).length,o.g.delete(h))}function Ie(o,h){return we(o),h=mt(o,h),o.g.has(h)}t.forEach=function(o,h){we(this),this.g.forEach(function(f,m){f.forEach(function(b){o.call(h,b,m,this)},this)},this)};function ne(o,h){we(o);let f=[];if(typeof h=="string")Ie(o,h)&&(f=f.concat(o.g.get(mt(o,h))));else for(o=Array.from(o.g.values()),h=0;h<o.length;h++)f=f.concat(o[h]);return f}t.set=function(o,h){return we(this),this.i=null,o=mt(this,o),Ie(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[h]),this.h+=1,this},t.get=function(o,h){return o?(o=ne(this,o),o.length>0?String(o[0]):h):h};function je(o,h,f){Re(o,h),f.length>0&&(o.i=null,o.g.set(mt(o,h),C(f)),o.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],h=Array.from(this.g.keys());for(let m=0;m<h.length;m++){var f=h[m];const b=On(f);f=ne(this,f);for(let R=0;R<f.length;R++){let $=b;f[R]!==""&&($+="="+On(f[R])),o.push($)}}return this.i=o.join("&")};function Yr(o){const h=new Te;return h.i=o.i,o.g&&(h.g=new Map(o.g),h.h=o.h),h}function mt(o,h){return h=String(h),o.j&&(h=h.toLowerCase()),h}function E_(o,h){h&&!o.j&&(we(o),o.i=null,o.g.forEach(function(f,m){const b=m.toLowerCase();m!=b&&(Re(this,m),je(this,b,f))},o)),o.j=h}function T_(o,h){const f=new oe;if(a.Image){const m=new Image;m.onload=p(ar,f,"TestLoadImage: loaded",!0,h,m),m.onerror=p(ar,f,"TestLoadImage: error",!1,h,m),m.onabort=p(ar,f,"TestLoadImage: abort",!1,h,m),m.ontimeout=p(ar,f,"TestLoadImage: timeout",!1,h,m),a.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=o}else h(!1)}function I_(o,h){const f=new oe,m=new AbortController,b=setTimeout(()=>{m.abort(),ar(f,"TestPingServer: timeout",!1,h)},1e4);fetch(o,{signal:m.signal}).then(R=>{clearTimeout(b),R.ok?ar(f,"TestPingServer: ok",!0,h):ar(f,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(b),ar(f,"TestPingServer: error",!1,h)})}function ar(o,h,f,m,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),m(f)}catch{}}function S_(){this.g=new ga}function Qu(o){this.i=o.Sb||null,this.h=o.ab||!1}g(Qu,sn),Qu.prototype.g=function(){return new Ca(this.i,this.h)};function Ca(o,h){nt.call(this),this.H=o,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Ca,nt),t=Ca.prototype,t.open=function(o,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=h,this.readyState=1,Hi(this)},t.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const h={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(h.body=o),(this.H||a).fetch(new Request(this.D,h)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qi(this)),this.readyState=0},t.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,Hi(this)),this.g&&(this.readyState=3,Hi(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cf(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cf(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}t.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var h=o.value?o.value:new Uint8Array(0);(h=this.B.decode(h,{stream:!o.done}))&&(this.response=this.responseText+=h)}o.done?qi(this):Hi(this),this.readyState==3&&Cf(this)}},t.Oa=function(o){this.g&&(this.response=this.responseText=o,qi(this))},t.Na=function(o){this.g&&(this.response=o,qi(this))},t.ga=function(){this.g&&qi(this)};function qi(o){o.readyState=4,o.l=null,o.j=null,o.B=null,Hi(o)}t.setRequestHeader=function(o,h){this.A.append(o,h)},t.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],h=this.h.entries();for(var f=h.next();!f.done;)f=f.value,o.push(f[0]+": "+f[1]),f=h.next();return o.join(`\r
`)};function Hi(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function kf(o){let h="";return K(o,function(f,m){h+=m,h+=":",h+=f,h+=`\r
`}),h}function Ku(o,h,f){e:{for(m in f){var m=!1;break e}m=!0}m||(f=kf(f),typeof o=="string"?f!=null&&On(f):xe(o,h,f))}function Fe(o){nt.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(Fe,nt);var N_=/^https?$/i,C_=["POST","PUT"];t=Fe.prototype,t.Fa=function(o){this.H=o},t.ea=function(o,h,f,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);h=h?h.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():va.g(),this.g.onreadystatechange=_(d(this.Ca,this));try{this.B=!0,this.g.open(h,String(o),!0),this.B=!1}catch(R){Af(this,R);return}if(o=f||"",f=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var b in m)f.set(b,m[b]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(const R of m.keys())f.set(R,m.get(R));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(f.keys()).find(R=>R.toLowerCase()=="content-type"),b=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call(C_,h,void 0)>=0)||m||b||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[R,$]of f)this.g.setRequestHeader(R,$);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(R){Af(this,R)}};function Af(o,h){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=h,o.o=5,bf(o),ka(o)}function bf(o){o.A||(o.A=!0,qe(o,"complete"),qe(o,"error"))}t.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,qe(this,"complete"),qe(this,"abort"),ka(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ka(this,!0)),Fe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Pf(this):this.Xa())},t.Xa=function(){Pf(this)};function Pf(o){if(o.h&&typeof i<"u"){if(o.v&&lr(o)==4)setTimeout(o.Ca.bind(o),0);else if(qe(o,"readystatechange"),lr(o)==4){o.h=!1;try{const R=o.ca();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var f;if(!(f=h)){var m;if(m=R===0){let $=String(o.D).match(Na)[1]||null;!$&&a.self&&a.self.location&&($=a.self.location.protocol.slice(0,-1)),m=!N_.test($?$.toLowerCase():"")}f=m}if(f)qe(o,"complete"),qe(o,"success");else{o.o=6;try{var b=lr(o)>2?o.g.statusText:""}catch{b=""}o.l=b+" ["+o.ca()+"]",bf(o)}}finally{ka(o)}}}}function ka(o,h){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const f=o.g;o.g=null,h||qe(o,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function lr(o){return o.g?o.g.readyState:0}t.ca=function(){try{return lr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(o){if(this.g){var h=this.g.responseText;return o&&h.indexOf(o)==0&&(h=h.substring(o.length)),bs(h)}};function Rf(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function k_(o){const h={};o=(o.g&&lr(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<o.length;m++){if(w(o[m]))continue;var f=Mt(o[m]);const b=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const R=h[b]||[];h[b]=R,R.push(f)}Z(h,function(m){return m.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wi(o,h,f){return f&&f.internalChannelParams&&f.internalChannelParams[o]||h}function jf(o){this.za=0,this.i=[],this.j=new oe,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Wi("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Wi("baseRetryDelayMs",5e3,o),this.Za=Wi("retryDelaySeedMs",1e4,o),this.Ta=Wi("forwardChannelMaxRetries",2,o),this.va=Wi("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Ea(o&&o.concurrentRequestLimit),this.Ba=new S_,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=jf.prototype,t.ka=8,t.I=1,t.connect=function(o,h,f,m){Ge(0),this.W=o,this.H=h||{},f&&m!==void 0&&(this.H.OSID=f,this.H.OAID=m),this.F=this.X,this.J=Bf(this,null,this.W),ba(this)};function Gu(o){if(Vf(o),o.I==3){var h=o.V++,f=Gt(o.J);if(xe(f,"SID",o.M),xe(f,"RID",h),xe(f,"TYPE","terminate"),Qi(o,f),h=new at(o,o.j,h),h.M=2,h.A=Ds(Gt(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(h.A.toString(),"")}catch{}!f&&a.Image&&(new Image().src=h.A,f=!0),f||(h.g=$f(h.j,null),h.g.ea(h.A)),h.F=Date.now(),js(h)}Uf(o)}function Aa(o){o.g&&(Yu(o),o.g.cancel(),o.g=null)}function Vf(o){Aa(o),o.v&&(a.clearTimeout(o.v),o.v=null),Pa(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ba(o){if(!Ta(o.h)&&!o.m){o.m=!0;var h=o.Ea;B||v(),D||(B(),D=!0),x.add(h,o),o.D=0}}function A_(o,h){return Ia(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=h.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=sr(d(o.Ea,o,h),zf(o,o.D)),o.D++,!0)}t.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const b=new at(this,this.j,o);let R=this.o;if(this.U&&(R?(R=le(R),Wt(R,this.U)):R=this.U),this.u!==null||this.R||(b.J=R,R=null),this.S)e:{for(var h=0,f=0;f<this.i.length;f++){t:{var m=this.i[f];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(h+=m,h>4096){h=f;break e}if(h===4096||f===this.i.length-1){h=f+1;break e}}h=1e3}else h=1e3;h=Mf(this,b,h),f=Gt(this.J),xe(f,"RID",o),xe(f,"CVER",22),this.G&&xe(f,"X-HTTP-Session-Id",this.G),Qi(this,f),R&&(this.R?h="headers="+On(kf(R))+"&"+h:this.u&&Ku(f,this.u,R)),Ui(this.h,b),this.Ra&&xe(f,"TYPE","init"),this.S?(xe(f,"$req",h),xe(f,"SID","null"),b.U=!0,zi(b,f,null)):zi(b,f,h),this.I=2}}else this.I==3&&(o?Df(this,o):this.i.length==0||Ta(this.h)||Df(this))};function Df(o,h){var f;h?f=h.l:f=o.V++;const m=Gt(o.J);xe(m,"SID",o.M),xe(m,"RID",f),xe(m,"AID",o.K),Qi(o,m),o.u&&o.o&&Ku(m,o.u,o.o),f=new at(o,o.j,f,o.D+1),o.u===null&&(f.J=o.o),h&&(o.i=h.G.concat(o.i)),h=Mf(o,f,1e3),f.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Ui(o.h,f),zi(f,m,h)}function Qi(o,h){o.H&&K(o.H,function(f,m){xe(h,m,f)}),o.l&&K({},function(f,m){xe(h,m,f)})}function Mf(o,h,f){f=Math.min(o.i.length,f);const m=o.l?d(o.l.Ka,o.l,o):null;e:{var b=o.i;let se=-1;for(;;){const Xe=["count="+f];se==-1?f>0?(se=b[0].g,Xe.push("ofs="+se)):se=0:Xe.push("ofs="+se);let Ee=!0;for(let rt=0;rt<f;rt++){var R=b[rt].g;const wn=b[rt].map;if(R-=se,R<0)se=Math.max(0,b[rt].g-100),Ee=!1;else try{R="req"+R+"_"||"";try{var $=wn instanceof Map?wn:Object.entries(wn);for(const[Zr,ur]of $){let cr=ur;l(ur)&&(cr=As(ur)),Xe.push(R+Zr+"="+encodeURIComponent(cr))}}catch(Zr){throw Xe.push(R+"type="+encodeURIComponent("_badmap")),Zr}}catch{m&&m(wn)}}if(Ee){$=Xe.join("&");break e}}$=void 0}return o=o.i.splice(0,f),h.G=o,$}function Of(o){if(!o.g&&!o.v){o.Y=1;var h=o.Da;B||v(),D||(B(),D=!0),x.add(h,o),o.A=0}}function Xu(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=sr(d(o.Da,o),zf(o,o.A)),o.A++,!0)}t.Da=function(){if(this.v=null,Lf(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=sr(d(this.Wa,this),o)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ge(10),Aa(this),Lf(this))};function Yu(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function Lf(o){o.g=new at(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var h=Gt(o.na);xe(h,"RID","rpc"),xe(h,"SID",o.M),xe(h,"AID",o.K),xe(h,"CI",o.F?"0":"1"),!o.F&&o.ia&&xe(h,"TO",o.ia),xe(h,"TYPE","xmlhttp"),Qi(o,h),o.u&&o.o&&Ku(h,o.u,o.o),o.O&&(o.g.H=o.O);var f=o.g;o=o.ba,f.M=1,f.A=Ds(Gt(h)),f.u=null,f.R=!0,_a(f,o)}t.Va=function(){this.C!=null&&(this.C=null,Aa(this),Xu(this),Ge(19))};function Pa(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Ff(o,h){var f=null;if(o.g==h){Pa(o),Yu(o),o.g=null;var m=2}else if(Wr(o.h,h))f=h.G,Sa(o.h,h),m=1;else return;if(o.I!=0){if(h.o)if(m==1){f=h.u?h.u.length:0,h=Date.now()-h.F;var b=o.D;m=Ps(),qe(m,new Rs(m,f)),ba(o)}else Of(o);else if(b=h.m,b==3||b==0&&h.X>0||!(m==1&&A_(o,h)||m==2&&Xu(o)))switch(f&&f.length>0&&(h=o.h,h.i=h.i.concat(f)),b){case 1:Jr(o,5);break;case 4:Jr(o,10);break;case 3:Jr(o,6);break;default:Jr(o,2)}}}function zf(o,h){let f=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(f*=2),f*h}function Jr(o,h){if(o.j.info("Error code "+h),h==2){var f=d(o.bb,o),m=o.Ua;const b=!m;m=new xn(m||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qr(m,"https"),Ds(m),b?T_(m.toString(),f):I_(m.toString(),f)}else Ge(2);o.I=0,o.l&&o.l.pa(h),Uf(o),Vf(o)}t.bb=function(o){o?(this.j.info("Successfully pinged google.com"),Ge(2)):(this.j.info("Failed to ping google.com"),Ge(1))};function Uf(o){if(o.I=0,o.ja=[],o.l){const h=Bi(o.h);(h.length!=0||o.i.length!=0)&&(P(o.ja,h),P(o.ja,o.i),o.h.i.length=0,C(o.i),o.i.length=0),o.l.oa()}}function Bf(o,h,f){var m=f instanceof xn?Gt(f):new xn(f);if(m.g!="")h&&(m.g=h+"."+m.g),Kr(m,m.u);else{var b=a.location;m=b.protocol,h=h?h+"."+b.hostname:b.hostname,b=+b.port;const R=new xn(null);m&&Qr(R,m),h&&(R.g=h),b&&Kr(R,b),f&&(R.h=f),m=R}return f=o.G,h=o.wa,f&&h&&xe(m,f,h),xe(m,"VER",o.ka),Qi(o,m),m}function $f(o,h,f){if(h&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return h=o.Aa&&!o.ma?new Fe(new Qu({ab:f})):new Fe(o.ma),h.Fa(o.L),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qf(){}t=qf.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Ra(){}Ra.prototype.g=function(o,h){return new Ot(o,h)};function Ot(o,h){nt.call(this),this.g=new jf(h),this.l=o,this.h=h&&h.messageUrlParams||null,o=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(o?o["X-WebChannel-Content-Type"]=h.messageContentType:o={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.sa&&(o?o["X-WebChannel-Client-Profile"]=h.sa:o={"X-WebChannel-Client-Profile":h.sa}),this.g.U=o,(o=h&&h.Qb)&&!w(o)&&(this.g.u=o),this.A=h&&h.supportsCrossDomainXhr||!1,this.v=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.G=h,o=this.h,o!==null&&h in o&&(o=this.h,h in o&&delete o[h])),this.j=new Ms(this)}g(Ot,nt),Ot.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ot.prototype.close=function(){Gu(this.g)},Ot.prototype.o=function(o){var h=this.g;if(typeof o=="string"){var f={};f.__data__=o,o=f}else this.v&&(f={},f.__data__=As(o),o=f);h.i.push(new Hu(h.Ya++,o)),h.I==3&&ba(h)},Ot.prototype.N=function(){this.g.l=null,delete this.j,Gu(this.g),delete this.g,Ot.Z.N.call(this)};function Hf(o){nr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var h=o.__sm__;if(h){e:{for(const f in h){o=f;break e}o=void 0}(this.i=o)&&(o=this.i,h=h!==null&&o in h?h[o]:void 0),this.data=h}else this.data=o}g(Hf,nr);function Wf(){_e.call(this),this.status=1}g(Wf,_e);function Ms(o){this.g=o}g(Ms,qf),Ms.prototype.ra=function(){qe(this.g,"a")},Ms.prototype.qa=function(o){qe(this.g,new Hf(o))},Ms.prototype.pa=function(o){qe(this.g,new Wf)},Ms.prototype.oa=function(){qe(this.g,"b")},Ra.prototype.createWebChannel=Ra.prototype.g,Ot.prototype.send=Ot.prototype.o,Ot.prototype.open=Ot.prototype.m,Ot.prototype.close=Ot.prototype.close,J0=function(){return new Ra},Y0=function(){return Ps()},X0=Mn,Dh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Hr.NO_ERROR=0,Hr.TIMEOUT=8,Hr.HTTP_ERROR=6,ml=Hr,ya.COMPLETE="complete",G0=ya,$r.EventType=Dt,Dt.OPEN="a",Dt.CLOSE="b",Dt.ERROR="c",Dt.MESSAGE="d",nt.prototype.listen=nt.prototype.J,uo=$r,Fe.prototype.listenOnce=Fe.prototype.K,Fe.prototype.getLastError=Fe.prototype.Ha,Fe.prototype.getLastErrorCode=Fe.prototype.ya,Fe.prototype.getStatus=Fe.prototype.ca,Fe.prototype.getResponseJson=Fe.prototype.La,Fe.prototype.getResponseText=Fe.prototype.la,Fe.prototype.send=Fe.prototype.ea,Fe.prototype.setWithCredentials=Fe.prototype.Fa,K0=Fe}).apply(typeof Ya<"u"?Ya:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ci="12.9.0";function aE(t){Ci=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=new U0("@firebase/firestore");function Ls(){return vs.logLevel}function H(t,...e){if(vs.logLevel<=pe.DEBUG){const n=e.map(Yd);vs.debug(`Firestore (${Ci}): ${t}`,...n)}}function Xn(t,...e){if(vs.logLevel<=pe.ERROR){const n=e.map(Yd);vs.error(`Firestore (${Ci}): ${t}`,...n)}}function _s(t,...e){if(vs.logLevel<=pe.WARN){const n=e.map(Yd);vs.warn(`Firestore (${Ci}): ${t}`,...n)}}function Yd(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Z0(t,r,n)}function Z0(t,e,n){let r=`FIRESTORE (${Ci}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Xn(r),new Error(r)}function ye(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Z0(e,s,r)}function re(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Ni{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class uE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cE{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ye(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new cs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cs,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cs)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ye(typeof r.accessToken=="string",31837,{l:r}),new ev(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ye(e===null||typeof e=="string",2055,{h:e}),new _t(e)}}class hE{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class dE{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new hE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ym{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fE{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,W2(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ye(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ym(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ye(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new ym(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=pE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Mh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ac(s)===Ac(i)?ce(s,i):Ac(s)?1:-1}return ce(t.length,e.length)}const mE=55296,gE=57343;function Ac(t){const e=t.charCodeAt(0);return e>=mE&&e<=gE}function vi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vm="__name__";class In{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return In.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof In?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=In.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ce(e.length,n.length)}static compareSegments(e,n){const r=In.isNumericId(e),s=In.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?In.extractNumericId(e).compare(In.extractNumericId(n)):Mh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ar.fromString(e.substring(4,e.length-2))}}class ke extends In{construct(e,n,r){return new ke(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ke(n)}static emptyPath(){return new ke([])}}const yE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends In{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return yE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vm}static keyField(){return new ct([vm])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(ke.fromString(e))}static fromName(e){return new G(ke.fromString(e).popFirst(5))}static empty(){return new G(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ke.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tv(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vE(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _m(t){if(!G.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xm(t){if(G.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nv(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Zd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function hs(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zd(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ke(t,e){const n={typeString:t};return e&&(n.value=e),n}function aa(t,e){if(!nv(t))throw new Q(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new Q(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wm=-62135596800,Em=1e6;class Ae{static now(){return Ae.fromMillis(Date.now())}static fromDate(e){return Ae.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Em);return new Ae(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<wm)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Em}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ae._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(aa(e,Ae._jsonSchema))return new Ae(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-wm;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ae._jsonSchemaVersion="firestore/timestamp/1.0",Ae._jsonSchema={type:Ke("string",Ae._jsonSchemaVersion),seconds:Ke("number"),nanoseconds:Ke("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{static fromTimestamp(e){return new te(e)}static min(){return new te(new Ae(0,0))}static max(){return new te(new Ae(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Go=-1;function _E(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new Ae(n+1,0):new Ae(n,r));return new jr(s,G.empty(),e)}function xE(t){return new jr(t.readTime,t.key,Go)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(te.min(),G.empty(),Go)}static max(){return new jr(te.max(),G.empty(),Go)}}function wE(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class TE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==EE)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(s=>s?O.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new O((r,s)=>{const i=e.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(p=>{a[d]=p,++l,l===i&&r(a)},p=>s(p))}})}static doWhile(e,n){return new O((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function IE(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ai(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ef=-1;function ku(t){return t==null}function Jl(t){return t===0&&1/t==-1/0}function SE(t){return typeof t=="number"&&Number.isInteger(t)&&!Jl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rv="";function NE(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Tm(e)),e=CE(t.get(n),e);return Tm(e)}function CE(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case rv:n+="";break;default:n+=i}}return n}function Tm(t){return t+rv+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ts(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function sv(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ja(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ja(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ja(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ja(this.root,e,this.comparator,!0)}}class Ja{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Sm(this.data.getIterator())}getIteratorFrom(e){return new Sm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class Sm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new dn([])}unionWith(e){let n=new tt(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new dn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return vi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new iv("Invalid base64 string: "+i):i}}(e);return new ft(n)}static fromUint8Array(e){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new ft(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ft.EMPTY_BYTE_STRING=new ft("");const kE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vr(t){if(ye(!!t,39018),typeof t=="string"){let e=0;const n=kE.exec(t);if(ye(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Dr(t){return typeof t=="string"?ft.fromBase64String(t):ft.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="server_timestamp",av="__type__",lv="__previous_value__",uv="__local_write_time__";function tf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[av])==null?void 0:r.stringValue)===ov}function Au(t){const e=t.mapValue.fields[lv];return tf(e)?Au(e):e}function Xo(t){const e=Vr(t.mapValue.fields[uv].timestampValue);return new Ae(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{constructor(e,n,r,s,i,a,l,c,d,p,g){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=p,this.apiKey=g}}const Zl="(default)";class Yo{constructor(e,n){this.projectId=e,this.database=n||Zl}static empty(){return new Yo("","")}get isDefaultDatabase(){return this.database===Zl}isEqual(e){return e instanceof Yo&&e.projectId===this.projectId&&e.database===this.database}}function bE(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yo(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cv="__type__",PE="__max__",Za={mapValue:{}},hv="__vector__",eu="value";function Mr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tf(t)?4:jE(t)?9007199254740991:RE(t)?10:11:J(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=Mr(t);if(n!==Mr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Xo(t).isEqual(Xo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Vr(s.timestampValue),l=Vr(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Dr(s.bytesValue).isEqual(Dr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ue(s.doubleValue),l=Ue(i.doubleValue);return a===l?Jl(a)===Jl(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return vi(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Im(a)!==Im(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!jn(a[c],l[c])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function Jo(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function _i(t,e){if(t===e)return 0;const n=Mr(t),r=Mr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Ue(i.integerValue||i.doubleValue),c=Ue(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Nm(t.timestampValue,e.timestampValue);case 4:return Nm(Xo(t),Xo(e));case 5:return Mh(t.stringValue,e.stringValue);case 6:return function(i,a){const l=Dr(i),c=Dr(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let d=0;d<l.length&&d<c.length;d++){const p=ce(l[d],c[d]);if(p!==0)return p}return ce(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=ce(Ue(i.latitude),Ue(a.latitude));return l!==0?l:ce(Ue(i.longitude),Ue(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Cm(t.arrayValue,e.arrayValue);case 10:return function(i,a){var _,C,P,j;const l=i.fields||{},c=a.fields||{},d=(_=l[eu])==null?void 0:_.arrayValue,p=(C=c[eu])==null?void 0:C.arrayValue,g=ce(((P=d==null?void 0:d.values)==null?void 0:P.length)||0,((j=p==null?void 0:p.values)==null?void 0:j.length)||0);return g!==0?g:Cm(d,p)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Za.mapValue&&a===Za.mapValue)return 0;if(i===Za.mapValue)return 1;if(a===Za.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=a.fields||{},p=Object.keys(d);c.sort(),p.sort();for(let g=0;g<c.length&&g<p.length;++g){const _=Mh(c[g],p[g]);if(_!==0)return _;const C=_i(l[c[g]],d[p[g]]);if(C!==0)return C}return ce(c.length,p.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function Nm(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Vr(t),r=Vr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function Cm(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=_i(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function xi(t){return Oh(t)}function Oh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Vr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Dr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Oh(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Oh(n.fields[a])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function gl(t){switch(Mr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Au(t);return e?16+gl(e):16;case 5:return 2*t.stringValue.length;case 6:return Dr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+gl(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ts(r.fields,(i,a)=>{s+=i.length+gl(a)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function Lh(t){return!!t&&"integerValue"in t}function nf(t){return!!t&&"arrayValue"in t}function km(t){return!!t&&"nullValue"in t}function Am(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yl(t){return!!t&&"mapValue"in t}function RE(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[cv])==null?void 0:r.stringValue)===hv}function So(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ts(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=So(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=So(t.arrayValue.values[n]);return e}return{...t}}function jE(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===PE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(e){this.value=e}static empty(){return new Jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!yl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=So(n)}setAll(e){let n=ct.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=So(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());yl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];yl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ts(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Jt(So(this.value))}}function dv(t){const e=[];return Ts(t.fields,(n,r)=>{const s=new ct([n]);if(yl(r)){const i=dv(r.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new dn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e,n,r,s,i,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new wt(e,0,te.min(),te.min(),te.min(),Jt.empty(),0)}static newFoundDocument(e,n,r,s){return new wt(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new wt(e,2,n,te.min(),te.min(),Jt.empty(),0)}static newUnknownDocument(e,n){return new wt(e,3,n,te.min(),te.min(),Jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof wt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new wt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n){this.position=e,this.inclusive=n}}function bm(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(a.referenceValue),n.key):r=_i(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Pm(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,n="asc"){this.field=e,this.dir=n}}function VE(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{}class Je extends fv{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ME(e,n,r):n==="array-contains"?new FE(e,r):n==="in"?new zE(e,r):n==="not-in"?new UE(e,r):n==="array-contains-any"?new BE(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new OE(e,r):new LE(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(_i(n,this.value)):n!==null&&Mr(this.value)===Mr(n)&&this.matchesComparison(_i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends fv{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new Vn(e,n)}matches(e){return pv(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pv(t){return t.op==="and"}function mv(t){return DE(t)&&pv(t)}function DE(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Fh(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+xi(t.value);if(mv(t))return t.filters.map(e=>Fh(e)).join(",");{const e=t.filters.map(n=>Fh(n)).join(",");return`${t.op}(${e})`}}function gv(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&jn(r.value,s.value)}(t,e):t instanceof Vn?function(r,s){return s instanceof Vn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&gv(a,s.filters[l]),!0):!1}(t,e):void J(19439)}function yv(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${xi(n.value)}`}(t):t instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(yv).join(" ,")+"}"}(t):"Filter"}class ME extends Je{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class OE extends Je{constructor(e,n){super(e,"in",n),this.keys=vv("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class LE extends Je{constructor(e,n){super(e,"not-in",n),this.keys=vv("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vv(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class FE extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return nf(n)&&Jo(n.arrayValue,this.value)}}class zE extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jo(this.value.arrayValue,n)}}class UE extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Jo(this.value.arrayValue,n)}}class BE extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!nf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n=null,r=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Rm(t,e=null,n=[],r=[],s=null,i=null,a=null){return new $E(t,e,n,r,s,i,a)}function rf(t){const e=re(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Fh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ku(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>xi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>xi(r)).join(",")),e.Te=n}return e.Te}function sf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!VE(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gv(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Pm(t.startAt,e.startAt)&&Pm(t.endAt,e.endAt)}function zh(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(e,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function qE(t,e,n,r,s,i,a,l){return new bu(t,e,n,r,s,i,a,l)}function of(t){return new bu(t)}function jm(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function HE(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function WE(t){return t.collectionGroup!==null}function No(t){const e=re(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new tt(ct.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new nu(i,r))}),n.has(ct.keyField().canonicalString())||e.Ie.push(new nu(ct.keyField(),r))}return e.Ie}function An(t){const e=re(t);return e.Ee||(e.Ee=QE(e,No(t))),e.Ee}function QE(t,e){if(t.limitType==="F")return Rm(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new nu(s.field,i)});const n=t.endAt?new tu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new tu(t.startAt.position,t.startAt.inclusive):null;return Rm(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Uh(t,e,n){return new bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Pu(t,e){return sf(An(t),An(e))&&t.limitType===e.limitType}function _v(t){return`${rf(An(t))}|lt:${t.limitType}`}function Fs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yv(s)).join(", ")}]`),ku(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>xi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>xi(s)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function Ru(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of No(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const d=bm(a,l,c);return a.inclusive?d<=0:d<0}(r.startAt,No(r),s)||r.endAt&&!function(a,l,c){const d=bm(a,l,c);return a.inclusive?d>=0:d>0}(r.endAt,No(r),s))}(t,e)}function KE(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xv(t){return(e,n)=>{let r=!1;for(const s of No(t)){const i=GE(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function GE(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,a,l){const c=a.data.field(i),d=l.data.field(i);return c!==null&&d!==null?_i(c,d):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return sv(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE=new Le(G.comparator);function Yn(){return XE}const wv=new Le(G.comparator);function co(...t){let e=wv;for(const n of t)e=e.insert(n.key,n);return e}function Ev(t){let e=wv;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function as(){return Co()}function Tv(){return Co()}function Co(){return new Is(t=>t.toString(),(t,e)=>t.isEqual(e))}const YE=new Le(G.comparator),JE=new tt(G.comparator);function he(...t){let e=JE;for(const n of t)e=e.add(n);return e}const ZE=new tt(ce);function eT(){return ZE}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jl(e)?"-0":e}}function Iv(t){return{integerValue:""+t}}function tT(t,e){return SE(e)?Iv(e):af(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(){this._=void 0}}function nT(t,e,n){return t instanceof ru?function(s,i){const a={fields:{[av]:{stringValue:ov},[uv]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&tf(i)&&(i=Au(i)),i&&(a.fields[lv]=i),{mapValue:a}}(n,e):t instanceof Zo?Nv(t,e):t instanceof ea?Cv(t,e):function(s,i){const a=Sv(s,i),l=Vm(a)+Vm(s.Ae);return Lh(a)&&Lh(s.Ae)?Iv(l):af(s.serializer,l)}(t,e)}function rT(t,e,n){return t instanceof Zo?Nv(t,e):t instanceof ea?Cv(t,e):n}function Sv(t,e){return t instanceof su?function(r){return Lh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ru extends ju{}class Zo extends ju{constructor(e){super(),this.elements=e}}function Nv(t,e){const n=kv(e);for(const r of t.elements)n.some(s=>jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class ea extends ju{constructor(e){super(),this.elements=e}}function Cv(t,e){let n=kv(e);for(const r of t.elements)n=n.filter(s=>!jn(s,r));return{arrayValue:{values:n}}}class su extends ju{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Vm(t){return Ue(t.integerValue||t.doubleValue)}function kv(t){return nf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sT(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Zo&&s instanceof Zo||r instanceof ea&&s instanceof ea?vi(r.elements,s.elements,jn):r instanceof su&&s instanceof su?jn(r.Ae,s.Ae):r instanceof ru&&s instanceof ru}(t.transform,e.transform)}class iT{constructor(e,n){this.version=e,this.transformResults=n}}class bn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new bn}static exists(e){return new bn(void 0,e)}static updateTime(e){return new bn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Vu{}function Av(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lf(t.key,bn.none()):new la(t.key,t.data,bn.none());{const n=t.data,r=Jt.empty();let s=new tt(ct.comparator);for(let i of e.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new Ss(t.key,r,new dn(s.toArray()),bn.none())}}function oT(t,e,n){t instanceof la?function(s,i,a){const l=s.value.clone(),c=Mm(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ss?function(s,i,a){if(!vl(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Mm(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(bv(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function ko(t,e,n,r){return t instanceof la?function(i,a,l,c){if(!vl(i.precondition,a))return l;const d=i.value.clone(),p=Om(i.fieldTransforms,c,a);return d.setAll(p),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ss?function(i,a,l,c){if(!vl(i.precondition,a))return l;const d=Om(i.fieldTransforms,c,a),p=a.data;return p.setAll(bv(i)),p.setAll(d),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,a,l){return vl(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function aT(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Sv(r.transform,s||null);i!=null&&(n===null&&(n=Jt.empty()),n.set(r.field,i))}return n||null}function Dm(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vi(r,s,(i,a)=>sT(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class la extends Vu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends Vu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function bv(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Mm(t,e,n){const r=new Map;ye(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);r.set(i.field,rT(a,l,n[s]))}return r}function Om(t,e,n){const r=new Map;for(const s of t){const i=s.transform,a=n.data.field(s.field);r.set(s.field,nT(i,a,e))}return r}class lf extends Vu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lT extends Vu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&oT(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ko(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Tv();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=Av(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),he())}isEqual(e){return this.batchId===e.batchId&&vi(this.mutations,e.mutations,(n,r)=>Dm(n,r))&&vi(this.baseMutations,e.baseMutations,(n,r)=>Dm(n,r))}}class uf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ye(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return YE}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new uf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We,fe;function dT(t){switch(t){case F.OK:return J(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function Pv(t){if(t===void 0)return Xn("GRPC error has no .code"),F.UNKNOWN;switch(t){case We.OK:return F.OK;case We.CANCELLED:return F.CANCELLED;case We.UNKNOWN:return F.UNKNOWN;case We.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case We.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case We.INTERNAL:return F.INTERNAL;case We.UNAVAILABLE:return F.UNAVAILABLE;case We.UNAUTHENTICATED:return F.UNAUTHENTICATED;case We.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case We.NOT_FOUND:return F.NOT_FOUND;case We.ALREADY_EXISTS:return F.ALREADY_EXISTS;case We.PERMISSION_DENIED:return F.PERMISSION_DENIED;case We.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case We.ABORTED:return F.ABORTED;case We.OUT_OF_RANGE:return F.OUT_OF_RANGE;case We.UNIMPLEMENTED:return F.UNIMPLEMENTED;case We.DATA_LOSS:return F.DATA_LOSS;default:return J(39323,{code:t})}}(fe=We||(We={}))[fe.OK=0]="OK",fe[fe.CANCELLED=1]="CANCELLED",fe[fe.UNKNOWN=2]="UNKNOWN",fe[fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fe[fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fe[fe.NOT_FOUND=5]="NOT_FOUND",fe[fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",fe[fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",fe[fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",fe[fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fe[fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fe[fe.ABORTED=10]="ABORTED",fe[fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",fe[fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",fe[fe.INTERNAL=13]="INTERNAL",fe[fe.UNAVAILABLE=14]="UNAVAILABLE",fe[fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=new Ar([4294967295,4294967295],0);function Lm(t){const e=fT().encode(t),n=new Q0;return n.update(e),new Uint8Array(n.digest())}function Fm(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ar([n,r],0),new Ar([s,i],0)]}class cf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ho(`Invalid padding: ${n}`);if(r<0)throw new ho(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ho(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ho(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=Ar.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(Ar.fromNumber(r)));return s.compare(pT)===1&&(s=new Ar([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Lm(e),[r,s]=Fm(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new cf(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=Lm(e),[r,s]=Fm(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.be(a)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ho extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ua.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Du(te.min(),s,new Le(ce),Yn(),he())}}class ua{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ua(r,n,he(),he(),he())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class Rv{constructor(e,n){this.targetId=e,this.Ce=n}}class jv{constructor(e,n,r=ft.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class zm{constructor(){this.ve=0,this.Fe=Um(),this.Me=ft.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=he(),n=he(),r=he();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new ua(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Um()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ye(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class mT{constructor(e){this.Ge=e,this.ze=new Map,this.je=Yn(),this.He=el(),this.Je=el(),this.Ze=new Le(ce)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(zh(i))if(r===0){const a=new G(i.path);this.et(n,a,wt.newNoDocument(a,te.min()))}else ye(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Dr(r).toUint8Array()}catch(c){if(c instanceof iv)return _s("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new cf(a,s,i)}catch(c){return _s(c instanceof ho?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&zh(l.target)){const c=new G(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,wt.newNoDocument(c,e))}i.Be&&(n.set(a,i.ke()),i.Ke())}});let r=he();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new Du(e,n,this.Ze,this.je,r);return this.je=Yn(),this.He=el(),this.Je=el(),this.Ze=new Le(ce),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new zm,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new tt(ce),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new tt(ce),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zm),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function el(){return new Le(G.comparator)}function Um(){return new Le(G.comparator)}const gT={asc:"ASCENDING",desc:"DESCENDING"},yT={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vT={and:"AND",or:"OR"};class _T{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Bh(t,e){return t.useProto3Json||ku(e)?e:{value:e}}function iu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Vv(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function xT(t,e){return iu(t,e.toTimestamp())}function Pn(t){return ye(!!t,49232),te.fromTimestamp(function(n){const r=Vr(n);return new Ae(r.seconds,r.nanos)}(t))}function hf(t,e){return $h(t,e).canonicalString()}function $h(t,e){const n=function(s){return new ke(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dv(t){const e=ke.fromString(t);return ye(zv(e),10190,{key:e.toString()}),e}function qh(t,e){return hf(t.databaseId,e.path)}function bc(t,e){const n=Dv(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(Ov(n))}function Mv(t,e){return hf(t.databaseId,e)}function wT(t){const e=Dv(t);return e.length===4?ke.emptyPath():Ov(e)}function Hh(t){return new ke(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ov(t){return ye(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Bm(t,e,n){return{name:qh(t,e),fields:n.value.mapValue.fields}}function ET(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,p){return d.useProto3Json?(ye(p===void 0||typeof p=="string",58123),ft.fromBase64String(p||"")):(ye(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),ft.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const p=d.code===void 0?F.UNKNOWN:Pv(d.code);return new Q(p,d.message||"")}(a);n=new jv(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bc(t,r.document.name),i=Pn(r.document.updateTime),a=r.document.createTime?Pn(r.document.createTime):te.min(),l=new Jt({mapValue:{fields:r.document.fields}}),c=wt.newFoundDocument(s,i,a,l),d=r.targetIds||[],p=r.removedTargetIds||[];n=new _l(d,p,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bc(t,r.document),i=r.readTime?Pn(r.readTime):te.min(),a=wt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new _l([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bc(t,r.document),i=r.removedTargetIds||[];n=new _l([],i,s,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new hT(s,i),l=r.targetId;n=new Rv(l,a)}}return n}function TT(t,e){let n;if(e instanceof la)n={update:Bm(t,e.key,e.value)};else if(e instanceof lf)n={delete:qh(t,e.key)};else if(e instanceof Ss)n={update:Bm(t,e.key,e.data),updateMask:RT(e.fieldMask)};else{if(!(e instanceof lT))return J(16599,{dt:e.type});n={verify:qh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof ru)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Zo)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ea)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof su)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:xT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function IT(t,e){return t&&t.length>0?(ye(e!==void 0,14353),t.map(n=>function(s,i){let a=s.updateTime?Pn(s.updateTime):Pn(i);return a.isEqual(te.min())&&(a=Pn(i)),new iT(a,s.transformResults||[])}(n,e))):[]}function ST(t,e){return{documents:[Mv(t,e.path)]}}function NT(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Mv(t,s);const i=function(d){if(d.length!==0)return Fv(Vn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(p=>function(_){return{field:zs(_.field),direction:AT(_.dir)}}(p))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Bh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function CT(t){let e=wT(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ye(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(g){const _=Lv(g);return _ instanceof Vn&&mv(_)?_.getFilters():[_]}(n.where));let a=[];n.orderBy&&(a=function(g){return g.map(_=>function(P){return new nu(Us(P.field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(_))}(n.orderBy));let l=null;n.limit&&(l=function(g){let _;return _=typeof g=="object"?g.value:g,ku(_)?null:_}(n.limit));let c=null;n.startAt&&(c=function(g){const _=!!g.before,C=g.values||[];return new tu(C,_)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const _=!g.before,C=g.values||[];return new tu(C,_)}(n.endAt)),qE(e,s,a,i,l,"F",c,d)}function kT(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lv(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Us(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Us(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Us(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Us(n.unaryFilter.field);return Je.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return Je.create(Us(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(r=>Lv(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function AT(t){return gT[t]}function bT(t){return yT[t]}function PT(t){return vT[t]}function zs(t){return{fieldPath:t.canonicalString()}}function Us(t){return ct.fromServerFormat(t.fieldPath)}function Fv(t){return t instanceof Je?function(n){if(n.op==="=="){if(Am(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NAN"}};if(km(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Am(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NAN"}};if(km(n.value))return{unaryFilter:{field:zs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zs(n.field),op:bT(n.op),value:n.value}}}(t):t instanceof Vn?function(n){const r=n.getFilters().map(s=>Fv(s));return r.length===1?r[0]:{compositeFilter:{op:PT(n.op),filters:r}}}(t):J(54877,{filter:t})}function RT(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function zv(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Uv(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r,s,i=te.min(),a=te.min(),l=ft.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new vr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new vr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.yt=e}}function VT(t){const e=CT({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Uh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.Sn=new MT}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(jr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class MT{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new tt(ke.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tt(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $m={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bv=41943040;class At{static withCacheSize(e){return new At(e,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */At.DEFAULT_COLLECTION_PERCENTILE=10,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,At.DEFAULT=new At(Bv,At.DEFAULT_COLLECTION_PERCENTILE,At.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),At.DISABLED=new At(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wi(0)}static ar(){return new wi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm="LruGarbageCollector",OT=1048576;function Hm([t,e],[n,r]){const s=ce(t,n);return s===0?ce(e,r):s}class LT{constructor(e){this.Pr=e,this.buffer=new tt(Hm),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Hm(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class FT{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(qm,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ai(n)?H(qm,"Ignoring IndexedDB error during garbage collection: ",n):await ki(n)}await this.Ar(3e5)})}}class zT{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Cu.ce);const r=new LT(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve($m)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),$m):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,a,l,c,d;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(g=>(g>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s))).next(g=>(r=g,l=Date.now(),this.removeTargets(e,r,n))).next(g=>(i=g,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(g=>(d=Date.now(),Ls()<=pe.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${g} documents in `+(d-c)+`ms
Total Duration: ${d-p}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:g})))}}function UT(t,e){return new zT(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(){this.changes=new Is(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,wt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ko(r.mutation,s,dn.empty(),Ae.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,he()).next(()=>r))}getLocalViewOfDocuments(e,n,r=he()){const s=as();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let a=co();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=as();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,he()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let i=Yn();const a=Co(),l=function(){return Co()}();return n.forEach((c,d)=>{const p=r.get(d.key);s.has(d.key)&&(p===void 0||p.mutation instanceof Ss)?i=i.insert(d.key,d):p!==void 0?(a.set(d.key,p.mutation.getFieldMask()),ko(p.mutation,d,p.mutation.getFieldMask(),Ae.now())):a.set(d.key,dn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,p)=>a.set(d,p)),n.forEach((d,p)=>l.set(d,new $T(p,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Co();let s=new Le((a,l)=>a-l),i=he();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let p=r.get(c)||dn.empty();p=l.applyToLocalView(d,p),r.set(c,p);const g=(s.get(l.batchId)||he()).add(c);s=s.insert(l.batchId,g)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,p=c.value,g=Tv();p.forEach(_=>{if(!i.has(_)){const C=Av(n.get(_),r.get(_));C!==null&&g.set(_,C),i=i.add(_)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,g))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return HE(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):O.resolve(as());let l=Go,c=i;return a.next(d=>O.forEach(d,(p,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(p)?O.resolve():this.remoteDocumentCache.getEntry(e,p).next(_=>{c=c.insert(p,_)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,he())).next(p=>({batchId:l,changes:Ev(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let a=co();return this.indexManager.getCollectionParents(e,i).next(l=>O.forEach(l,c=>{const d=function(g,_){return new bu(_,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(p=>{p.forEach((g,_)=>{a=a.insert(g,_)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(a=>{i.forEach((c,d)=>{const p=d.getKey();a.get(p)===null&&(a=a.insert(p,wt.newInvalidDocument(p)))});let l=co();return a.forEach((c,d)=>{const p=i.get(c);p!==void 0&&ko(p.mutation,d,dn.empty(),Ae.now()),Ru(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Pn(s.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:VT(s.bundledQuery),readTime:Pn(s.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT{constructor(){this.overlays=new Le(G.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=as();return O.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const s=as(),i=n.length+1,a=new G(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return O.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Le((d,p)=>d-p);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let p=i.get(d.largestBatchId);p===null&&(p=as(),i=i.insert(d.largestBatchId,p)),p.set(d.getKey(),d)}}const l=as(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,p)=>l.set(d,p)),!(l.size()>=s)););return O.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new cT(n,r));let i=this.Lr.get(n);i===void 0&&(i=he(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this.sessionToken=ft.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(){this.kr=new tt(st.Kr),this.qr=new tt(st.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new st(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new st(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new G(new ke([])),r=new st(n,e),s=new st(n,e+1),i=[];return this.qr.forEachInRange([r,s],a=>{this.Wr(a),i.push(a.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new G(new ke([])),r=new st(n,e),s=new st(n,e+1);let i=he();return this.qr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(e){const n=new st(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class st{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return G.comparator(e.key,n.key)||ce(e.Hr,n.Hr)}static Ur(e,n){return ce(e.Hr,n.Hr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new tt(st.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new uT(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new st(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return O.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?ef:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new st(n,0),s=new st(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),O.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(ce);return n.forEach(s=>{const i=new st(s,0),a=new st(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],l=>{r=r.add(l.Hr)})}),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const a=new st(new G(i),0);let l=new tt(ce);return this.Jr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Hr)),!0)},a),O.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ye(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,s=>{const i=new st(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new st(n,0),s=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(e){this.ti=e,this.docs=function(){return new Le(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():wt.newInvalidDocument(n))}getEntries(e,n){let r=Yn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():wt.newInvalidDocument(s))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Yn();const a=n.path,l=new G(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:p}}=c.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||wE(xE(p),r)<=0||(s.has(p.key)||Ru(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return O.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ni(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new XT(this)}getSize(e){return O.resolve(this.size)}}class XT extends BT{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.persistence=e,this.ri=new Is(n=>rf(n),sf),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.ii=0,this.si=new df,this.targetCount=0,this.oi=wi._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new wi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),O.waitFor(i).next(()=>s)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),O.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,n){this._i={},this.overlays={},this.ai=new Cu(0),this.ui=!1,this.ui=!0,this.ci=new QT,this.referenceDelegate=e(this),this.li=new YT(this),this.indexManager=new DT,this.remoteDocumentCache=function(s){return new GT(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new jT(n),this.Pi=new HT(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new WT,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new KT(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new JT(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return O.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class JT extends TE{constructor(e){super(),this.currentSequenceNumber=e}}class ff{constructor(e){this.persistence=e,this.Ri=new df,this.Ai=null}static Vi(e){return new ff(e)}get di(){if(this.Ai)return this.Ai;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,r=>{const s=G.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class ou{constructor(e,n){this.persistence=e,this.fi=new Is(r=>NE(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=UT(this,n)}static Vi(e,n){return new ou(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return O.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?O.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,n).next(l=>{l||(r++,i.removeEntry(a,te.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=gl(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return O.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=he(),s=he();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return $w()?8:IE(Uw())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new ZT;return this.ys(e,n,a).next(l=>{if(i.result=l,this.As)return this.ws(e,n,a,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Ls()<=pe.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Fs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(Ls()<=pe.DEBUG&&H("QueryEngine","Query:",Fs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ls()<=pe.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Fs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):O.resolve())}gs(e,n){if(jm(n))return O.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Uh(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const a=he(...i);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,l);return this.Ss(n,d,a,c.readTime)?this.gs(e,Uh(n,null,"F")):this.Ds(e,d,n,c)}))})))}ps(e,n,r,s){return jm(n)||s.isEqual(te.min())?O.resolve(null):this.fs.getDocuments(e,r).next(i=>{const a=this.bs(n,i);return this.Ss(n,a,r,s)?O.resolve(null):(Ls()<=pe.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Fs(n)),this.Ds(e,a,n,_E(s,Go)).next(l=>l))})}bs(e,n){let r=new tt(xv(e));return n.forEach((s,i)=>{Ru(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Ls()<=pe.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Fs(n)),this.fs.getDocumentsMatchingQuery(e,n,jr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="LocalStore",tI=3e8;class nI{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Le(ce),this.Fs=new Is(i=>rf(i),sf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new qT(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function rI(t,e,n,r){return new nI(t,e,n,r)}async function qv(t,e){const n=re(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=he();for(const d of s){a.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}for(const d of i){l.push(d.batchId);for(const p of d.mutations)c=c.add(p.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:a,addedBatchIds:l}))})})}function sI(t,e){const n=re(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,p){const g=d.batch,_=g.keys();let C=O.resolve();return _.forEach(P=>{C=C.next(()=>p.getEntry(c,P)).next(j=>{const z=d.docVersions.get(P);ye(z!==null,48541),j.version.compareTo(z)<0&&(g.applyToRemoteDocument(j,d),j.isValidDocument()&&(j.setReadTime(d.commitVersion),p.addEntry(j)))})}),C.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=he();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Hv(t){const e=re(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function iI(t,e){const n=re(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((p,g)=>{const _=s.get(g);if(!_)return;l.push(n.li.removeMatchingKeys(i,p.removedDocuments,g).next(()=>n.li.addMatchingKeys(i,p.addedDocuments,g)));let C=_.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?C=C.withResumeToken(ft.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):p.resumeToken.approximateByteSize()>0&&(C=C.withResumeToken(p.resumeToken,r)),s=s.insert(g,C),function(j,z,S){return j.resumeToken.approximateByteSize()===0||z.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=tI?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(_,C,p)&&l.push(n.li.updateTargetData(i,C))});let c=Yn(),d=he();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(oI(i,a,e.documentUpdates).next(p=>{c=p.Bs,d=p.Ls})),!r.isEqual(te.min())){const p=n.li.getLastRemoteSnapshotVersion(i).next(g=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return O.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.vs=s,i))}function oI(t,e,n){let r=he(),s=he();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let a=Yn();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(te.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):H(mf,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Bs:a,Ls:s}})}function aI(t,e){const n=re(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=ef),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lI(t,e){const n=re(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,O.resolve(s)):n.li.allocateTargetId(r).next(a=>(s=new vr(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function Wh(t,e,n){const r=re(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Ai(a))throw a;H(mf,`Failed to update sequence numbers for target ${e}: ${a}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Wm(t,e,n){const r=re(t);let s=te.min(),i=he();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,d,p){const g=re(c),_=g.Fs.get(p);return _!==void 0?O.resolve(g.vs.get(_)):g.li.getTargetData(d,p)}(r,a,An(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(a,e,n?s:te.min(),n?i:he())).next(l=>(uI(r,KE(e),l),{documents:l,ks:i})))}function uI(t,e,n){let r=t.Ms.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Qm{constructor(){this.activeTargetIds=eT()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class cI{constructor(){this.vo=new Qm,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Qm,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="ConnectivityMonitor";class Gm{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(Km,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(Km,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=null;function Qh(){return tl===null?tl=function(){return 268435456+Math.round(2147483648*Math.random())}():tl++,"0x"+tl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc="RestConnection",dI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class fI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Zl?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const a=Qh(),l=this.Qo(e,n.toUriEncodedString());H(Pc,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:d}=new URL(l),p=Gd(d);return this.zo(e,l,c,r,p).then(g=>(H(Pc,`Received RPC '${e}' ${a}: `,g),g),g=>{throw _s(Pc,`RPC '${e}' ${a} failed with error: `,g,"url: ",l,"request:",r),g})}jo(e,n,r,s,i,a){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ci}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=dI[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection",ro=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class ai extends fI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ai.c_){const e=Y0();ro(e,X0.STAT_EVENT,n=>{n.stat===Dh.PROXY?H(vt,"STAT_EVENT: detected buffering proxy"):n.stat===Dh.NOPROXY&&H(vt,"STAT_EVENT: detected no buffering proxy")}),ai.c_=!0}}zo(e,n,r,s,i){const a=Qh();return new Promise((l,c)=>{const d=new K0;d.setWithCredentials(!0),d.listenOnce(G0.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ml.NO_ERROR:const g=d.getResponseJson();H(vt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),l(g);break;case ml.TIMEOUT:H(vt,`RPC '${e}' ${a} timed out`),c(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case ml.HTTP_ERROR:const _=d.getStatus();if(H(vt,`RPC '${e}' ${a} failed with status:`,_,"response text:",d.getResponseText()),_>0){let C=d.getResponseJson();Array.isArray(C)&&(C=C[0]);const P=C==null?void 0:C.error;if(P&&P.status&&P.message){const j=function(S){const T=S.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(T)>=0?T:F.UNKNOWN}(P.status);c(new Q(j,P.message))}else c(new Q(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Q(F.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(vt,`RPC '${e}' ${a} completed.`)}});const p=JSON.stringify(s);H(vt,`RPC '${e}' ${a} sending request:`,s),d.send(n,"POST",p,r,15)})}T_(e,n,r){const s=Qh(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");H(vt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=a.createWebChannel(d,l);this.I_(p);let g=!1,_=!1;const C=new pI({Ho:P=>{_?H(vt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(g||(H(vt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),H(vt,`RPC '${e}' stream ${s} sending:`,P),p.send(P))},Jo:()=>p.close()});return ro(p,uo.EventType.OPEN,()=>{_||(H(vt,`RPC '${e}' stream ${s} transport opened.`),C.i_())}),ro(p,uo.EventType.CLOSE,()=>{_||(_=!0,H(vt,`RPC '${e}' stream ${s} transport closed`),C.o_(),this.E_(p))}),ro(p,uo.EventType.ERROR,P=>{_||(_=!0,_s(vt,`RPC '${e}' stream ${s} transport errored. Name:`,P.name,"Message:",P.message),C.o_(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),ro(p,uo.EventType.MESSAGE,P=>{var j;if(!_){const z=P.data[0];ye(!!z,16349);const S=z,T=(S==null?void 0:S.error)||((j=S[0])==null?void 0:j.error);if(T){H(vt,`RPC '${e}' stream ${s} received error:`,T);const k=T.status;let M=function(x){const v=We[x];if(v!==void 0)return Pv(v)}(k),B=T.message;k==="NOT_FOUND"&&B.includes("database")&&B.includes("does not exist")&&B.includes(this.databaseId.database)&&_s(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),M===void 0&&(M=F.INTERNAL,B="Unknown error status: "+k+" with message "+T.message),_=!0,C.o_(new Q(M,B)),p.close()}else H(vt,`RPC '${e}' stream ${s} received:`,z),C.__(z)}}),ai.u_(),setTimeout(()=>{C.s_()},0),C}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return J0()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(t){return new ai(t)}function Rc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t){return new _T(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai.c_=!1;class Wv{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xm="PersistentStream";class Qv{constructor(e,n,r,s,i,a,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Wv(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Xn(n.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(Xm,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(Xm,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class gI extends Qv{constructor(e,n,r,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=ET(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?te.min():a.readTime?Pn(a.readTime):te.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Hh(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=zh(c)?{documents:ST(i,c)}:{query:NT(i,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Vv(i,a.resumeToken);const d=Bh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(te.min())>0){l.readTime=iu(i,a.snapshotVersion.toTimestamp());const d=Bh(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=kT(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Hh(this.serializer),n.removeTarget=e,this.K_(n)}}class yI extends Qv{constructor(e,n,r,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ye(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ye(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ye(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=IT(e.writeResults,e.commitTime),r=Pn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Hh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>TT(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{}class _I extends vI{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,$h(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,$h(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(F.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function xI(t,e,n,r){return new _I(t,e,n,r)}class wI{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Xn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="RemoteStore";class EI{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(a=>{r.enqueueAndForget(async()=>{Ns(this)&&(H(xs,"Restarting streams for network reachability change."),await async function(c){const d=re(c);d.Ea.add(4),await ca(d),d.Va.set("Unknown"),d.Ea.delete(4),await Ou(d)}(this))})}),this.Va=new wI(r,s)}}async function Ou(t){if(Ns(t))for(const e of t.Ra)await e(!0)}async function ca(t){for(const e of t.Ra)await e(!1)}function Kv(t,e){const n=re(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),_f(n)?vf(n):bi(n).O_()&&yf(n,e))}function gf(t,e){const n=re(t),r=bi(n);n.Ia.delete(e),r.O_()&&Gv(n,e),n.Ia.size===0&&(r.O_()?r.L_():Ns(n)&&n.Va.set("Unknown"))}function yf(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}bi(t).Z_(e)}function Gv(t,e){t.da.$e(e),bi(t).X_(e)}function vf(t){t.da=new mT({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bi(t).start(),t.Va.ua()}function _f(t){return Ns(t)&&!bi(t).x_()&&t.Ia.size>0}function Ns(t){return re(t).Ea.size===0}function Xv(t){t.da=void 0}async function TI(t){t.Va.set("Online")}async function II(t){t.Ia.forEach((e,n)=>{yf(t,e)})}async function SI(t,e){Xv(t),_f(t)?(t.Va.ha(e),vf(t)):t.Va.set("Unknown")}async function NI(t,e,n){if(t.Va.set("Online"),e instanceof jv&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){H(xs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await au(t,r)}else if(e instanceof _l?t.da.Xe(e):e instanceof Rv?t.da.st(e):t.da.tt(e),!n.isEqual(te.min()))try{const r=await Hv(t.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.da.Tt(a);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const p=i.Ia.get(d);p&&i.Ia.set(d,p.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,d)=>{const p=i.Ia.get(c);if(!p)return;i.Ia.set(c,p.withResumeToken(ft.EMPTY_BYTE_STRING,p.snapshotVersion)),Gv(i,c);const g=new vr(p.target,c,d,p.sequenceNumber);yf(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(xs,"Failed to raise snapshot:",r),await au(t,r)}}async function au(t,e,n){if(!Ai(e))throw e;t.Ea.add(1),await ca(t),t.Va.set("Offline"),n||(n=()=>Hv(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(xs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ou(t)})}function Yv(t,e){return e().catch(n=>au(t,n,e))}async function Lu(t){const e=re(t),n=Or(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ef;for(;CI(e);)try{const s=await aI(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,kI(e,s)}catch(s){await au(e,s)}Jv(e)&&Zv(e)}function CI(t){return Ns(t)&&t.Ta.length<10}function kI(t,e){t.Ta.push(e);const n=Or(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function Jv(t){return Ns(t)&&!Or(t).x_()&&t.Ta.length>0}function Zv(t){Or(t).start()}async function AI(t){Or(t).ra()}async function bI(t){const e=Or(t);for(const n of t.Ta)e.ea(n.mutations)}async function PI(t,e,n){const r=t.Ta.shift(),s=uf.from(r,e,n);await Yv(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lu(t)}async function RI(t,e){e&&Or(t).Y_&&await async function(r,s){if(function(a){return dT(a)&&a!==F.ABORTED}(s.code)){const i=r.Ta.shift();Or(r).B_(),await Yv(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Lu(r)}}(t,e),Jv(t)&&Zv(t)}async function Ym(t,e){const n=re(t);n.asyncQueue.verifyOperationInProgress(),H(xs,"RemoteStore received new credentials");const r=Ns(n);n.Ea.add(3),await ca(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ou(n)}async function jI(t,e){const n=re(t);e?(n.Ea.delete(2),await Ou(n)):e||(n.Ea.add(2),await ca(n),n.Va.set("Unknown"))}function bi(t){return t.ma||(t.ma=function(n,r,s){const i=re(n);return i.sa(),new gI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:TI.bind(null,t),Yo:II.bind(null,t),t_:SI.bind(null,t),J_:NI.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),_f(t)?vf(t):t.Va.set("Unknown")):(await t.ma.stop(),Xv(t))})),t.ma}function Or(t){return t.fa||(t.fa=function(n,r,s){const i=re(n);return i.sa(),new yI(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:AI.bind(null,t),t_:RI.bind(null,t),ta:bI.bind(null,t),na:PI.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Lu(t)):(await t.fa.stop(),t.Ta.length>0&&(H(xs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new cs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const a=Date.now()+r,l=new xf(e,n,a,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wf(t,e){if(Xn("AsyncQueue",`${e}: ${t}`),Ai(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{static emptySet(e){return new li(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=co(),this.sortedSet=new Le(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof li)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new li;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(){this.ga=new Le(G.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ei{constructor(e,n,r,s,i,a,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ei(e,n,li.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Pu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class DI{constructor(){this.queries=Zm(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=re(n),i=s.queries;s.queries=Zm(),i.forEach((a,l)=>{for(const c of l.ba)c.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function Zm(){return new Is(t=>_v(t),Pu)}async function MI(t,e){const n=re(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new VI,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=wf(a,`Initialization of query '${Fs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Ef(n)}async function OI(t,e){const n=re(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function LI(t,e){const n=re(t);let r=!1;for(const s of e){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.ba)l.Fa(s)&&(r=!0);a.wa=s}}r&&Ef(n)}function FI(t,e,n){const r=re(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function Ef(t){t.Ca.forEach(e=>{e.next()})}var Kh,eg;(eg=Kh||(Kh={})).Ma="default",eg.Cache="cache";class zI{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ei(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ei.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Kh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e){this.key=e}}class t_{constructor(e){this.key=e}}class UI{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=he(),this.mutatedKeys=he(),this.eu=xv(e),this.tu=new li(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Jm,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,g)=>{const _=s.get(p),C=Ru(this.query,g)?g:null,P=!!_&&this.mutatedKeys.has(_.key),j=!!C&&(C.hasLocalMutations||this.mutatedKeys.has(C.key)&&C.hasCommittedMutations);let z=!1;_&&C?_.data.isEqual(C.data)?P!==j&&(r.track({type:3,doc:C}),z=!0):this.su(_,C)||(r.track({type:2,doc:C}),z=!0,(c&&this.eu(C,c)>0||d&&this.eu(C,d)<0)&&(l=!0)):!_&&C?(r.track({type:0,doc:C}),z=!0):_&&!C&&(r.track({type:1,doc:_}),z=!0,(c||d)&&(l=!0)),z&&(C?(a=a.add(C),i=j?i.add(p):i.delete(p)):(a=a.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const p=this.query.limitType==="F"?a.last():a.first();a=a.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{tu:a,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((p,g)=>function(C,P){const j=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:z})}};return j(C)-j(P)}(p.type,g.type)||this.eu(p.doc,g.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,d=c!==this.Xa;return this.Xa=c,a.length!==0||d?{snapshot:new Ei(this.query,e.tu,i,a,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Jm,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=he(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new t_(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new e_(r))}),n}cu(e){this.Za=e.ks,this.Ya=he();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ei.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Tf="SyncEngine";class BI{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $I{constructor(e){this.key=e,this.hu=!1}}class qI{constructor(e,n,r,s,i,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Is(l=>_v(l),Pu),this.Iu=new Map,this.Eu=new Set,this.Ru=new Le(G.comparator),this.Au=new Map,this.Vu=new df,this.du={},this.mu=new Map,this.fu=wi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HI(t,e,n=!0){const r=a_(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await n_(r,e,n,!0),s}async function WI(t,e){const n=a_(t);await n_(n,e,!0,!1)}async function n_(t,e,n,r){const s=await lI(t.localStore,An(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await QI(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&Kv(t.remoteStore,s),l}async function QI(t,e,n,r,s){t.pu=(g,_,C)=>async function(j,z,S,T){let k=z.view.ru(S);k.Ss&&(k=await Wm(j.localStore,z.query,!1).then(({documents:x})=>z.view.ru(x,k)));const M=T&&T.targetChanges.get(z.targetId),B=T&&T.targetMismatches.get(z.targetId)!=null,D=z.view.applyChanges(k,j.isPrimaryClient,M,B);return ng(j,z.targetId,D.au),D.snapshot}(t,g,_,C);const i=await Wm(t.localStore,e,!0),a=new UI(e,i.ks),l=a.ru(i.documents),c=ua.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,c);ng(t,n,d.au);const p=new BI(e,n,a);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function KI(t,e,n){const r=re(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(a=>!Pu(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Wh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&gf(r.remoteStore,s.targetId),Gh(r,s.targetId)}).catch(ki)):(Gh(r,s.targetId),await Wh(r.localStore,s.targetId,!0))}async function GI(t,e){const n=re(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),gf(n.remoteStore,r.targetId))}async function XI(t,e,n){const r=rS(t);try{const s=await function(a,l){const c=re(a),d=Ae.now(),p=l.reduce((C,P)=>C.add(P.key),he());let g,_;return c.persistence.runTransaction("Locally write mutations","readwrite",C=>{let P=Yn(),j=he();return c.xs.getEntries(C,p).next(z=>{P=z,P.forEach((S,T)=>{T.isValidDocument()||(j=j.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(C,P)).next(z=>{g=z;const S=[];for(const T of l){const k=aT(T,g.get(T.key).overlayedDocument);k!=null&&S.push(new Ss(T.key,k,dv(k.value.mapValue),bn.exists(!0)))}return c.mutationQueue.addMutationBatch(C,d,S,l)}).next(z=>{_=z;const S=z.applyToLocalDocumentSet(g,j);return c.documentOverlayCache.saveOverlays(C,z.batchId,S)})}).then(()=>({batchId:_.batchId,changes:Ev(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let d=a.du[a.currentUser.toKey()];d||(d=new Le(ce)),d=d.insert(l,c),a.du[a.currentUser.toKey()]=d}(r,s.batchId,n),await ha(r,s.changes),await Lu(r.remoteStore)}catch(s){const i=wf(s,"Failed to persist write");n.reject(i)}}async function r_(t,e){const n=re(t);try{const r=await iI(n.localStore,e);e.targetChanges.forEach((s,i)=>{const a=n.Au.get(i);a&&(ye(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?ye(a.hu,14607):s.removedDocuments.size>0&&(ye(a.hu,42227),a.hu=!1))}),await ha(n,r,e)}catch(r){await ki(r)}}function tg(t,e,n){const r=re(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=re(a);c.onlineState=l;let d=!1;c.queries.forEach((p,g)=>{for(const _ of g.ba)_.va(l)&&(d=!0)}),d&&Ef(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YI(t,e,n){const r=re(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let a=new Le(G.comparator);a=a.insert(i,wt.newNoDocument(i,te.min()));const l=he().add(i),c=new Du(te.min(),new Map,new Le(ce),a,l);await r_(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),If(r)}else await Wh(r.localStore,e,!1).then(()=>Gh(r,e,n)).catch(ki)}async function JI(t,e){const n=re(t),r=e.batch.batchId;try{const s=await sI(n.localStore,e);i_(n,r,null),s_(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ha(n,s)}catch(s){await ki(s)}}async function ZI(t,e,n){const r=re(t);try{const s=await function(a,l){const c=re(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let p;return c.mutationQueue.lookupMutationBatch(d,l).next(g=>(ye(g!==null,37113),p=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,p,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,p)).next(()=>c.localDocuments.getDocuments(d,p))})}(r.localStore,e);i_(r,e,n),s_(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ha(r,s)}catch(s){await ki(s)}}function s_(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function i_(t,e,n){const r=re(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Gh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||o_(t,r)})}function o_(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(gf(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),If(t))}function ng(t,e,n){for(const r of n)r instanceof e_?(t.Vu.addReference(r.key,e),eS(t,r)):r instanceof t_?(H(Tf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||o_(t,r.key)):J(19791,{wu:r})}function eS(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(Tf,"New document in limbo: "+n),t.Eu.add(r),If(t))}function If(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new G(ke.fromString(e)),r=t.fu.next();t.Au.set(r,new $I(n)),t.Ru=t.Ru.insert(n,r),Kv(t.remoteStore,new vr(An(of(n.path)),r,"TargetPurposeLimboResolution",Cu.ce))}}async function ha(t,e,n){const r=re(t),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(d=>{var p;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(p=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=pf.Es(c.targetId,d);i.push(g)}}))}),await Promise.all(a),r.Pu.J_(s),await async function(c,d){const p=re(c);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>O.forEach(d,_=>O.forEach(_.Ts,C=>p.persistence.referenceDelegate.addReference(g,_.targetId,C)).next(()=>O.forEach(_.Is,C=>p.persistence.referenceDelegate.removeReference(g,_.targetId,C)))))}catch(g){if(!Ai(g))throw g;H(mf,"Failed to update sequence numbers: "+g)}for(const g of d){const _=g.targetId;if(!g.fromCache){const C=p.vs.get(_),P=C.snapshotVersion,j=C.withLastLimboFreeSnapshotVersion(P);p.vs=p.vs.insert(_,j)}}}(r.localStore,i))}async function tS(t,e){const n=re(t);if(!n.currentUser.isEqual(e)){H(Tf,"User change. New user:",e.toKey());const r=await qv(n.localStore,e);n.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new Q(F.CANCELLED,a))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ha(n,r.Ns)}}function nS(t,e){const n=re(t),r=n.Au.get(e);if(r&&r.hu)return he().add(r.key);{let s=he();const i=n.Iu.get(e);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function a_(t){const e=re(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=r_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nS.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YI.bind(null,e),e.Pu.J_=LI.bind(null,e.eventManager),e.Pu.yu=FI.bind(null,e.eventManager),e}function rS(t){const e=re(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=JI.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZI.bind(null,e),e}class lu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return rI(this.persistence,new eI,e.initialUser,this.serializer)}Cu(e){return new $v(ff.Vi,this.serializer)}Du(e){return new cI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lu.provider={build:()=>new lu};class sS extends lu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ye(this.persistence.referenceDelegate instanceof ou,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new FT(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?At.withCacheSize(this.cacheSizeBytes):At.DEFAULT;return new $v(r=>ou.Vi(r,n),this.serializer)}}class Xh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tS.bind(null,this.syncEngine),await jI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DI}()}createDatastore(e){const n=Mu(e.databaseInfo.databaseId),r=mI(e.databaseInfo);return xI(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,a,l){return new EI(r,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>tg(this.syncEngine,n,0),function(){return Gm.v()?new Gm:new hI}())}createSyncEngine(e,n){return function(s,i,a,l,c,d,p){const g=new qI(s,i,a,l,c,d);return p&&(g.gu=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=re(s);H(xs,"RemoteStore shutting down."),i.Ea.add(5),await ca(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Xh.provider={build:()=>new Xh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lr="FirestoreClient";class oS{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=Jd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{H(Lr,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(H(Lr,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=wf(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function jc(t,e){t.asyncQueue.verifyOperationInProgress(),H(Lr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await qv(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function rg(t,e){t.asyncQueue.verifyOperationInProgress();const n=await aS(t);H(Lr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Ym(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Ym(e.remoteStore,s)),t._onlineComponents=e}async function aS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(Lr,"Using user provided OfflineComponentProvider");try{await jc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;_s("Error using user provided cache. Falling back to memory cache: "+n),await jc(t,new lu)}}else H(Lr,"Using default OfflineComponentProvider"),await jc(t,new sS(void 0));return t._offlineComponents}async function l_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(Lr,"Using user provided OnlineComponentProvider"),await rg(t,t._uninitializedComponentsProvider._online)):(H(Lr,"Using default OnlineComponentProvider"),await rg(t,new Xh))),t._onlineComponents}function lS(t){return l_(t).then(e=>e.syncEngine)}async function sg(t){const e=await l_(t),n=e.eventManager;return n.onListen=HI.bind(null,e.syncEngine),n.onUnlisten=KI.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=WI.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=GI.bind(null,e.syncEngine),n}function uS(t,e,n,r){const s=new iS(r),i=new zI(e,s,n);return t.asyncQueue.enqueueAndForget(async()=>MI(await sg(t),i)),()=>{s.Nu(),t.asyncQueue.enqueueAndForget(async()=>OI(await sg(t),i))}}function cS(t,e){const n=new cs;return t.asyncQueue.enqueueAndForget(async()=>XI(await lS(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS="ComponentProvider",ig=new Map;function dS(t,e,n,r,s){return new AE(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,u_(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="firestore.googleapis.com",og=!0;class ag{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=c_,this.ssl=og}else this.host=e.host,this.ssl=e.ssl??og;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Bv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OT)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=u_(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ag({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ag(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lE;switch(r.type){case"firstParty":return new dE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=ig.get(n);r&&(H(hS,"Removing Datastore"),ig.delete(n),r.terminate())}(this),Promise.resolve()}}function fS(t,e,n,r={}){var d;t=hs(t,Fu);const s=Gd(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Mw(`https://${l}`),zw("Firestore",!0)),i.host!==c_&&i.host!==l&&_s("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Gl(c,a)&&(t._setSettings(c),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=_t.MOCK_USER;else{p=Ow(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new _t(_)}t._authCredentials=new uE(new ev(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new zu(this.firestore,e,this._query)}}class et{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new et(this.firestore,e,this._key)}toJSON(){return{type:et._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(aa(n,et._jsonSchema))return new et(e,r||null,new G(ke.fromString(n.referencePath)))}}et._jsonSchemaVersion="firestore/documentReference/1.0",et._jsonSchema={type:Ke("string",et._jsonSchemaVersion),referencePath:Ke("string")};class br extends zu{constructor(e,n,r){super(e,n,of(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new et(this.firestore,null,new G(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function pS(t,e,...n){if(t=yi(t),tv("collection","path",e),t instanceof Fu){const r=ke.fromString(e,...n);return xm(r),new br(t,null,r)}{if(!(t instanceof et||t instanceof br))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return xm(r),new br(t.firestore,null,r)}}function Un(t,e,...n){if(t=yi(t),arguments.length===1&&(e=Jd.newId()),tv("doc","path",e),t instanceof Fu){const r=ke.fromString(e,...n);return _m(r),new et(t,null,new G(r))}{if(!(t instanceof et||t instanceof br))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ke.fromString(e,...n));return _m(r),new et(t.firestore,t instanceof br?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg="AsyncQueue";class ug{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Wv(this,"async_queue_retry"),this._c=()=>{const r=Rc();r&&H(lg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Rc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Rc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new cs;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Ai(e))throw e;H(lg,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Xn("INTERNAL UNHANDLED ERROR: ",cg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=xf.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:cg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function cg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ta extends Fu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ug,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ug(e),this._firestoreClient=void 0,await e}}}function mS(t,e){const n=typeof t=="object"?t:X2(),r=typeof t=="string"?t:Zl,s=H2(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Vw("firestore");i&&fS(s,...i)}return s}function h_(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gS(t),t._firestoreClient}function gS(t){var r,s,i,a;const e=t._freezeSettings(),n=dS(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new oS(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Zt(ft.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Zt(ft.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Zt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(aa(e,Zt._jsonSchema))return Zt.fromBase64String(e.bytes)}}Zt._jsonSchemaVersion="firestore/bytes/1.0",Zt._jsonSchema={type:Ke("string",Zt._jsonSchemaVersion),bytes:Ke("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Rn._jsonSchemaVersion}}static fromJSON(e){if(aa(e,Rn._jsonSchema))return new Rn(e.latitude,e.longitude)}}Rn._jsonSchemaVersion="firestore/geoPoint/1.0",Rn._jsonSchema={type:Ke("string",Rn._jsonSchemaVersion),latitude:Ke("number"),longitude:Ke("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(aa(e,mn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new mn(e.vectorValues);throw new Q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mn._jsonSchemaVersion="firestore/vectorValue/1.0",mn._jsonSchema={type:Ke("string",mn._jsonSchemaVersion),vectorValues:Ke("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yS=/^__.*__$/;class vS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,n,this.fieldTransforms):new la(e,this.data,n,this.fieldTransforms)}}function p_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{dataSource:t})}}class Sf{constructor(e,n,r,s,i,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Sf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return uu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(p_(this.dataSource)&&yS.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class _S{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mu(e)}createContext(e,n,r,s=!1){return new Sf({dataSource:e,methodName:n,targetDoc:r,path:ct.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xS(t){const e=t._freezeSettings(),n=Mu(t._databaseId);return new _S(t._databaseId,!!e.ignoreUndefinedProperties,n)}function wS(t,e,n,r,s,i={}){const a=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);v_("Data must be an object, but it was:",a,r);const l=g_(r,a);let c,d;if(i.merge)c=new dn(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const p=[];for(const g of i.mergeFields){const _=Nf(e,g,n);if(!a.contains(_))throw new Q(F.INVALID_ARGUMENT,`Field '${_}' is specified in your field mask but missing from your input data.`);IS(p,_)||p.push(_)}c=new dn(p),d=a.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=a.fieldTransforms;return new vS(new Jt(l),c,d)}function m_(t,e){if(y_(t=yi(t)))return v_("Unsupported field value:",e,t),g_(t,e);if(t instanceof f_)return function(r,s){if(!p_(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=m_(l,s.childContextForArray(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=yi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return tT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ae.fromDate(r);return{timestampValue:iu(s.serializer,i)}}if(r instanceof Ae){const i=new Ae(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:iu(s.serializer,i)}}if(r instanceof Rn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Zt)return{bytesValue:Vv(s.serializer,r._byteString)};if(r instanceof et){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:hf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof mn)return function(a,l){const c=a instanceof mn?a.toArray():a;return{mapValue:{fields:{[cv]:{stringValue:hv},[eu]:{arrayValue:{values:c.map(p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return af(l.serializer,p)})}}}}}}(r,s);if(Uv(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${Zd(r)}`)}(t,e)}function g_(t,e){const n={};return sv(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(t,(r,s)=>{const i=m_(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function y_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ae||t instanceof Rn||t instanceof Zt||t instanceof et||t instanceof f_||t instanceof mn||Uv(t))}function v_(t,e,n){if(!y_(n)||!nv(n)){const r=Zd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Nf(t,e,n){if((e=yi(e))instanceof d_)return e._internalPath;if(typeof e=="string")return TS(t,e);throw uu("Field path arguments must be of type string or ",t,!1,void 0,n)}const ES=new RegExp("[~\\*/\\[\\]]");function TS(t,e,n){if(e.search(ES)>=0)throw uu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new d_(...e.split("."))._internalPath}catch{throw uu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uu(t,e,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Q(F.INVALID_ARGUMENT,l+t+c)}function IS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{convertValue(e,n="none"){switch(Mr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Dr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ts(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[eu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>Ue(a.doubleValue));return new mn(n)}convertGeoPoint(e){return new Rn(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Au(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Xo(e));default:return null}}convertTimestamp(e){const n=Vr(e);return new Ae(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ke.fromString(e);ye(zv(r),9688,{name:e});const s=new Yo(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||Xn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __ extends SS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Zt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new et(this.firestore,null,n)}}const hg="@firebase/firestore",dg="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new et(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new NS(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Nf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class NS extends x_{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function kS(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class fo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ds extends x_{constructor(e,n,r,s,i,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ds._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ds._jsonSchemaVersion="firestore/documentSnapshot/1.0",ds._jsonSchema={type:Ke("string",ds._jsonSchemaVersion),bundleSource:Ke("string","DocumentSnapshot"),bundleName:Ke("string"),bundle:Ke("string")};class xl extends ds{data(e={}){return super.data(e)}}class ui{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new fo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new xl(this._firestore,this._userDataWriter,r.key,r,new fo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new xl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new xl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new fo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,p=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),p=a.indexOf(l.doc.key)),{type:AS(l.type),doc:c,oldIndex:d,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ui._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function AS(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ui._jsonSchemaVersion="firestore/querySnapshot/1.0",ui._jsonSchema={type:Ke("string",ui._jsonSchemaVersion),bundleSource:Ke("string","QuerySnapshot"),bundleName:Ke("string"),bundle:Ke("string")};function Ao(t,e,n){t=hs(t,et);const r=hs(t.firestore,ta),s=kS(t.converter,e),i=xS(r);return w_(r,[wS(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,bn.none())])}function bS(t){return w_(hs(t.firestore,ta),[new lf(t._key,bn.none())])}function wl(t,...e){var d,p,g;t=yi(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||fg(e[r])||(n=e[r++]);const s={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(fg(e[r])){const _=e[r];e[r]=(d=_.next)==null?void 0:d.bind(_),e[r+1]=(p=_.error)==null?void 0:p.bind(_),e[r+2]=(g=_.complete)==null?void 0:g.bind(_)}let i,a,l;if(t instanceof et)a=hs(t.firestore,ta),l=of(t._key.path),i={next:_=>{e[r]&&e[r](PS(a,t,_))},error:e[r+1],complete:e[r+2]};else{const _=hs(t,zu);a=hs(_.firestore,ta),l=_._query;const C=new __(a);i={next:P=>{e[r]&&e[r](new ui(a,C,_,P))},error:e[r+1],complete:e[r+2]},CS(t._query)}const c=h_(a);return uS(c,l,s,i)}function w_(t,e){const n=h_(t);return cS(n,e)}function PS(t,e,n){const r=n.docs.get(e._key),s=new __(t);return new ds(t,s,e._key,r,new fo(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){aE(G2),Yl(new Qo("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new ta(new cE(r.getProvider("auth-internal")),new fE(a,r.getProvider("app-check-internal")),bE(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),oi(hg,dg,e),oi(hg,dg,"esm2020")})();var RS="firebase",jS="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oi(RS,jS,"app");const VS={apiKey:"AIzaSyDEprrpdx5koXk1s0Hp7PgLXnL28rpHBdU",authDomain:"waken-zaiko.firebaseapp.com",projectId:"waken-zaiko",storageBucket:"waken-zaiko.firebasestorage.app",messagingSenderId:"40620672321",appId:"1:40620672321:web:508180e5c79053130e0dc0"},DS=q0(VS),Sn=mS(DS),MS=()=>{const[t,e]=X.useState([]),[n,r]=X.useState(!0);return X.useEffect(()=>{const l=wl(pS(Sn,"items"),c=>{const d=c.docs.map(p=>p.data());e(d.sort((p,g)=>p.id-g.id)),r(!1)});return()=>l()},[]),{items:t,loadingItems:n,saveItem:async l=>{try{await Ao(Un(Sn,"items",l.id.toString()),l)}catch(c){console.error("",c)}},saveMultipleItems:async l=>{try{for(const c of l)await Ao(Un(Sn,"items",c.id.toString()),c)}catch(c){console.error("",c)}},deleteItemFromDb:async l=>{try{await bS(Un(Sn,"items",l.toString()))}catch(c){console.error("",c)}}}},OS=()=>{const[t,e]=X.useState([]),[n,r]=X.useState({}),[s,i]=X.useState([]),[a,l]=X.useState([]),[c,d]=X.useState(!0);return X.useEffect(()=>{const C=wl(Un(Sn,"masters","processes"),S=>{S.exists()&&(e(S.data().names||[]),r(S.data().types||{}))}),P=wl(Un(Sn,"masters","categories"),S=>{S.exists()&&i(S.data().names||[])}),j=wl(Un(Sn,"masters","customers"),S=>{S.exists()&&l(S.data().data||[])}),z=setTimeout(()=>d(!1),800);return()=>{C(),P(),j(),clearTimeout(z)}},[]),{processes:t,processTypes:n,categories:s,customers:a,loadingMasters:c,saveProcesses:async(C,P)=>{await Ao(Un(Sn,"masters","processes"),{names:C,types:P})},saveCategories:async C=>{await Ao(Un(Sn,"masters","categories"),{names:C})},saveCustomers:async C=>{await Ao(Un(Sn,"masters","customers"),{data:C})}}},LS=["","","2F","","","","","",""],FS={:"WIP",:"WIP","2F":"WIP",:"WIP",:"WIP",:"WIP",:"BOXED",:"PRODUCT",:"PRODUCT"},zS=["","","","","",""],US=[{id:1,name:""},{id:2,name:""},{id:3,name:"A"},{id:4,name:""},{id:5,name:""},{id:6,name:""}],BS=[{id:1,code:"WF-101",name:"",customer:"",category:"",packaging:"",size:"",threshold:10,targetStock:50,productionLotSize:20,price:15e3,processPrices:{:5e3,"2F":6e3,:9e3,:12e3},deadline:"2024-10-31",lots:[{lotNo:"23-A001",quantity:20,process:"2F",receivedDate:"2023-10-01"},{lotNo:"23-B005",quantity:25,process:"",receivedDate:"2023-11-15"},{lotNo:Fn,quantity:45,process:"",receivedDate:"2024-02-01"}]},{id:2,code:"CT-204",name:"",customer:"",category:"",packaging:"",size:"",threshold:15,targetStock:30,productionLotSize:10,price:8500,deadline:"",lots:[{lotNo:"24-C012",quantity:8,process:"",receivedDate:"2024-01-20"}]}],Yh=()=>new Date().toISOString().split("T")[0],Vc=t=>{if(!t)return null;const e=new Date(Yh()),n=new Date(t);return Math.ceil((n.getTime()-e.getTime())/(1e3*60*60*24))};function $S(){const{items:t,loadingItems:e,saveItem:n,saveMultipleItems:r,deleteItemFromDb:s}=MS(),{processes:i,processTypes:a,categories:l,customers:c,loadingMasters:d,saveProcesses:p,saveCategories:g,saveCustomers:_}=OS(),[C,P]=X.useState(!1),[j,z]=X.useState(""),[S,T]=X.useState(""),[k,M]=X.useState("default"),[B,D]=X.useState(null),[x,v]=X.useState(!1),[E,I]=X.useState(!1),[N,A]=X.useState(!1),[w,Ne]=X.useState(null),[ge,Ht]=X.useState(null),[Tt,q]=X.useState(!1),[K,Z]=X.useState(""),[le,de]=X.useState(new Set),[Wt,$e]=X.useState(!1),[Pe,pt]=X.useState(""),[yn,Dn]=X.useState(!1),[da,Cs]=X.useState(!1),[Uu,Pi]=X.useState(!1),[Ri,ji]=X.useState(!1),[Bu,ks]=X.useState(!1),[Vi,Di]=X.useState(!1),[nt,qe]=X.useState(!1),[Zn,fa]=X.useState("PROCESS"),[er,pa]=X.useState(""),[tr,ma]=X.useState("WIP"),[Br,As]=X.useState(""),[bs,ga]=X.useState(""),[sn,$r]=X.useState([{uid:"init-1",itemId:"",lotNo:"",quantity:1,process:""}]),[Dt,nr]=X.useState({targetItemId:"",targetQuantity:1,process:"",newLotNo:""}),[_e,Mn]=X.useState("IN"),[on,Ps]=X.useState(null),[He,Qt]=X.useState({lotNo:"",quantity:0,process:"",targetProcess:""}),[rr,Ge]=X.useState(!1),[Rs,sr]=X.useState(null),[oe,It]=X.useState({code:"",name:"",customer:"",category:"",packaging:"",size:"",threshold:10,targetStock:20,productionLotSize:10,price:0,deadline:"",processPrices:{}}),[an,vn]=X.useState({isOpen:!1,type:"ALERT",title:"",message:""}),qr=(y,V,L)=>vn({isOpen:!0,type:"CONFIRM",title:y,message:V,onConfirm:L}),Kt=(y,V)=>vn({isOpen:!0,type:"ALERT",title:y,message:V}),Hr=()=>vn(y=>({...y,isOpen:!1})),ya=()=>{an.onConfirm&&an.onConfirm(),Hr()},va=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen().catch(()=>{}),P(!C)},Mi=async()=>{try{qr("","Firebase",async()=>{await p(LS,FS),await g(zS),await _(US),await r(BS),Kt("","Firebase")})}catch{Kt("","")}},On=y=>y.lots?y.lots.reduce((V,L)=>V+L.quantity,0):0,Mt=(y,V)=>y.lots?V==="ALL"?On(y):y.lots.filter(L=>(a[L.process]||"WIP")===V).reduce((L,Y)=>L+Y.quantity,0):0,at=y=>y.lots?y.lots.filter(V=>{const L=a[V.process]||"WIP";return L==="PRODUCT"||L==="BOXED"}).reduce((V,L)=>V+L.quantity,0):0,Oi=t.reduce((y,V)=>(V.lots&&V.lots.forEach(L=>{y[L.process]=(y[L.process]||0)+L.quantity}),y),{}),Li=y=>qr("","",()=>s(y)),Fi=y=>{y.preventDefault(),er&&!i.includes(er)&&(p([...i,er],{...a,[er]:tr}),pa(""))},zi=y=>{qr("",`${y}`,()=>{const V={...a};delete V[y],p(i.filter(L=>L!==y),V)})},_a=(y,V)=>p(i,{...a,[y]:V}),$u=y=>{y.preventDefault(),Br&&!l.includes(Br)&&(g([...l,Br]),As(""))},xa=y=>qr("",`${y}`,()=>g(l.filter(V=>V!==y))),qu=y=>{if(y.preventDefault(),bs&&!c.some(V=>V.name===bs)){const V=c.length>0?Math.max(...c.map(L=>L.id))+1:1;_([...c,{id:V,name:bs}]),ga("")}},js=y=>qr("","",()=>_(c.filter(V=>V.id!==y))),wa=async y=>{y.preventDefault();let V;if(Rs)V={...t.find(Y=>Y.id===Rs),...oe,price:Number(oe.price),threshold:Number(oe.threshold),targetStock:Number(oe.targetStock),productionLotSize:Number(oe.productionLotSize),processPrices:oe.processPrices};else{const L=t.length>0?Math.max(...t.map(Y=>Y.id))+1:1;V={...oe,id:L,price:Number(oe.price),threshold:Number(oe.threshold),targetStock:Number(oe.targetStock),productionLotSize:Number(oe.productionLotSize),processPrices:oe.processPrices,lots:[]}}await n(V),Dn(!1),Vs()},Vs=()=>{It({code:"",name:"",customer:"",category:l[0]||"",packaging:"",size:"",threshold:10,targetStock:20,productionLotSize:10,price:0,deadline:"",processPrices:{}}),sr(null)},ir=y=>{It({code:y.code,name:y.name,customer:y.customer||"",category:y.category,packaging:y.packaging||"",size:y.size,threshold:y.threshold,targetStock:y.targetStock,productionLotSize:y.productionLotSize||10,price:y.price,deadline:y.deadline||"",processPrices:y.processPrices?{...y.processPrices}:{}}),sr(y.id),Dn(!0)},_n=()=>{Vs(),Dn(!0)},or=(y,V,L)=>{Ps(y),Mn(V),Ge(!1);let Y=i[0],ae="";if(L)L.process&&(Y=L.process),L.lotNo&&(ae=L.lotNo);else if(V!=="IN"&&y.lots.length>0){const ee=y.lots.find(Te=>Te.quantity>0);ee&&(ae=ee.lotNo,Y=ee.process)}ae===Fn&&Ge(!0),Qt({lotNo:ae,quantity:0,process:Y,targetProcess:i.length>1?i[1]:i[0]}),Cs(!0)},Hu=async y=>{if(y.preventDefault(),!on)return;const{lotNo:V,quantity:L,process:Y,targetProcess:ae}=He,ee=Number(L);if(ee<=0)return;let Te=V,we=V;if(_e==="IN"){if(rr)we=Fn;else if(!we){Kt("","No");return}}else if(_e==="MOVE"){const Ie=a[ae];(Ie==="PRODUCT"||Ie==="BOXED"||rr)&&(we=Fn)}const Re=JSON.parse(JSON.stringify(t.find(Ie=>Ie.id===on.id)));if(_e==="OUT"||_e==="MOVE"){const Ie=Re.lots.find(ne=>ne.lotNo===Te&&ne.process===Y);if(!Ie||Ie.quantity<ee){Kt("","");return}}if(_e==="MOVE"&&Y===ae){Kt("","");return}if(_e==="IN"){const Ie=Re.lots.find(ne=>ne.lotNo===we&&ne.process===Y);Ie?Ie.quantity+=ee:Re.lots.push({lotNo:we,quantity:ee,process:Y,receivedDate:Yh()})}else if(_e==="OUT"){const Ie=Re.lots.find(ne=>ne.lotNo===Te&&ne.process===Y);Ie.quantity-=ee}else if(_e==="MOVE"){const Ie=Re.lots.find(je=>je.lotNo===Te&&je.process===Y);Ie.quantity-=ee;const ne=Re.lots.find(je=>je.lotNo===we&&je.process===ae);ne?ne.quantity+=ee:Re.lots.push({lotNo:we,quantity:ee,process:ae,receivedDate:Ie.receivedDate})}await n(Re),Cs(!1),q(!1)},Ea=async()=>{if(!w||!Pe||w===Pe)return;const y=[],V=a[Pe];t.forEach(L=>{const Y=L.lots.filter(ee=>ee.process===w&&le.has(`${L.id}-${ee.lotNo}`)&&ee.quantity>0);if(Y.length===0)return;const ae=JSON.parse(JSON.stringify(L));Y.forEach(ee=>{const Te=ee.quantity,we=ae.lots.find(ne=>ne.lotNo===ee.lotNo&&ne.process===w);we.quantity=0;const Re=V==="PRODUCT"||V==="BOXED"?Fn:ee.lotNo,Ie=ae.lots.find(ne=>ne.lotNo===Re&&ne.process===Pe);Ie?Ie.quantity+=Te:ae.lots.push({lotNo:Re,quantity:Te,process:Pe,receivedDate:ee.receivedDate})}),y.push(ae)}),await r(y),de(new Set),$e(!1),pt("")},Ta=()=>{$r([...sn,{uid:crypto.randomUUID(),itemId:"",lotNo:"",quantity:1,process:""}])},Ia=y=>{sn.length>1&&$r(sn.filter(V=>V.uid!==y))},Wr=(y,V,L)=>{$r(Y=>Y.map(ae=>{if(ae.uid!==y)return ae;const ee={...ae,[V]:L};if(V==="itemId"&&(ee.lotNo="",ee.process=""),V==="lotNo"){const Te=t.find(Re=>Re.id===Number(ee.itemId)),we=Te==null?void 0:Te.lots.find(Re=>Re.lotNo===L&&Re.quantity>0);ee.process=we?we.process:""}return ee}))},Ui=async y=>{y.preventDefault();const{targetItemId:V,targetQuantity:L,process:Y}=Dt,ae=Fn;if(!V||!Y){Kt("","");return}if(sn.some(ne=>!ne.itemId||!ne.lotNo||ne.quantity<=0)){Kt("","");return}if(Number(L)<=0){Kt("","1");return}for(const ne of sn){const je=t.find(mt=>mt.id===Number(ne.itemId)),Yr=je==null?void 0:je.lots.find(mt=>mt.lotNo===ne.lotNo&&mt.process===ne.process);if(!Yr||Yr.quantity<ne.quantity){Kt("",`
${je==null?void 0:je.name} (Lot:${ne.lotNo})`);return}}let ee=JSON.parse(JSON.stringify(t));const Te=new Set;sn.forEach(ne=>{const je=ee.findIndex(mt=>mt.id===Number(ne.itemId)),Yr=ee[je].lots.findIndex(mt=>mt.lotNo===ne.lotNo&&mt.process===ne.process);ee[je].lots[Yr].quantity-=Number(ne.quantity),Te.add(ee[je].id)});const we=ee.findIndex(ne=>ne.id===Number(V)),Re=ee[we].lots.findIndex(ne=>ne.lotNo===ae&&ne.process===Y);Re>-1?ee[we].lots[Re].quantity+=Number(L):ee[we].lots.push({lotNo:ae,quantity:Number(L),process:Y,receivedDate:Yh()}),Te.add(ee[we].id);const Ie=ee.filter(ne=>Te.has(ne.id));await r(Ie),qe(!1),$r([{uid:crypto.randomUUID(),itemId:"",lotNo:"",quantity:1,process:""}]),nr({targetItemId:"",targetQuantity:1,process:"",newLotNo:""}),Kt("","")},Sa=t.filter(y=>{const V=j.toLowerCase(),L=j===""||y.name.toLowerCase().includes(V)||y.code.toLowerCase().includes(V)||y.category.toLowerCase().includes(V)||y.lots.some(je=>je.lotNo.toLowerCase().includes(V)),Y=S===""||y.customer===S,ae=B?y.lots.some(je=>je.process===B&&je.quantity>0):!0,ee=at(y),Te=x?ee<=y.threshold:!0,we=Mt(y,"ALL"),Re=N?y.targetStock-we>0:!0,Ie=y.deadline?Vc(y.deadline):null,ne=E?Ie!==null&&Ie<=7:!0;return L&&Y&&ae&&Te&&ne&&Re}).sort((y,V)=>{switch(k){case"code_asc":return y.code.localeCompare(V.code);case"stock_desc":return at(V)-at(y);case"stock_asc":return at(y)-at(V);case"deadline_asc":return y.deadline?V.deadline?y.deadline.localeCompare(V.deadline):-1:1;default:return 0}}),Bi=t.reduce((y,V)=>y+On(V),0),Na=t.reduce((y,V)=>y+Mt(V,"WIP"),0),Wu=t.reduce((y,V)=>y+Mt(V,"PRODUCT"),0),xn=t.reduce((y,V)=>y+Mt(V,"BOXED"),0),Gt=t.filter(y=>at(y)<=y.threshold).length,Qr=t.filter(y=>y.targetStock-Mt(y,"ALL")>0).length,Kr=t.filter(y=>{const V=y.deadline?Vc(y.deadline):null;return V!==null&&V<=7}).length,$i=t.reduce((y,V)=>y+V.lots.reduce((L,Y)=>{var ae;return L+Y.quantity*(((ae=V.processPrices)==null?void 0:ae[Y.process])??V.price)},0),0),xe=i.reduce((y,V)=>(y[V]=t.reduce((L,Y)=>{var ae;return L+Y.lots.filter(ee=>ee.process===V).reduce((ee,Te)=>ee+Te.quantity,0)*(((ae=Y.processPrices)==null?void 0:ae[V])??Y.price)},0),y),{}),Ds=()=>{z(""),T(""),M("default"),D(null),v(!1),I(!1),A(!1)},Gr=()=>{Ne(null),q(!1),Z(""),de(new Set)},Xr=(y,V)=>It(L=>({...L,processPrices:{...L.processPrices,[y]:Number(V)}}));return e||d?u.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-50",children:u.jsxs("div",{className:"text-indigo-600 font-bold flex flex-col items-center gap-4",children:[u.jsx("div",{className:"w-10 h-10 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"}),"Firebase..."]})}):u.jsxs("div",{className:"min-h-screen bg-slate-50 text-slate-800 font-sans",children:[an.isOpen&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[9999] p-4",style:{zIndex:9999},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-sm overflow-hidden animate-fade-in",children:[u.jsxs("div",{className:`px-6 py-4 flex items-center gap-2 text-white ${an.type==="CONFIRM"?"bg-indigo-600":"bg-red-500"}`,children:[an.type==="CONFIRM"?u.jsx(C0,{size:24}):u.jsx(To,{size:24}),u.jsx("h2",{className:"font-bold text-lg",children:an.title})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("p",{className:"text-slate-700 whitespace-pre-wrap leading-relaxed",children:an.message}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:Hr,className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium transition-colors",children:an.type==="CONFIRM"?"":""}),an.type==="CONFIRM"&&u.jsx("button",{type:"button",onClick:ya,className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold hover:bg-indigo-700 transition-colors shadow-md",children:""})]})]})]})}),u.jsx(_w,{isFullscreen:C,toggleFullscreen:va,setIsAssemblyModalOpen:qe,setIsInventoryValuationOpen:Di,setIsSettingsOpen:Pi,setIsCustomerModalOpen:ks,setIsMasterModalOpen:ji,openNewItemModal:_n}),u.jsxs("main",{className:"w-full px-4 py-6 md:py-8",children:[t.length===0&&u.jsxs("div",{className:"mb-8 p-6 bg-indigo-50 border border-indigo-200 rounded-xl text-center shadow-sm",children:[u.jsx("h2",{className:"text-lg font-bold text-indigo-800 mb-2",children:"Firestore"}),u.jsx("p",{className:"text-slate-600 mb-4",children:"Firebase"}),u.jsx("button",{onClick:Mi,className:"bg-indigo-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-indigo-700 shadow-md transition-colors",children:"Firebase"})]}),u.jsx(xw,{totalStock:Bi,totalWIP:Na,totalProduct:Wu,totalBoxed:xn,deadlineAlertCount:Kr,lowStockCount:Gt,rawMaterialShortageCount:Qr,isDeadlineFilterActive:E,setIsDeadlineFilterActive:I,isLowStockFilterActive:x,setIsLowStockFilterActive:v,isRawMaterialShortageFilterActive:N,setIsRawMaterialShortageFilterActive:A,setViewingStockType:Ht}),u.jsx(ww,{processes:i,processTypes:a,stockByProcess:Oi,totalStock:Bi,setViewingProcess:Ne}),u.jsx(Tw,{filteredItems:Sa,customers:c,processes:i,processTypes:a,searchQuery:j,setSearchQuery:z,selectedCustomerFilter:S,setSelectedCustomerFilter:T,sortOption:k,setSortOption:M,isLowStockFilterActive:x,isDeadlineFilterActive:E,isRawMaterialShortageFilterActive:N,selectedProcessFilter:B,clearFilters:Ds,calculateProductStock:at,calculateStockByType:Mt,getDaysUntil:Vc,openEditModal:ir,deleteItem:Li})]}),ge&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",style:{zIndex:50},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-5xl max-h-[90vh] flex flex-col animate-fade-in overflow-hidden relative",children:[u.jsxs("div",{className:"bg-indigo-900 px-6 py-4 flex justify-between items-center text-white shrink-0",children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[ge==="PRODUCT"?u.jsx(Nu,{size:24}):ge==="WIP"?u.jsx(Wd,{size:24}):ge==="BOXED"?u.jsx(k0,{size:24}):u.jsx(Qd,{size:24}),ge==="PRODUCT"?"":ge==="WIP"?"":ge==="BOXED"?"":""," "]}),u.jsx("button",{type:"button",onClick:()=>Ht(null),className:"opacity-80 hover:opacity-100",children:u.jsx(Lt,{size:28})})]}),u.jsx("div",{className:"p-0 overflow-auto flex-1 bg-slate-50",children:u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{className:"bg-slate-100 text-slate-600 text-sm border-b sticky top-0 shadow-sm z-10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-4 font-semibold",children:""}),u.jsx("th",{className:"p-4 font-semibold",children:" / "}),u.jsx("th",{className:"p-4 font-semibold",children:""}),u.jsx("th",{className:"p-4 font-semibold text-right w-24",children:""}),u.jsx("th",{className:"p-4 font-semibold text-right w-32",children:""}),ge==="ALL"&&u.jsxs(u.Fragment,{children:[u.jsx("th",{className:"p-4 font-semibold text-right text-xs text-indigo-600 w-24",children:" "}),u.jsx("th",{className:"p-4 font-semibold text-right text-xs text-slate-500 w-24",children:" "})]}),u.jsx("th",{className:"p-4 font-semibold text-right",children:" ()"})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100 bg-white",children:t.flatMap(y=>Mt(y,ge)>0?[y]:[]).sort((y,V)=>y.code.localeCompare(V.code)).map(y=>{const V=Mt(y,ge);let L=null;if(ge==="PRODUCT"){const Y=Math.max(0,y.targetStock-V);Y>0&&(L=u.jsxs("span",{className:"text-xs font-bold text-red-600 bg-red-50 px-2 py-1 rounded",children:[" ",Y]}))}else if(ge==="WIP"){const Y=Mt(y,"ALL"),ae=Math.max(0,y.targetStock-Y);ae>0?L=u.jsxs("span",{className:"text-xs font-bold text-purple-700 bg-purple-50 px-2 py-1 rounded",children:[" ",ae]}):L=u.jsx("span",{className:"text-xs text-emerald-600 font-medium",children:""})}else if(ge==="ALL"){const Y=Math.max(0,y.targetStock-V);Y>0&&(L=u.jsxs("span",{className:"text-xs font-bold text-purple-700 bg-purple-50 px-2 py-1 rounded",children:[" ",Y]}))}return u.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[u.jsx("td",{className:"p-4 font-mono font-bold text-indigo-700",children:y.code}),u.jsxs("td",{className:"p-4 font-bold text-slate-800",children:[y.name,u.jsxs("div",{className:"text-xs text-slate-500 font-normal mt-0.5",children:[y.category," / ",y.size]}),y.deadline&&u.jsxs("div",{className:"text-xs text-red-500 font-normal mt-1 flex items-center gap-1",children:[u.jsx(b0,{size:10})," : ",y.deadline]})]}),u.jsx("td",{className:"p-4 text-slate-600 text-sm",children:y.customer||"-"}),u.jsx("td",{className:"p-4 text-right font-medium text-slate-500",children:y.targetStock.toLocaleString()}),u.jsxs("td",{className:"p-4 text-right font-bold text-lg text-slate-700",children:[V.toLocaleString()," ",u.jsx("span",{className:"text-sm font-normal text-slate-400",children:""})]}),ge==="ALL"&&u.jsxs(u.Fragment,{children:[u.jsx("td",{className:"p-4 text-right text-sm font-medium text-indigo-600",children:at(y).toLocaleString()}),u.jsx("td",{className:"p-4 text-right text-sm text-slate-500",children:Mt(y,"WIP").toLocaleString()})]}),u.jsx("td",{className:"p-4 text-right",children:L||u.jsx("span",{className:"text-slate-300 text-xs",children:"-"})})]},y.id)})})]})}),u.jsxs("div",{className:"bg-slate-50 p-4 border-t border-slate-200 text-right text-sm text-slate-500 shrink-0",children:[": ",t.reduce((y,V)=>y+Mt(V,ge),0).toLocaleString()," "]})]})}),w&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4",style:{zIndex:50},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col animate-fade-in overflow-hidden relative",children:[u.jsxs("div",{className:"bg-indigo-800 px-6 py-4 flex justify-between items-center text-white shrink-0",children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[u.jsx(Wl,{size:24}),Tt?"":`${w}`]}),u.jsxs("div",{className:"flex items-center gap-3",children:[!Tt&&u.jsxs("button",{type:"button",onClick:()=>q(!0),className:"bg-white text-indigo-800 px-3 py-1.5 rounded-lg text-sm font-bold hover:bg-indigo-50 flex items-center gap-1",children:[u.jsx(ns,{size:16})," "]}),Tt&&u.jsx("button",{type:"button",onClick:()=>q(!1),className:"text-indigo-200 hover:text-white text-sm underline",children:""}),u.jsx("button",{type:"button",onClick:Gr,className:"opacity-80 hover:opacity-100 ml-2",children:u.jsx(Lt,{size:28})})]})]}),u.jsx("div",{className:"p-0 overflow-auto flex-1 bg-slate-50 pb-20",children:Tt?u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"mb-4 relative",children:[u.jsx(V0,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-5 w-5"}),u.jsx("input",{type:"text",placeholder:"...",className:"w-full pl-10 pr-4 py-3 border border-slate-300 rounded-lg",value:K,onChange:y=>Z(y.target.value),autoFocus:!0})]}),u.jsx("div",{className:"grid gap-3",children:t.filter(y=>y.name.toLowerCase().includes(K.toLowerCase())||y.code.toLowerCase().includes(K.toLowerCase())).map(y=>u.jsxs("button",{type:"button",onClick:()=>or(y,"IN",{process:w||void 0,lotNo:""}),className:"flex items-center justify-between p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-500 text-left group",children:[u.jsx("div",{children:u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("span",{className:"font-mono font-bold text-indigo-600 bg-indigo-50 px-2 rounded",children:y.code}),u.jsx("span",{className:"font-bold text-slate-800 text-lg",children:y.name})]})}),u.jsxs("div",{className:"flex items-center gap-2 text-indigo-600 font-bold bg-indigo-50 px-3 py-2 rounded-lg group-hover:bg-indigo-600 group-hover:text-white",children:[u.jsx(ns,{size:20})," "]})]},y.id))})]}):(()=>{const y=t.flatMap(V=>V.lots.filter(L=>L.process===w&&L.quantity>0).map(L=>({item:V,lot:L,key:`${V.id}-${L.lotNo}`})));return y.length===0?u.jsx("div",{className:"p-12 text-center text-slate-400",children:""}):u.jsxs("table",{className:"w-full text-left border-collapse",children:[u.jsx("thead",{className:"bg-slate-50 text-slate-600 text-sm border-b sticky top-0 shadow-sm z-10",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-4 w-12 text-center",children:u.jsx("button",{type:"button",onClick:()=>{const V=y.map(L=>L.key);de(le.size===V.length?new Set:new Set(V))},className:"text-slate-400 hover:text-indigo-600",children:le.size>0&&le.size===y.length?u.jsx(nm,{size:20,className:"text-indigo-600"}):u.jsx(sm,{size:20})})}),u.jsx("th",{className:"p-4 font-semibold",children:""}),u.jsx("th",{className:"p-4 font-semibold",children:""}),u.jsx("th",{className:"p-4 font-semibold text-right",children:""}),u.jsx("th",{className:"p-4 font-semibold text-center",children:""})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:y.map(({item:V,lot:L,key:Y})=>u.jsxs("tr",{className:`hover:bg-slate-50 ${le.has(Y)?"bg-indigo-50":"bg-white"}`,children:[u.jsx("td",{className:"p-4 text-center",children:u.jsx("button",{type:"button",onClick:()=>{const ae=new Set(le);ae.has(Y)?ae.delete(Y):ae.add(Y),de(ae)},className:"text-slate-400",children:le.has(Y)?u.jsx(nm,{size:20,className:"text-indigo-600"}):u.jsx(sm,{size:20})})}),u.jsx("td",{className:"p-4 font-mono font-bold text-indigo-700",children:V.code}),u.jsxs("td",{className:"p-4 font-bold text-slate-800 text-sm",children:[V.name," ",u.jsxs("span",{className:"text-xs text-slate-500 font-normal",children:["(",L.lotNo,")"]})]}),u.jsx("td",{className:"p-4 text-right font-bold text-lg",children:L.quantity}),u.jsx("td",{className:"p-4 text-center",children:u.jsxs("div",{className:"flex justify-center gap-2",children:[u.jsxs("button",{type:"button",onClick:()=>or(V,"IN",L),className:"px-3 py-1.5 text-xs bg-indigo-100 text-indigo-800 rounded font-bold flex items-center gap-1",children:[u.jsx(ns,{size:14})," "]}),u.jsxs("button",{type:"button",onClick:()=>or(V,"MOVE",L),className:"px-3 py-1.5 text-xs bg-emerald-100 text-emerald-800 rounded font-bold flex items-center gap-1",children:[u.jsx(no,{size:14})," "]}),u.jsxs("button",{type:"button",onClick:()=>or(V,"OUT",L),className:"px-3 py-1.5 text-xs bg-slate-100 text-slate-600 rounded font-bold flex items-center gap-1",children:[u.jsx(hw,{size:14})," "]})]})})]},Y))})]})})()}),le.size>0&&u.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-white border-t border-slate-200 p-4 shadow-2xl flex items-center justify-between z-20",children:[u.jsxs("div",{className:"font-bold text-slate-700 ml-4",children:[le.size," "]}),u.jsxs("button",{type:"button",onClick:()=>$e(!0),className:"bg-emerald-600 text-white px-6 py-2 rounded-lg font-bold flex items-center gap-2 shadow-md",children:[u.jsx(no,{size:18})," "]})]})]})}),Vi&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:50},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"bg-indigo-800 px-6 py-4 flex justify-between items-center text-white shrink-0",children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[u.jsx(P0,{size:20})," "]}),u.jsx("button",{type:"button",onClick:()=>Di(!1),children:u.jsx(Lt,{size:24})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto flex-1 bg-slate-50",children:[u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-200 mb-6 text-center",children:[u.jsx("h3",{className:"text-slate-500 text-sm font-medium mb-1",children:""}),u.jsxs("p",{className:"text-3xl md:text-4xl font-bold text-slate-800",children:["",$i.toLocaleString()]})]}),u.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-slate-200 overflow-hidden",children:u.jsxs("table",{className:"w-full text-sm",children:[u.jsx("thead",{className:"bg-slate-100 text-slate-600 border-b border-slate-200",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-4 py-2 text-left",children:""}),u.jsx("th",{className:"px-4 py-2 text-right",children:""}),u.jsx("th",{className:"px-4 py-2 text-right",children:""})]})}),u.jsx("tbody",{className:"divide-y divide-slate-100",children:i.map(y=>{const V=Oi[y]||0;return u.jsxs("tr",{children:[u.jsx("td",{className:"px-4 py-3 font-medium text-slate-700",children:y}),u.jsx("td",{className:"px-4 py-3 text-right text-slate-600",children:V.toLocaleString()}),u.jsxs("td",{className:"px-4 py-3 text-right font-mono font-medium",children:["",(xe[y]||0).toLocaleString()]})]},y)})})]})})]})]})}),Uu&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:50},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",children:[u.jsxs("div",{className:"bg-slate-800 px-6 py-4 flex justify-between items-center text-white",children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[u.jsx(D0,{size:20})," "]}),u.jsx("button",{type:"button",onClick:()=>Pi(!1),children:u.jsx(Lt,{size:24})})]}),u.jsxs("div",{className:"flex border-b border-slate-200",children:[u.jsx("button",{type:"button",className:`flex-1 py-3 font-bold text-sm ${Zn==="PROCESS"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-500"}`,onClick:()=>fa("PROCESS"),children:""}),u.jsx("button",{type:"button",className:`flex-1 py-3 font-bold text-sm ${Zn==="CATEGORY"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-500"}`,onClick:()=>fa("CATEGORY"),children:""})]}),u.jsx("div",{className:"p-6",children:Zn==="PROCESS"?u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:Fi,className:"flex gap-2 mb-6",children:[u.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg",placeholder:"",value:er,onChange:y=>pa(y.target.value)}),u.jsxs("select",{className:"px-3 py-2 border border-slate-300 rounded-lg text-sm",value:tr,onChange:y=>ma(y.target.value),children:[u.jsx("option",{value:"WIP",children:""}),u.jsx("option",{value:"PRODUCT",children:""}),u.jsx("option",{value:"BOXED",children:""})]}),u.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold",children:""})]}),u.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.map((y,V)=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 p-3 rounded border border-slate-100",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"font-medium",children:y}),u.jsxs("select",{className:"text-xs px-2 py-1 rounded border outline-none",value:a[y]||"WIP",onChange:L=>_a(y,L.target.value),children:[u.jsx("option",{value:"WIP",children:""}),u.jsx("option",{value:"PRODUCT",children:""}),u.jsx("option",{value:"BOXED",children:""})]})]}),u.jsx("button",{type:"button",onClick:()=>zi(y),className:"text-slate-400 hover:text-red-500",children:u.jsx(lo,{size:16})})]},V))})]}):u.jsxs(u.Fragment,{children:[u.jsxs("form",{onSubmit:$u,className:"flex gap-2 mb-6",children:[u.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg",placeholder:"",value:Br,onChange:y=>As(y.target.value)}),u.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold",children:""})]}),u.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto",children:l.map((y,V)=>u.jsxs("li",{className:"flex justify-between items-center bg-slate-50 p-3 rounded border border-slate-100",children:[u.jsx("span",{className:"font-medium",children:y}),u.jsx("button",{type:"button",onClick:()=>xa(y),className:"text-slate-400 hover:text-red-500",children:u.jsx(lo,{size:16})})]},V))})]})})]})}),Ri&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:50},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"bg-indigo-900 px-6 py-4 flex justify-between items-center text-white shrink-0 rounded-t-xl",children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[u.jsx(R0,{size:20})," "]}),u.jsx("button",{type:"button",onClick:()=>ji(!1),children:u.jsx(Lt,{size:24})})]}),u.jsxs("div",{className:"p-6 overflow-auto flex-1 bg-slate-50",children:[u.jsx("div",{className:"flex justify-end mb-4",children:u.jsxs("button",{type:"button",onClick:_n,className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold flex items-center gap-2",children:[u.jsx(ns,{size:18})," "]})}),u.jsxs("table",{className:"w-full text-left bg-white border border-slate-200",children:[u.jsx("thead",{className:"bg-slate-100 text-slate-600 text-sm",children:u.jsxs("tr",{children:[u.jsx("th",{className:"p-4 border-b",children:""}),u.jsx("th",{className:"p-4 border-b",children:""}),u.jsx("th",{className:"p-4 border-b text-center",children:""})]})}),u.jsx("tbody",{children:t.map(y=>u.jsxs("tr",{className:"border-b",children:[u.jsx("td",{className:"p-4 font-mono text-indigo-700",children:y.code}),u.jsx("td",{className:"p-4 font-bold",children:y.name}),u.jsxs("td",{className:"p-4 text-center",children:[u.jsx("button",{type:"button",onClick:()=>ir(y),className:"p-2 text-indigo-600",children:u.jsx(M0,{size:18})}),u.jsx("button",{type:"button",onClick:()=>Li(y.id),className:"p-2 text-red-500",children:u.jsx(lo,{size:18})})]})]},y.id))})]})]})]})}),Bu&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:50},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-lg overflow-hidden",children:[u.jsxs("div",{className:"bg-indigo-800 px-6 py-4 flex justify-between items-center text-white",children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[u.jsx(Ql,{size:20})," "]}),u.jsx("button",{type:"button",onClick:()=>ks(!1),children:u.jsx(Lt,{size:24})})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("form",{onSubmit:qu,className:"flex gap-2 mb-6",children:[u.jsx("input",{type:"text",className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg",placeholder:": ",value:bs,onChange:y=>ga(y.target.value)}),u.jsx("button",{type:"submit",className:"bg-indigo-600 text-white px-4 py-2 rounded-lg font-bold",children:""})]}),u.jsx("ul",{className:"divide-y divide-slate-200 border border-slate-200 rounded-lg max-h-64 overflow-y-auto",children:c.map(y=>u.jsxs("li",{className:"flex justify-between p-3 bg-white",children:[u.jsxs("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:[u.jsx(iw,{size:16,className:"text-slate-400"}),y.name]}),u.jsx("button",{type:"button",onClick:()=>js(y.id),className:"text-red-500",children:u.jsx(lo,{size:16})})]},y.id))})]})]})}),nt&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",style:{zIndex:50},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"bg-indigo-800 px-6 py-4 flex justify-between items-center text-white shrink-0",children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[u.jsx(kh,{size:20})," "]}),u.jsx("button",{type:"button",onClick:()=>qe(!1),children:u.jsx(Lt,{size:24})})]}),u.jsxs("form",{onSubmit:Ui,className:"p-6 overflow-y-auto flex-1",children:[u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200",children:[u.jsxs("h3",{className:"text-sm font-bold text-slate-600 mb-3 flex items-center gap-2",children:[u.jsx("span",{className:"bg-slate-600 text-white w-5 h-5 rounded-full flex items-center justify-center text-xs",children:"1"}),""]}),u.jsxs("div",{className:"space-y-4",children:[sn.map(y=>{var V;return u.jsxs("div",{className:"relative p-3 bg-white border border-slate-200 rounded-lg shadow-sm",children:[sn.length>1&&u.jsx("button",{type:"button",onClick:()=>Ia(y.uid),className:"absolute top-2 right-2 text-slate-400",children:u.jsx(Lt,{size:16})}),u.jsxs("div",{className:"grid gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:""}),u.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded text-sm",value:y.itemId,onChange:L=>Wr(y.uid,"itemId",L.target.value),children:[u.jsx("option",{value:"",children:"--  --"}),t.filter(L=>On(L)>0).map(L=>u.jsxs("option",{value:L.id,children:[L.code," : ",L.name]},L.id))]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:""}),u.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded text-sm",value:y.lotNo,onChange:L=>Wr(y.uid,"lotNo",L.target.value),disabled:!y.itemId,children:[u.jsx("option",{value:"",children:"--  --"}),y.itemId&&((V=t.find(L=>L.id===Number(y.itemId)))==null?void 0:V.lots.filter(L=>L.quantity>0).map(L=>u.jsxs("option",{value:L.lotNo,children:[L.lotNo," (",L.process," / :",L.quantity,")"]},`${L.lotNo}-${L.process}`)))]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-slate-500 mb-1",children:""}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"number",min:"1",className:"w-full px-3 py-2 border border-slate-300 rounded text-right pr-8 text-sm",value:y.quantity,onChange:L=>Wr(y.uid,"quantity",Number(L.target.value))}),u.jsx("span",{className:"text-slate-500 -ml-6 text-xs",children:""})]})]})]})]})]},y.uid)}),u.jsxs("button",{type:"button",onClick:Ta,className:"w-full py-2 border-2 border-dashed border-slate-300 rounded-lg text-slate-500 font-bold flex items-center justify-center gap-2 text-sm",children:[u.jsx(ns,{size:16})," "]})]})]}),u.jsx("div",{className:"flex justify-center -my-2 text-slate-400",children:u.jsx(A0,{size:24})}),u.jsxs("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-100",children:[u.jsxs("h3",{className:"text-sm font-bold text-indigo-800 mb-3 flex items-center gap-2",children:[u.jsx("span",{className:"bg-indigo-600 text-white w-5 h-5 rounded-full flex items-center justify-center text-xs",children:"2"}),""]}),u.jsxs("div",{className:"grid gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-indigo-700 mb-1",children:""}),u.jsxs("select",{className:"w-full px-3 py-2 border border-indigo-300 rounded",value:Dt.targetItemId,onChange:y=>nr({...Dt,targetItemId:y.target.value}),children:[u.jsx("option",{value:"",children:"--  --"}),t.map(y=>u.jsxs("option",{value:y.id,children:[y.code," : ",y.name]},y.id))]})]}),u.jsx("div",{className:"grid grid-cols-2 gap-4",children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-indigo-700 mb-1",children:""}),u.jsxs("div",{className:"flex items-center",children:[u.jsx("input",{type:"number",min:"1",className:"w-full px-3 py-2 border border-indigo-300 rounded text-right pr-8 font-bold",value:Dt.targetQuantity,onChange:y=>nr({...Dt,targetQuantity:Number(y.target.value)})}),u.jsx("span",{className:"text-indigo-600 -ml-6 text-sm",children:""})]})]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs font-medium text-indigo-700 mb-1",children:""}),u.jsxs("select",{className:"w-full px-3 py-2 border border-indigo-300 rounded",value:Dt.process,onChange:y=>nr({...Dt,process:y.target.value}),children:[u.jsx("option",{value:"",children:"--  --"}),i.map(y=>u.jsx("option",{value:y,children:y},y))]})]})]})]})]}),u.jsxs("div",{className:"mt-8 flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:()=>qe(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium",children:""}),u.jsxs("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded-lg font-bold flex items-center gap-2",children:[u.jsx(kh,{size:18})," "]})]})]})]})}),yn&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",style:{zIndex:60},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"bg-indigo-800 px-6 py-4 flex justify-between items-center text-white shrink-0",children:[u.jsx("h2",{className:"font-bold text-lg",children:Rs?"":""}),u.jsx("button",{type:"button",onClick:()=>Dn(!1),children:u.jsx(Lt,{size:24})})]}),u.jsxs("form",{onSubmit:wa,className:"p-6 overflow-y-auto flex-1",children:[u.jsxs("div",{className:"grid gap-4",children:[u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{className:"col-span-1",children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsx("input",{required:!0,className:"w-full border p-2 rounded",value:oe.code,onChange:y=>It({...oe,code:y.target.value})})]}),u.jsxs("div",{className:"col-span-2",children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsx("input",{required:!0,className:"w-full border p-2 rounded",value:oe.name,onChange:y=>It({...oe,name:y.target.value})})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsxs("select",{className:"w-full border p-2 rounded",value:oe.customer,onChange:y=>It({...oe,customer:y.target.value}),children:[u.jsx("option",{value:"",children:"--  --"}),c.map(y=>u.jsx("option",{value:y.name,children:y.name},y.id))]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsx("select",{className:"w-full border p-2 rounded",value:oe.category,onChange:y=>It({...oe,category:y.target.value}),children:l.map(y=>u.jsx("option",{value:y,children:y},y))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsxs("select",{className:"w-full border p-2 rounded",value:oe.packaging,onChange:y=>It({...oe,packaging:y.target.value}),children:[u.jsx("option",{value:"",children:""}),u.jsx("option",{value:"",children:""}),u.jsx("option",{value:"",children:""})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsxs("select",{className:"w-full border p-2 rounded",value:oe.size,onChange:y=>It({...oe,size:y.target.value}),children:[u.jsx("option",{value:"",children:""}),u.jsx("option",{value:"",children:""}),u.jsx("option",{value:"",children:""})]})]})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:oe.targetStock,onChange:y=>It({...oe,targetStock:Number(y.target.value)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:oe.threshold,onChange:y=>It({...oe,threshold:Number(y.target.value)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:""}),u.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:oe.productionLotSize,onChange:y=>It({...oe,productionLotSize:Number(y.target.value)})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm mb-1 text-slate-600",children:" ()"}),u.jsx("input",{type:"number",className:"w-full border p-2 rounded",value:oe.price,onChange:y=>It({...oe,price:Number(y.target.value)})})]})]}),u.jsxs("details",{className:"group border border-slate-200 rounded-lg bg-slate-50 mt-2",children:[u.jsxs("summary",{className:"cursor-pointer p-3 font-medium text-slate-700 flex items-center gap-2",children:[u.jsx(uw,{size:16})," "]}),u.jsx("div",{className:"p-4 pt-0 grid grid-cols-2 gap-3",children:i.map(y=>u.jsxs("div",{children:[u.jsx("label",{className:"block text-xs mb-1 text-slate-600",children:y}),u.jsx("input",{type:"number",className:"w-full border p-1.5 rounded text-sm",value:oe.processPrices[y]||"",onChange:V=>Xr(y,V.target.value)})]},y))})]})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:()=>Dn(!1),className:"px-4 py-2 text-slate-600",children:""}),u.jsxs("button",{type:"submit",className:"px-6 py-2 bg-indigo-600 text-white rounded font-bold flex items-center gap-2",children:[u.jsx(gw,{size:18})," "]})]})]})]})}),da&&on&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-60 p-4",style:{zIndex:60},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",children:[u.jsxs("div",{className:`px-6 py-4 flex justify-between items-center text-white ${_e==="IN"?"bg-indigo-600":_e==="MOVE"?"bg-emerald-600":"bg-slate-600"}`,children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[_e==="IN"&&u.jsx(ns,{size:20}),_e==="MOVE"&&u.jsx(no,{size:20}),_e==="OUT"&&u.jsx(mw,{size:20}),_e==="IN"?"":_e==="MOVE"?"":""]}),u.jsx("button",{type:"button",onClick:()=>Cs(!1),children:u.jsx(Lt,{size:24})})]}),u.jsxs("form",{onSubmit:Hu,className:"p-6",children:[u.jsxs("div",{className:"mb-4",children:[u.jsx("p",{className:"text-sm text-slate-500 mb-1",children:""}),u.jsxs("div",{className:"font-bold text-lg text-slate-800",children:[on.code," ",on.name]})]}),u.jsxs("div",{className:"grid gap-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:[_e==="IN"?"":"",""]}),u.jsx("select",{required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg",value:He.process,onChange:y=>Qt({...He,process:y.target.value}),children:_e==="IN"?i.map(y=>u.jsx("option",{value:y,children:y},y)):on.lots.filter(y=>y.lotNo===(rr?Fn:He.lotNo)&&y.quantity>0).map(y=>u.jsxs("option",{value:y.process,children:[y.process," (: ",y.quantity,")"]},y.process))})]}),_e==="MOVE"&&(a[He.targetProcess]==="PRODUCT"||a[He.targetProcess]==="BOXED")?u.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-100 rounded text-sm text-blue-800 flex items-center gap-2",children:[u.jsx(fw,{size:18}),""]}):u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-center mb-1",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700",children:"No"}),_e==="IN"&&(a[He.process]==="PRODUCT"||a[He.process]==="BOXED")&&u.jsxs("label",{className:"flex items-center gap-1 text-xs text-indigo-600",children:[u.jsx("input",{type:"checkbox",checked:rr,onChange:y=>Ge(y.target.checked)}),""]})]}),rr?u.jsxs("div",{className:"w-full px-4 py-2 border border-slate-200 bg-slate-100 rounded-lg text-slate-500 text-sm flex items-center gap-2",children:[u.jsx(cw,{size:16})," "]}):_e==="IN"?u.jsx("input",{required:!0,type:"text",className:"w-full px-4 py-2 border border-slate-300 rounded-lg font-mono uppercase",placeholder:": 24-A001",value:He.lotNo,onChange:y=>Qt({...He,lotNo:y.target.value})}):u.jsxs("select",{required:!0,className:"w-full px-4 py-2 border border-slate-300 rounded-lg font-mono",value:He.lotNo,onChange:y=>{const V=on.lots.find(L=>L.lotNo===y.target.value&&L.quantity>0);Qt({...He,lotNo:y.target.value,process:V?V.process:i[0]})},children:[u.jsx("option",{value:"",children:"--  --"}),Array.from(new Set(on.lots.filter(y=>y.quantity>0&&y.lotNo!==Fn).map(y=>y.lotNo))).map(y=>u.jsx("option",{value:y,children:y},y))]})]}),_e==="MOVE"&&u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:""}),u.jsx("select",{required:!0,className:"w-full px-4 py-2 border border-emerald-300 rounded-lg bg-emerald-50",value:He.targetProcess,onChange:y=>Qt({...He,targetProcess:y.target.value}),children:i.map(y=>u.jsx("option",{value:y,disabled:y===He.process,children:y},y))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:" ()"}),u.jsx("input",{required:!0,type:"number",min:"1",className:"w-full px-4 py-3 border border-slate-300 rounded-lg text-xl font-bold text-right",value:He.quantity,onChange:y=>Qt({...He,quantity:Number(y.target.value)})})]})]}),u.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:()=>Cs(!1),className:"px-4 py-2 text-slate-600",children:""}),u.jsx("button",{type:"submit",className:`px-6 py-2 text-white rounded-lg font-bold flex items-center gap-2 ${_e==="IN"?"bg-indigo-600":_e==="MOVE"?"bg-emerald-600":"bg-slate-600"}`,children:""})]})]})]})}),Wt&&u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-60 p-4",style:{zIndex:60},children:u.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",children:[u.jsxs("div",{className:"bg-emerald-600 px-6 py-4 flex justify-between items-center text-white",children:[u.jsxs("h2",{className:"font-bold text-lg flex items-center gap-2",children:[u.jsx(no,{size:20})," "]}),u.jsx("button",{type:"button",onClick:()=>$e(!1),children:u.jsx(Lt,{size:24})})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("p",{className:"mb-4 text-slate-600",children:[" ",u.jsx("strong",{className:"text-slate-900",children:le.size})," "]}),u.jsxs("div",{className:"mb-6 relative",children:[u.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2 pl-6",children:""}),u.jsx("div",{className:"absolute left-4 top-9 text-slate-300",children:u.jsx(vw,{size:16})}),u.jsxs("select",{className:"w-full px-4 py-2 border border-emerald-300 rounded-lg focus:ring-2 focus:ring-emerald-500 outline-none bg-emerald-50",value:Pe,onChange:y=>pt(y.target.value),children:[u.jsx("option",{value:"",children:"--  --"}),i.map(y=>u.jsx("option",{value:y,disabled:y===w,children:y},y))]})]}),u.jsxs("div",{className:"flex justify-end gap-3",children:[u.jsx("button",{type:"button",onClick:()=>$e(!1),className:"px-4 py-2 text-slate-600 hover:bg-slate-100 rounded-lg font-medium",children:""}),u.jsxs("button",{type:"button",onClick:Ea,disabled:!Pe,className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-bold hover:bg-emerald-700 disabled:opacity-50 flex items-center gap-2",children:[u.jsx(no,{size:18})," "]})]})]})]})})]})}Dc.createRoot(document.getElementById("root")).render(u.jsx(Ig.StrictMode,{children:u.jsx($S,{})}));
